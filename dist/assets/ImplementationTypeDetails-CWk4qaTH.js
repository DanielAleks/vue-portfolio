import{Q as cl}from"./QSkeleton-CQslW_MF.js";import{a6 as be,a7 as he,a8 as v,a9 as m,aa as d,ac as s,ae as oe,af as u,aK as fl,ao as M,aL as x,am as k,aq as E,ar as K,a4 as W,ai as ee,ag as B,au as O,aj as ke,E as ne,U as ie,ay as P,al as N,ab as C,az as gl,aM as yl,Q as wl,ah as ge,T as p,aB as le,ax as te,aC as bl,ak as hl,O as ye,a3 as kl}from"./index-D5yNAYFk.js";import{Q as D,u as Te}from"./dark-mode-Cd1QLq0S.js";import{Q as Ie}from"./QCardSection-Bxs731jM.js";import{Q as Tl}from"./QCardActions-prSYt9ud.js";import{Q as ve}from"./QCard-CbW7iEIi.js";import{Q as Ce}from"./QDialog-B5BoQEQA.js";import{Q as ae,C as z}from"./ClosePopup-1nkdbb7J.js";import{L as Il}from"./ListQTable-DMWwlCDO.js";import{u as De}from"./use-quasar-DBA3fETA.js";import{u as vl,s as Cl}from"./pinia-CRo0OdLs.js";import{Q as Dl}from"./QCardDetails-Ce5jk6kc.js";import{B as Ml}from"./BasicAttachModal-Dv21dgeX.js";import{S as Sl}from"./SearchModel-cNdkYKOA.js";import{I as Gl}from"./Introspection-Q8yMBvnq.js";import{U as Rl,D as Vl,R as Nl}from"./ImplementationType-BNoUU2Xa.js";import{C as Pl,D as Bl,U as Ul}from"./ImplementationGuideline-DSUYUX7d.js";import{a as Ql,b as jl}from"./AdminImplementationType-VN5-i2OF.js";import{I as Al}from"./ImplementationGuideline-9WsAqj7K.js";import{s as H}from"./search-BG39UB0l.js";import{d as Ll}from"./searchStore-DUG70Cdl.js";import{Q as we}from"./QToggle-DbLruOcG.js";import{A as $l}from"./AccordianQTableDeep-D_iWsmT3.js";import"./use-key-composition-COT35ogy.js";import"./index-B22rUDyO.js";import"./parser-Dz45C1v8.js";import"./QSelect-BmmHhKDO.js";import"./QChip-DHC18oyq.js";import"./QItemLabel-Cx7oXb7e.js";import"./QMarkupTable-DvjuvEMf.js";import"./QPagination-CnwpqxMf.js";import"./QSeparator-NQtf9fTk.js";import"./QFile-UolSkRB9.js";import"./QResizeObserver-BDylPG1O.js";import"./QScrollObserver-K0xo8zqm.js";import"./touch-BjYP5sR0.js";import"./QExpansionItem-BKfHBOdy.js";import"./QSlideTransition-JFkgWch6.js";const Fl=he({name:"CreateGuidelineTaskModal",props:{setShowModal:{type:Function,required:!0},showModal:{type:[Boolean,String],required:!0},refetchGuidelines:{type:Function,default:()=>{}},pushCreatedGuideline:{type:Function,default:()=>{}}},setup(l){const t=O({showModal:!1,name:"",qualificationQuestion:"",skillTier:"Tier2",billingUnitType:"Labor",billingFrequency:"One-Time",description:"",internalNotes:"",perUnitPricingBasis:"",docURL:"",recommendedBlockHours:null,includeByDefault:!1,isDraft:!1}),U=ke();function Q(i){i!=="close"&&(t.skillName=i.Name,t.skill_id=i._id,t.skillCategory=i.Category,t.skillDescription=i.Description)}const j=ne(()=>Te().darkmode);ie(()=>l.showModal,()=>{console.log(l.showModal,"props.showModal"),l.showModal===!0?(t.showModal=!0,f("another")):f("close")});function f(i){i!=="another"&&(t.showModal=!1),t.name="",t.qualificationQuestion="",t.skillTier="Tier2",t.billingUnitType="Labor",t.billingFrequency="One-Time",t.description="",t.internalNotes="",t.perUnitPricingBasis="",t.docURL="",t.recommendedBlockHours=null,t.includeByDefault=!1,t.isDraft=!1}const{mutate:a,onDone:b,onError:I}=P(Pl,()=>({variables:{Name:t.name,PerUnitPricingBasis:t.perUnitPricingBasis,SkillTier:t.skillTier,BillingUnitType:t.billingUnitType,RecommendedBlockHours:t.recommendedBlockHours,Description:t.description,QualificationQuestion:t.qualificationQuestion,BillingFrequency:t.billingFrequency,ImplementationType_id:U.params.id,IncludeByDefault:t.includeByDefault,DocURL:t.docURL,isDraft:t.isDraft,InternalNotes:t.internalNotes}}));b(i=>{console.log(i,"onDone"),l.refetchGuidelines(),R.notify({message:"Implementation Guideline Created: "+t.name,color:"primary",position:"bottom",timeout:5e3,actions:[{icon:"visibility",color:"white",label:"View",handler:()=>{window.location.href="/implementation-type/guideline/"+i.data.CreateImplementationGuidelineMutation._id}}]}),setTimeout(()=>{f("another")},5e3)}),I(i=>{console.log(i,"result ERROR")});const R=De();function T(){l.setShowModal(!1),t.showModal=!1}function h(i){let y=[];return i.originalKey==="BillingFrequency"?y=[{label:"One-Time",handler:r=>{t.editingField=r}},{label:"Monthly",handler:r=>{t.editingField=r}},{label:"Annual",handler:r=>{t.editingField=r}}]:i.originalKey==="SkillTier"?y=[{label:"Tier 1",handler:r=>{t.editingField=r,t.skillTier="Tier1"}},{label:"Tier 2",handler:r=>{t.editingField=r,t.skillTier="Tier2"}},{label:"Tier 3",handler:r=>{t.editingField=r,t.skillTier="Tier3"}},{label:"Project Manager",handler:r=>{t.editingField=r,t.skillTier="ProjectManager"}},{label:"Consultant",handler:r=>{t.editingField=r,t.skillTier="Consultant"}},{label:"After Hours",handler:r=>{t.editingField=r,t.skillTier="AfterHours"}},{label:"Infrastructure",handler:r=>{t.editingField=r,t.skillTier="Infrastructure"}}]:i.originalKey==="BillingUnitType"&&(y=[{label:"Labor",handler:r=>{t.editingField=r}},{label:"Non Labor",handler:()=>{t.editingField=i}}]),y}return{state:t,setComponentId:Q,hideModal:T,darkmode:j,computedDropdownList:h,createImplementationGuideline:a}}}),ql={class:"grid grid-cols-2 gap-5 mt-3"},Hl={class:"grid grid-cols-2 gap-5"},Ol={class:"grid grid-cols-2 gap-5"},El={class:"flex justify-start"},Kl={class:"flex justify-start mb-5"},Wl={class:"mb-3 mt-2 w-full"};function zl(l,t,U,Q,j,f){return m(),v(Ce,{modelValue:l.state.showModal,"onUpdate:modelValue":t[10]||(t[10]=a=>l.state.showModal=a),class:"rounded-full"},{default:d(()=>[s(ve,{class:oe(["container intro-y box",l.darkmode?"bg-[#28334E] text-grey-3":""])},{default:d(()=>[s(Ie,{class:"col flex flex-col"},{default:d(()=>[u("div",{class:"mt-0 flex w-full flex-col min-h-full justify-center p-4 text-center sm:items-center sm:p-0 rounded-full",onClick:t[9]||(t[9]=fl(a=>l.hideModal(!1),["self"]))},[u("div",{class:oe(["px-5 flex-col sm:px-6 relative w-full",l.darkmode?"bg-[#28334E] text-slate-300":"bg-white"]),style:{"border-radius":"0px 0px 10px 10px"}},[s(M,{icon:"close",flat:"",class:"absolute -right-5 top-0",color:"red",onClick:l.hideModal},null,8,["onClick"]),t[11]||(t[11]=u("p",{class:"text-weight-medium"},"Create Implementation Guideline",-1)),t[12]||(t[12]=u("hr",{class:"dark:border-slate-600 my-2"},null,-1)),u("div",ql,[s(D,{modelValue:l.state.name,"onUpdate:modelValue":t[0]||(t[0]=a=>l.state.name=a),filled:"",dense:"",dark:"",class:"",label:"Name *"},null,8,["modelValue"]),s(D,{modelValue:l.state.qualificationQuestion,"onUpdate:modelValue":t[1]||(t[1]=a=>l.state.qualificationQuestion=a),filled:"",dense:"",dark:"",class:"",label:"Qualification Question *"},null,8,["modelValue"])]),s(D,{modelValue:l.state.perUnitPricingBasis,"onUpdate:modelValue":t[2]||(t[2]=a=>l.state.perUnitPricingBasis=a),filled:"",dense:"",dark:"",class:"my-3",label:"Per Unit Pricing Basis *"},null,8,["modelValue"]),t[13]||(t[13]=u("hr",{class:"dark:border-slate-600 my-2"},null,-1)),u("div",Hl,[s(D,{modelValue:l.state.description,"onUpdate:modelValue":t[3]||(t[3]=a=>l.state.description=a),filled:"",dense:"",dark:"",class:"my-2",type:"textarea","input-class":"h-14",label:"Description"},null,8,["modelValue"]),s(D,{modelValue:l.state.internalNotes,"onUpdate:modelValue":t[4]||(t[4]=a=>l.state.internalNotes=a),filled:"",dense:"",dark:"",type:"textarea","input-class":"h-14",class:"my-2",label:"Internal Notes"},null,8,["modelValue"])]),u("div",Ol,[s(D,{modelValue:l.state.docURL,"onUpdate:modelValue":t[5]||(t[5]=a=>l.state.docURL=a),filled:"",dense:"",dark:"",class:"my-2",label:"Documentation URL"},null,8,["modelValue"]),s(D,{modelValue:l.state.recommendedBlockHours,"onUpdate:modelValue":t[6]||(t[6]=a=>l.state.recommendedBlockHours=a),modelModifiers:{number:!0},type:"number",filled:"",dense:"",dark:"",class:"my-2",label:"Recommended Block Hours"},null,8,["modelValue"])]),u("div",El,[s(x,{filled:"",label:"Skill Tier: "+l.state.skillTier,dark:"",class:"my-2 mr-5",color:"primary","no-caps":""},{default:d(()=>[s(ae,{dark:l.darkmode,class:"dark:bg-[#354161]"},{default:d(()=>[(m(!0),k(E,null,K(l.computedDropdownList({originalKey:"SkillTier"}),(a,b)=>W((m(),v(ee,{key:b,clickable:"",class:"flex items-center",onClick:I=>l.state.skillTier=a.label},{default:d(()=>[u("p",null,B(a.label),1)]),_:2},1032,["onClick"])),[[z]])),128))]),_:1},8,["dark"])]),_:1},8,["label"]),s(x,{filled:"",label:"Billing Unit Type: "+l.state.billingUnitType,dark:"",class:"my-2 mr-5",color:"primary","no-caps":""},{default:d(()=>[s(ae,{dark:l.darkmode,class:"dark:bg-[#354161]"},{default:d(()=>[(m(!0),k(E,null,K(l.computedDropdownList({originalKey:"BillingUnitType"}),(a,b)=>W((m(),v(ee,{key:b,class:"flex items-center",clickable:"",onClick:I=>l.state.billingUnitType=a.label},{default:d(()=>[u("p",null,B(a.label),1)]),_:2},1032,["onClick"])),[[z]])),128))]),_:1},8,["dark"])]),_:1},8,["label"]),s(x,{filled:"",label:"Billing Frequency: "+l.state.billingFrequency,dark:"",class:"my-2 mr-5",color:"primary","no-caps":""},{default:d(()=>[s(ae,{dark:l.darkmode,class:"dark:bg-[#354161]"},{default:d(()=>[(m(!0),k(E,null,K(l.computedDropdownList({originalKey:"BillingFrequency"}),(a,b)=>W((m(),v(ee,{key:b,class:"flex items-center",clickable:"",onClick:I=>l.state.billingFrequency=a.label},{default:d(()=>[u("p",null,B(a.label),1)]),_:2},1032,["onClick"])),[[z]])),128))]),_:1},8,["dark"])]),_:1},8,["label"])]),u("div",Kl,[s(we,{modelValue:l.state.includeByDefault,"onUpdate:modelValue":t[7]||(t[7]=a=>l.state.includeByDefault=a),filled:"",dense:"",dark:"",class:"my-2",label:"Include By Default"},null,8,["modelValue"]),s(we,{modelValue:l.state.isDraft,"onUpdate:modelValue":t[8]||(t[8]=a=>l.state.isDraft=a),filled:"",dense:"",dark:"",class:"my-2 ml-5",label:"Is Draft"},null,8,["modelValue"])]),u("div",Wl,[s(M,{label:"Cancel","no-caps":"","icon-right":"close",color:"red",onClick:l.hideModal},null,8,["onClick"]),s(M,{label:"Redirect to Create Page","no-caps":"","icon-right":"arrow_forward",class:"mx-3",color:"teal",to:"/implementation-guideline/create"}),s(M,{label:"Create","icon-right":"add","no-caps":"",color:"primary",onClick:l.createImplementationGuideline},null,8,["onClick"])])],2)])]),_:1})]),_:1},8,["class"])]),_:1},8,["modelValue"])}const Yl=be(Fl,[["render",zl]]),Jl=he({name:"ImplementationPreview",components:{ListQTable:Il,QCardDetails:Dl,BasicAttachModal:Ml,SearchModel:Sl,AccordianQTableDeep:$l,CreateAdminComponentModal:Yl},setup(){const l=ne(()=>Te().darkmode),t=vl(Cl),U=ne(()=>t.guidelineID);function Q(e){t.setGuidelineID(e)}function j(e){t.setImplementationID(e)}const f=ke(),a=O({name:"",id:f.query.id,showSkillModal:!1,showGuidelineModal:!1,limit:10,page:1,deletedImplementationID:null,showModal:!1,selectedGuidelineID:null,confirmDelete:!1,selectGuideline:{},showAdminItems:!1,selectedUserID:null,showProjectView:!1,showComponentType:"all",totalPages:[{type:"Guideline",total:0},{type:"Product",total:0},{type:"Service",total:0}],hasRelatedGuidelinesBeenLoaded:!1});function b(){a.id=f.path.split("/").pop()}b();function I(e){a.showSkillModal=e}function R(e){a.showGuidelineModal=e}let T=p({});const{result:h,error:i}=le(Ql,()=>({_id:f.params.id})),{result:y,error:r}=le(Gl,()=>({name:"ImplementationType"})),A=p([]);te(()=>{r.value&&console.log(JSON.stringify(r.value,null,2)),y.value&&(console.log(y.value," ORIG introspectionData.value"),y.value.__type.fields.map(e=>{e.description!==null&&A.value.push(e)}),y.value.__type.description.includes("Confluence")&&A.value.push({name:"Confluence Article",description:y.value.__type.description.substring(19,y.value.__type.description.length)}))});const L=p([]),c=p([]),S=p([]),Z=p([]),X=p(!1),se=p(!0);te(()=>{i.value&&console.log(JSON.stringify(i.value,null,2)),h.value&&(se.value=!1,console.log(h.value,"implementationData.value"),T.value={...h.value.AdminImplementationType,subjectMatterExpert:h.value.AdminImplementationType.SubjectMatterExpertName},h.value.AdminImplementationType.IsDeprecated||delete T.value.IsDeprecatedReason,h.value.AdminImplementationType.AdminImplementationGuidelines.map(e=>{S.value.some(o=>o._id===e._id)||S.value.push({...e,type:"header",GuidelineName:e.Name,isSelected:!1}),X.value||J(e)}),a.totalPages[0].total=c.value.length,setTimeout(()=>{X.value=!0},2e3))});const{load:Me,onResult:Se}=bl(jl,()=>({_id:f.params.id}),{fetchPolicy:"network-only"});Se(e=>{e.loading===!1&&e.data!==null&&e.data?.AdminImplementationType?.AdminImplementationGuidelines.map(o=>{S.value.some(n=>n._id===o._id)||S.value.push({...o,type:"header",GuidelineName:o.Name,isSelected:!1}),X.value||J(o)})});function Ge(e){a.page=e}const G=De();function Re(e){G.loading.show({delay:200,message:"Redirecting to Guideline"+e,spinnerSize:100,spinnerColor:"primary",messageColor:"white",backgroundColor:"primary"}),setTimeout(()=>{G.loading.hide()},950)}const $=hl();function Ve(e,o,n){console.log(e,o,n,"id, operation, evt goToGuideline(id, operation, evt)"),e==="popup"?R(!0):e==="create"&&e!=="popup"?(n.ctrlKey||(j(f.params.id),Re(" Create")),n.ctrlKey||n.button===1||n==="openNewTab"||n==="openNewWindow"||n==="openIncognitoWindow"?console.log("hi"):setTimeout(()=>{$.push("/implementation-guideline/create")},1e3)):o==="delete"?(a.confirmDelete=!0,a.selectGuideline=e):n.ctrlKey||n.button===1||n==="openNewTab"?window.open(`implementation-type/guideline/${e}`,"_blank"):n==="openNewWindow"?window.open(`implementation-type/guideline/${e}`,"_blank","width=full,height=full"):n==="openIncognitoWindow"?window.open(`implementation-type/guideline/${e}`,"_blank","incognito=yes"):n.button!==2&&(Q(e),$.push({name:"GuidelineDetails",params:{id:e}}))}function Ne(e){$.push({name:"Product Details",params:{id:e}})}function Pe(e){$.push({name:"Service Details",params:{id:e}})}function re(e){return e==null?"---":e.replace(/([A-Z])/g," $1").replace(/([0-9])/g," $1").trim()}const w=O([{name:"builderName",align:"left",label:"Name",field:e=>e.Name,format:e=>`${e}`},{name:"dropdown",label:"Skill Tier",align:"center",field:e=>re(e.SkillTier)??"---"},{name:"default",required:!0,label:"Auto Include",align:"center",field:e=>e.IncludeByDefault?"Yes":"No",format:e=>`${e}`,sortable:!0},{name:"recommendedBlockHours",label:"Recommended Hours",align:"center",field:e=>e.RecommendedBlockHours?e.RecommendedBlockHours+" hours":"---"},{name:"status",label:"Status",align:"left",field:e=>e.IsDeprecated?"Deprecated":e.isDraft?"Draft":"Active",sortable:!0},{name:"attachment",label:"Actions",align:"right"}]),Be=O([{name:"name",align:"left",label:"Name",field:e=>e.Name,format:e=>`${e}`},{name:"isRecurring",label:"Is Recurring",align:"center"},{name:"attachment",label:"Actions",align:"left"}]),{mutate:Ue,onDone:Qe}=P(Bl,()=>({variables:{_id:a.selectGuideline._id}}));Qe(e=>{c.value.splice(c.value.findIndex(o=>o._id===a.selectGuideline._id),1),G.notify({message:"Implementation Guideline Deleted: "+e.data.DeleteImplementationGuidelineMutation.Name,color:"primary",icon:"delete",timeout:8e3,actions:[{label:"Undo",color:"white"}]})});function je(){a.confirmDelete=!1,Ue()}const F=ye("windowWidth"),Ae=()=>{if(console.log(F.value,"windowWidth.value"),F.value<=800){const e=w.findIndex(o=>o.name==="dropdown");e!==-1&&w.splice(e,1)}else w.find(o=>o.name==="dropdown")||w.splice(1,0,{name:"dropdown",label:"Skill Tier",align:"center",field:o=>re(o.SkillTier)??"---"});if(F.value<=600){const e=w.findIndex(o=>o.name==="default");e!==-1&&w.splice(e,1)}else w.find(o=>o.name==="default")||w.splice(1,0,{name:"default",required:!0,label:"Auto Include",align:"center",field:o=>o.IncludeByDefault?"Yes":"No",format:o=>`${o}`,sortable:!0});if(F.value<=500){const e=w.findIndex(o=>o.name==="status");e!==-1&&w.splice(e,1)}else w.find(o=>o.name==="status")||w.splice(1,0,{name:"status",label:"Status",field:o=>o.IsDeprecated,sortable:!0})};ie(()=>F.value,()=>{Ae()},{immediate:!0});function Le(){return{name:"Add Guideline Skill",action:()=>{I(!0)}}}const $e=ye("formatTotal"),Fe=O([{name:"name",align:"left",label:"Name",field:e=>e.Name,format:e=>`${e}`,sortable:!0},{name:"price",required:!0,label:"Price",align:"left",field:e=>$e(e.UnitPrice),format:e=>`${e}`,sortable:!0},{name:"periodType",label:"Period Type",align:"center",field:e=>e.PeriodType==="m"?"Monthly":e.PeriodType==="y"?"Yearly":e.PeriodType==="o"?"One-Time":e.PeriodType},{name:"actions",label:"Actions",align:"center"}]),de=p({}),{mutate:qe,onDone:He}=P(Rl,()=>({variables:de.value}));He(e=>{console.log(e,"result onDoneUpdateImplementation"),T.value.subjectMatterExpert=e.data.UpdateImplementationTypeMutation.SubjectMatterExpertName});function ue(e,o){let n=Object.keys(e)[0],g=Object.values(e)[0];console.log(n,g,"key, val updateImplementation()"),o!=="delete"?(de.value={_id:f.params.id,...e},qe()):Oe()}const{mutate:Oe,onDone:Ee}=P(Vl,()=>({variables:{_id:f.params.id}})),{mutate:Ke,onDone:We}=P(Nl,()=>({variables:{_id:a.deletedImplementationID}}));function ze(e){a.deletedImplementationID=e,q.value=!0,Ke()}const q=p(!1);Ee(e=>{T.value=e.data.DeleteImplementationTypeMutation,G.notify({message:"Implementation Type Deleted: "+e.data.DeleteImplementationTypeMutation.Name,color:"primary",icon:"delete",timeout:8e3,actions:[{label:"Undo",color:"white",handler:()=>ze(e.data.DeleteImplementationTypeMutation._id)}]}),setTimeout(()=>{q.value||G.loading.show({delay:200,message:"Redirecting to Implementation Types",spinnerSize:100,spinnerColor:"primary",messageColor:"white",backgroundColor:"primary"})},8e3),setTimeout(()=>{q.value||(G.loading.hide(),$.push("/implementation-types")),q.value=!1},9e3)}),We(e=>{T.value=e.data.RestoreImplementationTypeMutation,q.value=!0,G.notify({message:"Implementation Type Restored: "+e.data.RestoreImplementationTypeMutation.Name,color:"green",icon:"redo",timeout:8e3})});const Ye=["Name","ImplementationCategory","Description","isDraft","feature","benefit","sow_order","InternalNotes","IsDeprecated","IsDeprecatedReason","subjectMatterExpert","hideFromWebsite"];function Je(e){a.showModal=e}function Ze(){}function me(e){e!=="close"&&(a.selectedGuidelineID=e)}const pe=Ll(),Xe=p([]),_e=p(!1),Y=p([]),ce=p(!1),{result:fe,loading:xe}=le(Al,()=>({page:a.page,Name:a.search,first:20}));te(()=>{if(xe.value&&(ce.value=!0),fe.value){let e=Y.value;Y.value=fe.value.ImplementationGuidelines.data.map(o=>({...o,Quantity:o.RecommendedBlockHours})),ce.value=!1,H.setSpinner(Y.value,e)}}),ie(()=>H.getState,()=>{a.search=H.getState.search,a.page=H.getState.page},{deep:!0});function el(e){console.log(e,"item setSubjectMatterExpertId(id)"),e!=="close"&&(a.selectedUserID=e._id,ue({subjectMatterExpert:e._id},"update"))}kl(()=>{H.onSetValueCallback(me),pe.onSetValueCallback(el)});const V=p({}),{mutate:ll}=P(Ul,()=>({variables:{_id:V.value._id,RecommendedBlockHours:V.value.RecommendedBlockHours,SkillTier:V.value.SkillTier}}));function tl(e,o){console.log(o,e,"item"),V.value=e,V.value.RecommendedBlockHours=e.Quantity??e.RecommendedBlockHours,o&&(V.value.SkillTier=o._id),setTimeout(()=>{ll()},10)}const _=p([]);function al(e,o){e.includes(o.TaskName),_.value=e}function ol(){c.value=[],Z.value=[],L.value=[],S.value.map(e=>e.isSelected=!1)}function nl(){a.showProjectView=!a.showProjectView,ol(),a.showProjectView===!1&&setTimeout(()=>{S.value.map(e=>{J(e)})},500)}function J(e){e.ImplementationTasks.map(o=>{L.value.some(n=>n._id===o.ProjectProcess._id)||L.value.push({...o.ProjectProcess,ProjectProcessName:o.ProjectProcess.Name,ImplementationTasks:p([])})}),e.ImplementationTasks.map(o=>{Z.value.some(n=>n._id===o._id)||Z.value.push({...o,TaskName:o.Name,isSelected:!1})}),c.value=L.value,L.value.map((o,n)=>{e.ImplementationTasks.map(g=>{g.project_process_id===o._id&&(c.value[n].ImplementationTasks.some(pl=>g.Name===pl.Name)||(console.log(g,"taskItem",c.value[n],c.value),c.value[n].ImplementationTasks.push(g)))})}),e.ImplementationTasks.map(o=>{o.ImplementationTaskRequirements.map(n=>{!c.value.some(g=>g._id===n._id)&&n.Requirement!==null&&c.value.push({...n,RequirementName:n.Requirement.Name})})})}function il(e){console.log(e,"item removeProjectViewItem(item)",c.value),c.value.splice(c.value.findIndex(n=>n._id===e._id),1);const o=p([]);c.value.map(n=>{n.ImplementationTasks&&n.ImplementationTasks.map(g=>{g._id!==e._id&&o.value.push(g)})}),o.value.map(n=>{c.value.splice(c.value.findIndex(g=>g._id===n._id),1)})}function sl(e){console.log(e,"row setSelectedRow(row)"),e.isSelected?il(e):J(e)}function rl(e){return e===a.showComponentType?"blue-6":"primary"}let dl=p([{type:"all",label:"Show All",icon:"sort"},{type:"guidelines",label:"Implementation Guidelines",icon:"info"},{type:"projectView",label:"Project View",icon:"history"}]);function ul(e){return{cursor:"cursor-pointer",textColor:"white",tooltip:null,icon:e.icon}}function ml(e){a.showComponentType=e}return{state:a,route:f,implementation:T,guidelines:c,implementationGuidelines:Y,goToGuideline:Ve,goToProduct:Ne,goToService:Pe,setShowSkillModal:I,setPage:Ge,columns:w,topAction:Le,recurringColumns:Fe,implementationData:h,guidelineRouteID:U,updateImplementation:ue,editableFields:Ye,introspectionValue:A,setShowModal:Je,createImplementationGuideline:Ze,setGuidelineId:me,deleteGuideline:je,darkmode:l,updateRelatedGuideline:tl,isUsersLoading:_e,users:Xe,searchOptionsUser:pe,expandTypesRef:_,expandOrHideRows:al,projectViewColumns:Be,setShowProjectView:nl,listOfGuidelines:S,setSelectedRow:sl,loading:se,setShowGuidelineModal:R,activeColor:rl,sowToggleOptions:dl,sowToggle:ul,setSection:ml,loadRelatedImplementationGuideline:Me}}}),Zl={class:"flex justify-center w-full mx-3 sm:mx-12 animate__animated animate__fadeIn"},Xl={key:0,class:"w-full"},_l={key:0,class:"mb-8 text-center text-2xl dark:text-slate-300"},xl={key:1,class:"flex justify-center"},et={style:{"list-style":"disc"},class:"ml-4"},lt={class:"flex justify-end mt-8 -mb-5"},tt={key:4,class:"mt-10 mb-10 dark:border-slate-500"},at={class:"q-ml-sm text-center mt-3"},ot={class:"text-weight-medium text-primary"};function nt(l,t,U,Q,j,f){const a=N("SearchModel"),b=N("QCardDetails"),I=N("BasicAttachModal"),R=N("ListQTable"),T=N("AccordianQTableDeep"),h=N("CreateAdminComponentModal");return m(),k("div",Zl,[l.implementation?(m(),k("div",Xl,[l.loading?C("",!0):(m(),k("p",_l,B(l.implementation.Name),1)),l.loading?(m(),k("div",xl,[s(cl,{class:"mb-5 w-60 h-3"})])):C("",!0),s(b,{response:l.implementation,updateResponse:l.updateImplementation,editableFields:l.editableFields,introspectionValue:l.introspectionValue,isLoading:l.loading,type:"ImplementationType"},{slot2:d(()=>[s(a,{label:"Users",value:"name",filled:"",dense:"","no-focus":"",rows:l.users,loading:l.isUsersLoading,store:l.searchOptionsUser,defaultValue:l.implementation.SubjectMatterExpertName,dark:l.darkmode},null,8,["rows","loading","store","defaultValue","dark"])]),_:1},8,["response","updateResponse","editableFields","introspectionValue","isLoading"]),t[3]||(t[3]=u("hr",{class:"w-full h-2 mt-10 dark:border-slate-500"},null,-1)),s(yl,{rounded:"",class:"px-0 mt-4 mx-10 md:mx-0 w-full h-10"},{default:d(()=>[(m(!0),k(E,null,K(l.sowToggleOptions,(i,y)=>(m(),v(M,{key:y,color:l.activeColor(i.type),dark:l.darkmode,label:i.label,class:oe([l.sowToggle(i).cursor,"w-full text-no-wrap"]),style:{"font-weight":"600","letter-spacing":"0.4px"},"no-caps":"","text-color":l.sowToggle(i).textColor,onClick:r=>l.setSection(i.type)},{default:d(()=>[l.sowToggle(i).tooltip?.length>0&&i.type!=="all"?(m(),v(gl,{key:0,style:{"font-size":"0.9rem","min-width":"10rem","max-width":"20rem"},class:"bg-white text-slate-700 border shadow-md"},{default:d(()=>[u("ul",et,[(m(!0),k(E,null,K(l.sowToggle(i).tooltip,(r,A)=>(m(),k("li",{key:A},B(r.name??r.Name),1))),128))])]),_:2},1024)):C("",!0)]),_:2},1032,["color","dark","label","class","text-color","onClick"]))),128))]),_:1}),l.state.showModal?(m(),v(I,{key:2,cardAddMode:"ImplementationGuidelines",showComponentModal:l.state.showModal,setComponentModal:l.setShowModal,createOnly:!0,title:"Implementation Guidelines",selectedComponentID:l.state.selectedGuidelineID,saveComponent:l.saveAttachedComponent},{default:d(()=>[s(a,{label:"Guidelines",rows:l.implementationGuidelines,loading:l.isGuidelineLoading,filled:"","no-focus":""},null,8,["rows","loading"])]),_:1},8,["showComponentModal","setComponentModal","selectedComponentID","saveComponent"])):C("",!0),u("div",lt,[s(D,{modelValue:l.state.name,"onUpdate:modelValue":t[0]||(t[0]=i=>l.state.name=i),filled:"",dense:"",placeholder:"Search Implementation Guidelines",class:"w-[6.3rem] sm:w-[17rem] absolute left-3 sm:left-12",dark:l.darkmode},{append:d(()=>[s(wl,{name:"search"})]),_:1},8,["modelValue","dark"]),s(M,{color:"primary","no-caps":"",icon:"add",label:"Create Implementation Guideline",onClick:t[1]||(t[1]=i=>l.goToGuideline("popup"))})]),l.guidelines&&(l.state.showComponentType==="guidelines"||l.state.showComponentType==="all")?(m(),v(R,{key:3,title:"Related Implementation Guidelines",rows:l.listOfGuidelines.filter(i=>i.Name&&i.Name.toLowerCase().includes(l.state.name.toLowerCase())),columns:l.columns,handleRowClick:l.goToGuideline,stateValue:l.state,setPage:l.setPage,showPagination:!1,loading:l.state.searchLoading,topAction:l.topAction,updateComponent:l.updateRelatedGuideline,listType:"manage",customNoDataText:"Searching for Implementation Guidelines...","project-view":"",setShowProjectView:l.setShowProjectView,setSelectedRow:l.setSelectedRow},null,8,["rows","columns","handleRowClick","stateValue","setPage","loading","topAction","updateComponent","setShowProjectView","setSelectedRow"])):C("",!0),l.state.showComponentType==="all"?(m(),k("hr",tt)):C("",!0),l.state.showComponentType==="projectView"||l.state.showComponentType==="all"?(m(),v(T,{key:5,rows:l.guidelines,columns:l.projectViewColumns,stateValue:l.state,title:l.state.showProjectView?"Project View":"Project View (All)",showPagination:!1,customNoDataText:"Searching for Guidelines and Implementation Tasks...",loading:l.state.searchLoading,expandOrHideRows:l.expandOrHideRows,filterByRowName:"ProjectProcessName",filterByRowNameSecondary:"Name",rowName:"Name",relatedHeaderTitle:"Tasks",relatedHeaderTitleSecondary:"Requirements",expansionHeaderName:"Related Phase",dense:"",class:"mb-10",showHeaderToggle:!0,showRelatedTasksTableState:!1},null,8,["rows","columns","stateValue","title","loading","expandOrHideRows"])):C("",!0)])):C("",!0),s(Ce,{modelValue:l.state.confirmDelete,"onUpdate:modelValue":t[2]||(t[2]=i=>l.state.confirmDelete=i)},{default:d(()=>[s(ve,{style:{background:"white"},class:"min-w-[15rem]"},{default:d(()=>[s(Ie,{class:"flex flex-col items-center"},{default:d(()=>[t[6]||(t[6]=u("p",{class:"text-xl"},"Are you sure?",-1)),u("p",at,[t[4]||(t[4]=ge(" ImplementationType Guideline: ",-1)),u("span",ot,B(l.state.selectGuideline.Name),1),t[5]||(t[5]=ge(" will be deprecated. ",-1))])]),_:1}),s(Tl,{align:"right"},{default:d(()=>[W(s(M,{style:{"font-weight":"400"},"no-caps":"",flat:"",label:"Cancel"},null,512),[[z]]),W(s(M,{style:{"font-weight":"500"},"no-caps":"",class:"mr-5",label:"Delete",color:"red-5",onClick:l.deleteGuideline},null,8,["onClick"]),[[z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(h,{showModal:l.state.showGuidelineModal,setShowModal:l.setShowGuidelineModal,refetchGuidelines:l.loadRelatedImplementationGuideline},null,8,["showModal","setShowModal","refetchGuidelines"])])}const Et=be(Jl,[["render",nt]]);export{Et as default};
