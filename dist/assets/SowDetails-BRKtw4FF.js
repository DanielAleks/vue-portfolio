import{Q as he}from"./QSkeleton-Coym0GAQ.js";import{Q as lt,u as ct}from"./dark-mode-CG8Py2TO.js";import{E as K,aN as Fo,aO as pa,D as fa,Y as wa,N as va,$ as ya,T as f,aP as ga,U as ye,a2 as Vt,F as be,aQ as _t,G as ha,ao as W,a6 as Ze,a7 as Ke,al as we,a8 as R,a9 as l,aa as T,ac as u,ae as F,af as n,ag as V,aj as ft,au as $e,a3 as nt,aB as Le,ax as ge,ay as Ne,am as g,ab as y,ar as Ge,aq as Oe,av as to,aC as Nt,O as mt,ah as J,Q as Qe,az as Me,ak as io,aR as Sa,an as $t,a4 as ut,o as Uo,ai as Mt,as as ba,ad as Xt,aS as eo,aT as Ta,aU as vo,aA as Zt,ap as ka,aL as Mo,aM as Ca,aw as Da}from"./index-BmmqEUwr.js";import{u as Ia,S as $o,a as Qo,b as Go,c as Pa,d as Wt,C as yo,e as go,f as ho,g as Wo,h as Ho,Q as xt,i as Oo,j as Na,k as Ma,l as $a,m as Oa}from"./QStepper-DsgEjJ3h.js";import{p as et,c as Aa,u as Ra,a as La,d as qa}from"./use-key-composition-DGnxYdx2.js";import{Q as Ea,a as Ba,b as Va,c as ja}from"./Sow-Du3OUlZ2.js";import{Q as gt}from"./QCardSection-W7OKuTbN.js";import{Q as ht}from"./QCard-71HNS0Eo.js";import{Q as Ot}from"./QDialog-DNaj6pyy.js";import{u as kt}from"./use-quasar-jxPryvnm.js";import{S as Ht}from"./SearchModel-B_5zHey7.js";import{g as Je}from"./index-DO6kqxPy.js";import{k as Fa,l as Yo,m as Ua,n as Qa,o as Ga,e as Wa,p as Ha,a as zo,d as Ya}from"./searchStore-B6YwqjjR.js";import{u as Zo,s as Ko}from"./pinia-EQQjYdtZ.js";import{A as za,C as Za,m as Ka,O as Ja,P as Xa,a as _a}from"./Project-Jrb2jWs0.js";import{A as So}from"./AccordianQTableDeep-2Di9F8ib.js";import{U as xa,S as Jo,a as el}from"./SowGuidelineRequirement-YAwDBBtx.js";import{Q as zt}from"./QCardActions-gAV4t4Gq.js";import{C as Dt,Q as bo}from"./ClosePopup-Dl7x5pRy.js";import{s as xe}from"./search-pI3uLz3p.js";import{C as Xo,a as tl,M as ol,L as al,b as ll,c as nl,U as sl,d as il,D as rl,e as dl,f as ul,R as ml,g as cl}from"./CreateNewLocationModal-CmzfKLQk.js";import{A as _o}from"./Account-DnFGailD.js";import{Q as pl}from"./QPagination-BPciSIuB.js";import{Q as dt,L as ro,a as To}from"./ListQTable-CU9pwRms.js";import{Q as At}from"./QToggle-CHdCZyvb.js";import{Q as Ao}from"./QItemLabel-Da11J6wT.js";import{Q as fl}from"./QSelect-BiYUipAn.js";import{I as ko}from"./ImplementationGuideline-CvM2u1F9.js";import{P as Co}from"./Product-16REYmVE.js";import{S as Do}from"./Service-Dd59kM5u.js";import{S as Io}from"./ServiceBundle-CyCxQ6nM.js";import{Q as fo,a as Lt}from"./QTabs-DrxItm6K.js";import{a as wl,Q as vl,b as lo,c as no}from"./QMarkupTable-CqW4FPo6.js";import{Q as yl}from"./QExpansionItem-CzGxjNvd.js";import{d as xo}from"./vuedraggable.umd-BtXApnEh.js";import{I as gl}from"./Introspection-BfTNXc1Q.js";import{b as hl,a as Sl}from"./ImplementationType-Dd5P1cJ-.js";import{G as bl}from"./index-B37USYrg.js";import"./QSlideTransition-BcQffVlC.js";import"./touch-BjYP5sR0.js";import"./QResizeObserver-Dl2MazeZ.js";import"./QScrollObserver-CK8Scf4k.js";import"./parser-4S4bR1x6.js";import"./QFile-Dpo0hu6w.js";import"./QChip-CEk8Ad1K.js";import"./QSeparator-DcnsD_Wj.js";const Gt=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Tl(e,t,v){return Object.prototype.toString.call(e)==="[object Date]"&&(v=e.getDate(),t=e.getMonth()+1,e=e.getFullYear()),Il(Po(e,t,v))}function Ro(e,t,v){return ta(Dl(e,t,v))}function kl(e){return Cl(e)===0}function ao(e,t){return t<=6?31:t<=11||kl(e)?30:29}function Cl(e){const t=Gt.length;let v=Gt[0],w,i,s,a,o;if(e<v||e>=Gt[t-1])throw new Error("Invalid Jalaali year "+e);for(o=1;o<t&&(w=Gt[o],i=w-v,!(e<w));o+=1)v=w;return a=e-v,i-a<6&&(a=a-i+ot(i+4,33)*33),s=Tt(Tt(a+1,33)-1,4),s===-1&&(s=4),s}function ea(e,t){const v=Gt.length,w=e+621;let i=-14,s=Gt[0],a,o,r,m,C;if(e<s||e>=Gt[v-1])throw new Error("Invalid Jalaali year "+e);for(C=1;C<v&&(a=Gt[C],o=a-s,!(e<a));C+=1)i=i+ot(o,33)*8+ot(Tt(o,33),4),s=a;m=e-s,i=i+ot(m,33)*8+ot(Tt(m,33)+3,4),Tt(o,33)===4&&o-m===4&&(i+=1);const h=ot(w,4)-ot((ot(w,100)+1)*3,4)-150,M=20+i-h;return t||(o-m<6&&(m=m-o+ot(o+4,33)*33),r=Tt(Tt(m+1,33)-1,4),r===-1&&(r=4)),{leap:r,gy:w,march:M}}function Dl(e,t,v){const w=ea(e,!0);return Po(w.gy,3,w.march)+(t-1)*31-ot(t,7)*(t-7)+v-1}function Il(e){const t=ta(e).gy;let v=t-621,w,i,s;const a=ea(v,!1),o=Po(t,3,a.march);if(s=e-o,s>=0){if(s<=185)return i=1+ot(s,31),w=Tt(s,31)+1,{jy:v,jm:i,jd:w};s-=186}else v-=1,s+=179,a.leap===1&&(s+=1);return i=7+ot(s,30),w=Tt(s,30)+1,{jy:v,jm:i,jd:w}}function Po(e,t,v){let w=ot((e+ot(t-8,6)+100100)*1461,4)+ot(153*Tt(t+9,12)+2,5)+v-34840408;return w=w-ot(ot(e+100100+ot(t-8,6),100)*3,4)+752,w}function ta(e){let t=4*e+139361631;t=t+ot(ot(4*e+183187720,146097)*3,4)*4-3908;const v=ot(Tt(t,1461),4)*5+308,w=ot(Tt(v,153),5)+1,i=Tt(ot(v,153),12)+1;return{gy:ot(t,1461)-100100+ot(8-i,6),gm:i,gd:w}}function ot(e,t){return~~(e/t)}function Tt(e,t){return e-~~(e/t)*t}const Pl=["gregorian","persian"],Lo={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Pl.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Nl=["update:modelValue"];function Ut(e){return e.year+"/"+et(e.month)+"/"+et(e.day)}function Ml(e,t){const v=K(()=>e.disable!==!0&&e.readonly!==!0),w=K(()=>v.value===!0?0:-1),i=K(()=>{const o=[];return e.color!==void 0&&o.push(`bg-${e.color}`),e.textColor!==void 0&&o.push(`text-${e.textColor}`),o.join(" ")});function s(){return e.locale!==void 0?{...t.lang.date,...e.locale}:t.lang.date}function a(o){const r=new Date,m=o===!0?null:0;if(e.calendar==="persian"){const C=Tl(r);return{year:C.jy,month:C.jm,day:C.jd}}return{year:r.getFullYear(),month:r.getMonth()+1,day:r.getDate(),hour:m,minute:m,second:m,millisecond:m}}return{editable:v,tabindex:w,headerClass:i,getLocale:s,getCurrentDate:a}}const oa=864e5,$l=36e5,wo=6e4,aa="YYYY-MM-DDTHH:mm:ss.SSSZ",Ol=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Al=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,uo={};function Rl(e,t){const v="("+t.days.join("|")+")",w=e+v;if(uo[w]!==void 0)return uo[w];const i="("+t.daysShort.join("|")+")",s="("+t.months.join("|")+")",a="("+t.monthsShort.join("|")+")",o={};let r=0;const m=e.replace(Al,h=>{switch(r++,h){case"YY":return o.YY=r,"(-?\\d{1,2})";case"YYYY":return o.YYYY=r,"(-?\\d{1,4})";case"M":return o.M=r,"(\\d{1,2})";case"Mo":return o.M=r++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return o.M=r,"(\\d{2})";case"MMM":return o.MMM=r,a;case"MMMM":return o.MMMM=r,s;case"D":return o.D=r,"(\\d{1,2})";case"Do":return o.D=r++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return o.D=r,"(\\d{2})";case"H":return o.H=r,"(\\d{1,2})";case"HH":return o.H=r,"(\\d{2})";case"h":return o.h=r,"(\\d{1,2})";case"hh":return o.h=r,"(\\d{2})";case"m":return o.m=r,"(\\d{1,2})";case"mm":return o.m=r,"(\\d{2})";case"s":return o.s=r,"(\\d{1,2})";case"ss":return o.s=r,"(\\d{2})";case"S":return o.S=r,"(\\d{1})";case"SS":return o.S=r,"(\\d{2})";case"SSS":return o.S=r,"(\\d{3})";case"A":return o.A=r,"(AM|PM)";case"a":return o.a=r,"(am|pm)";case"aa":return o.aa=r,"(a\\.m\\.|p\\.m\\.)";case"ddd":return i;case"dddd":return v;case"Q":case"d":case"E":return"(\\d{1})";case"do":return r++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return r++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return r++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return o.Z=r,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return o.ZZ=r,"(Z|[+-]\\d{2}\\d{2})";case"X":return o.X=r,"(-?\\d+)";case"x":return o.x=r,"(-?\\d{4,})";default:return r--,h[0]==="["&&(h=h.substring(1,h.length-1)),h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),C={map:o,regex:new RegExp("^"+m)};return uo[w]=C,C}function la(e,t){return e!==void 0?e:t!==void 0?t.date:pa.date}function qo(e,t=""){const v=e>0?"-":"+",w=Math.abs(e),i=Math.floor(w/60),s=w%60;return v+et(i)+t+et(s)}function Ll(e,t,v){let w=e.getFullYear(),i=e.getMonth();const s=e.getDate();return t.year!==void 0&&(w+=v*t.year,delete t.year),t.month!==void 0&&(i+=v*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(w),e.setMonth(i),e.setDate(Math.min(s,jl(e))),t.date!==void 0&&(e.setDate(e.getDate()+v*t.date),delete t.date),e}function ql(e,t,v){const w=El(t),i=new Date(e),s=w.year!==void 0||w.month!==void 0||w.date!==void 0?Ll(i,w,v):i;for(const a in w){const o=Aa(a);s[`set${o}`](s[`get${o}`]()+v*w[a])}return s}function El(e){const t={...e};return e.years!==void 0&&(t.year=e.years,delete t.years),e.months!==void 0&&(t.month=e.months,delete t.months),e.days!==void 0&&(t.date=e.days,delete t.days),e.day!==void 0&&(t.date=e.day,delete t.day),e.hour!==void 0&&(t.hours=e.hour,delete t.hour),e.minute!==void 0&&(t.minutes=e.minute,delete t.minute),e.second!==void 0&&(t.seconds=e.second,delete t.second),e.millisecond!==void 0&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function Bl(e,t,v,w,i){const s={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(i!==void 0&&Object.assign(s,i),e==null||e===""||typeof e!="string")return s;t===void 0&&(t=aa);const a=la(v,Fo.props),o=a.months,r=a.monthsShort,{regex:m,map:C}=Rl(t,a),h=e.match(m);if(h===null)return s;let M="";if(C.X!==void 0||C.x!==void 0){const k=parseInt(h[C.X!==void 0?C.X:C.x],10);if(isNaN(k)===!0||k<0)return s;const $=new Date(k*(C.X!==void 0?1e3:1));s.year=$.getFullYear(),s.month=$.getMonth()+1,s.day=$.getDate(),s.hour=$.getHours(),s.minute=$.getMinutes(),s.second=$.getSeconds(),s.millisecond=$.getMilliseconds()}else{if(C.YYYY!==void 0)s.year=parseInt(h[C.YYYY],10);else if(C.YY!==void 0){const k=parseInt(h[C.YY],10);s.year=k<0?k:2e3+k}if(C.M!==void 0){if(s.month=parseInt(h[C.M],10),s.month<1||s.month>12)return s}else C.MMM!==void 0?s.month=r.indexOf(h[C.MMM])+1:C.MMMM!==void 0&&(s.month=o.indexOf(h[C.MMMM])+1);if(C.D!==void 0){if(s.day=parseInt(h[C.D],10),s.year===null||s.month===null||s.day<1)return s;const k=w!=="persian"?new Date(s.year,s.month,0).getDate():ao(s.year,s.month);if(s.day>k)return s}C.H!==void 0?s.hour=parseInt(h[C.H],10)%24:C.h!==void 0&&(s.hour=parseInt(h[C.h],10)%12,(C.A&&h[C.A]==="PM"||C.a&&h[C.a]==="pm"||C.aa&&h[C.aa]==="p.m.")&&(s.hour+=12),s.hour=s.hour%24),C.m!==void 0&&(s.minute=parseInt(h[C.m],10)%60),C.s!==void 0&&(s.second=parseInt(h[C.s],10)%60),C.S!==void 0&&(s.millisecond=parseInt(h[C.S],10)*10**(3-h[C.S].length)),(C.Z!==void 0||C.ZZ!==void 0)&&(M=C.Z!==void 0?h[C.Z].replace(":",""):h[C.ZZ],s.timezoneOffset=(M[0]==="+"?-1:1)*(60*M.slice(1,3)+1*M.slice(3,5)))}return s.dateHash=et(s.year,4)+"/"+et(s.month)+"/"+et(s.day),s.timeHash=et(s.hour)+":"+et(s.minute)+":"+et(s.second)+M,s}function mo(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const v=new Date(t.getFullYear(),0,4);v.setDate(v.getDate()-(v.getDay()+6)%7+3);const w=t.getTimezoneOffset()-v.getTimezoneOffset();t.setHours(t.getHours()-w);const i=(t-v)/(oa*7);return 1+Math.floor(i)}function Vl(e,t){return ql(e,t,1)}function Bt(e,t,v){const w=new Date(e),i=`set${v===!0?"UTC":""}`;switch(t){case"year":case"years":w[`${i}Month`](0);case"month":case"months":w[`${i}Date`](1);case"day":case"days":case"date":w[`${i}Hours`](0);case"hour":case"hours":w[`${i}Minutes`](0);case"minute":case"minutes":w[`${i}Seconds`](0);case"second":case"seconds":w[`${i}Milliseconds`](0)}return w}function oo(e,t,v){return(e.getTime()-e.getTimezoneOffset()*wo-(t.getTime()-t.getTimezoneOffset()*wo))/v}function na(e,t,v="days"){const w=new Date(e),i=new Date(t);switch(v){case"years":case"year":return w.getFullYear()-i.getFullYear();case"months":case"month":return(w.getFullYear()-i.getFullYear())*12+w.getMonth()-i.getMonth();case"days":case"day":case"date":return oo(Bt(w,"day"),Bt(i,"day"),oa);case"hours":case"hour":return oo(Bt(w,"hour"),Bt(i,"hour"),$l);case"minutes":case"minute":return oo(Bt(w,"minute"),Bt(i,"minute"),wo);case"seconds":case"second":return oo(Bt(w,"second"),Bt(i,"second"),1e3)}}function co(e){return na(e,Bt(e,"year"),"days")+1}function jl(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function Kt(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Eo={YY(e,t,v){const w=this.YYYY(e,t,v)%100;return w>=0?et(w):"-"+et(Math.abs(w))},YYYY(e,t,v){return v??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return Kt(e.getMonth()+1)},MM(e){return et(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return Kt(this.Q(e))},D(e){return e.getDate()},Do(e){return Kt(e.getDate())},DD(e){return et(e.getDate())},DDD(e){return co(e)},DDDo(e){return Kt(co(e))},DDDD(e){return et(co(e),3)},d(e){return e.getDay()},do(e){return Kt(e.getDay())},dd(e,t){return t.days[e.getDay()].slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return mo(e)},wo(e){return Kt(mo(e))},ww(e){return et(mo(e))},H(e){return e.getHours()},HH(e){return et(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return et(this.h(e))},m(e){return e.getMinutes()},mm(e){return et(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return et(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return et(Math.floor(e.getMilliseconds()/10))},SSS(e){return et(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,t,v,w){const i=w??e.getTimezoneOffset();return qo(i,":")},ZZ(e,t,v,w){const i=w??e.getTimezoneOffset();return qo(i)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Fl(e,t,v,w,i){if(e!==0&&!e||e===1/0||e===-1/0)return;const s=new Date(e);if(isNaN(s))return;t===void 0&&(t=aa);const a=la(v,Fo.props);return t.replace(Ol,(o,r)=>o in Eo?Eo[o](s,a,w,i):r===void 0?o:r.split("\\]").join("]"))}const Ul={addToDate:Vl},Et=20,Ql=["Calendar","Years","Months"],Bo=e=>Ql.includes(e),po=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Jt=" â€” ";function Qt(e){return e.year+"/"+et(e.month)}const so=fa({name:"QDate",props:{...Lo,...Ra,...wa,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...Lo.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:po},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:po},navigationMaxYearMonth:{type:String,validator:po},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Bo}},emits:[...Nl,"rangeStart","rangeEnd","navigation"],setup(e,{slots:t,emit:v}){const{proxy:w}=va(),{$q:i}=w,s=ya(e,i),{getCache:a}=Ia(),{tabindex:o,headerClass:r,getLocale:m,getCurrentDate:C}=Ml(e,i);let h;const M=La(e),k=qa(M),$=f(null),q=f(rt()),c=f(m()),E=K(()=>rt()),I=K(()=>m()),O=K(()=>C()),H=f(jt(q.value,c.value)),_=f(e.defaultView),Ve=K(()=>i.lang.rtl===!0?"right":"left"),me=f(Ve.value),Se=f(Ve.value),Ae=H.value.year,De=f(Ae-Ae%Et-(Ae<0?Et:0)),ke=f(null),qe=K(()=>{const p=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${p} q-date--${p}-${e.minimal===!0?"minimal":"standard"}`+(s.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),oe=K(()=>e.color||"primary"),pe=K(()=>e.textColor||"white"),ve=K(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),P=K(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),x=K(()=>P.value.filter(p=>typeof p=="string").map(p=>st(p,q.value,c.value)).filter(p=>p.dateHash!==null&&p.day!==null&&p.month!==null&&p.year!==null)),L=K(()=>{const p=b=>st(b,q.value,c.value);return P.value.filter(b=>ga(b)===!0&&b.from!==void 0&&b.to!==void 0).map(b=>({from:p(b.from),to:p(b.to)})).filter(b=>b.from.dateHash!==null&&b.to.dateHash!==null&&b.from.dateHash<b.to.dateHash)}),G=K(()=>e.calendar!=="persian"?p=>new Date(p.year,p.month-1,p.day):p=>{const b=Ro(p.year,p.month,p.day);return new Date(b.gy,b.gm-1,b.gd)}),ae=K(()=>e.calendar==="persian"?Ut:(p,b,B)=>Fl(new Date(p.year,p.month-1,p.day,p.hour,p.minute,p.second,p.millisecond),b===void 0?q.value:b,B===void 0?c.value:B,p.year,p.timezoneOffset)),fe=K(()=>x.value.length+L.value.reduce((p,b)=>p+1+na(G.value(b.to),G.value(b.from)),0)),Y=K(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(ke.value!==null){const B=ke.value.init,ne=G.value(B);return c.value.daysShort[ne.getDay()]+", "+c.value.monthsShort[B.month-1]+" "+B.day+Jt+"?"}if(fe.value===0)return Jt;if(fe.value>1)return`${fe.value} ${c.value.pluralDay}`;const p=x.value[0],b=G.value(p);return isNaN(b.valueOf())===!0?Jt:c.value.headerTitle!==void 0?c.value.headerTitle(b,p):c.value.daysShort[b.getDay()]+", "+c.value.monthsShort[p.month-1]+" "+p.day}),Ie=K(()=>x.value.concat(L.value.map(b=>b.from)).sort((b,B)=>b.year-B.year||b.month-B.month)[0]),j=K(()=>x.value.concat(L.value.map(b=>b.to)).sort((b,B)=>B.year-b.year||B.month-b.month)[0]),ie=K(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(fe.value===0)return Jt;if(fe.value>1){const p=Ie.value,b=j.value,B=c.value.monthsShort;return B[p.month-1]+(p.year!==b.year?" "+p.year+Jt+B[b.month-1]+" ":p.month!==b.month?Jt+B[b.month-1]:"")+" "+b.year}return x.value[0].year}),re=K(()=>{const p=[i.iconSet.datetime.arrowLeft,i.iconSet.datetime.arrowRight];return i.lang.rtl===!0?p.reverse():p}),Ee=K(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):c.value.firstDayOfWeek),Xe=K(()=>{const p=c.value.daysShort,b=Ee.value;return b>0?p.slice(b,7).concat(p.slice(0,b)):p}),je=K(()=>{const p=H.value;return e.calendar!=="persian"?new Date(p.year,p.month,0).getDate():ao(p.year,p.month)}),pt=K(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),Fe=K(()=>{if(e.navigationMinYearMonth===void 0)return null;const p=e.navigationMinYearMonth.split("/");return{year:parseInt(p[0],10),month:parseInt(p[1],10)}}),We=K(()=>{if(e.navigationMaxYearMonth===void 0)return null;const p=e.navigationMaxYearMonth.split("/");return{year:parseInt(p[0],10),month:parseInt(p[1],10)}}),St=K(()=>{const p={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return Fe.value!==null&&Fe.value.year>=H.value.year&&(p.year.prev=!1,Fe.value.year===H.value.year&&Fe.value.month>=H.value.month&&(p.month.prev=!1)),We.value!==null&&We.value.year<=H.value.year&&(p.year.next=!1,We.value.year===H.value.year&&We.value.month<=H.value.month&&(p.month.next=!1)),p}),D=K(()=>{const p={};return x.value.forEach(b=>{const B=Qt(b);p[B]===void 0&&(p[B]=[]),p[B].push(b.day)}),p}),de=K(()=>{const p={};return L.value.forEach(b=>{const B=Qt(b.from),ne=Qt(b.to);if(p[B]===void 0&&(p[B]=[]),p[B].push({from:b.from.day,to:B===ne?b.to.day:void 0,range:b}),B<ne){let ue;const{year:Pe,month:te}=b.from,Te=te<12?{year:Pe,month:te+1}:{year:Pe+1,month:1};for(;(ue=Qt(Te))<=ne;)p[ue]===void 0&&(p[ue]=[]),p[ue].push({from:void 0,to:ue===ne?b.to.day:void 0,range:b}),Te.month++,Te.month>12&&(Te.year++,Te.month=1)}}),p}),Ce=K(()=>{if(ke.value===null)return;const{init:p,initHash:b,final:B,finalHash:ne}=ke.value,[ue,Pe]=b<=ne?[p,B]:[B,p],te=Qt(ue),Te=Qt(Pe);if(te!==tt.value&&Te!==tt.value)return;const _e={};return te===tt.value?(_e.from=ue.day,_e.includeFrom=!0):_e.from=1,Te===tt.value?(_e.to=Pe.day,_e.includeTo=!0):_e.to=je.value,_e}),tt=K(()=>Qt(H.value)),at=K(()=>{const p={};if(e.options===void 0){for(let B=1;B<=je.value;B++)p[B]=!0;return p}const b=typeof e.options=="function"?e.options:B=>e.options.includes(B);for(let B=1;B<=je.value;B++){const ne=tt.value+"/"+et(B);p[B]=b(ne)}return p}),He=K(()=>{const p={};if(e.events===void 0)for(let b=1;b<=je.value;b++)p[b]=!1;else{const b=typeof e.events=="function"?e.events:B=>e.events.includes(B);for(let B=1;B<=je.value;B++){const ne=tt.value+"/"+et(B);p[B]=b(ne)===!0&&pt.value(ne)}}return p}),bt=K(()=>{let p,b;const{year:B,month:ne}=H.value;if(e.calendar!=="persian")p=new Date(B,ne-1,1),b=new Date(B,ne-1,0).getDate();else{const ue=Ro(B,ne,1);p=new Date(ue.gy,ue.gm-1,ue.gd);let Pe=ne-1,te=B;Pe===0&&(Pe=12,te--),b=ao(te,Pe)}return{days:p.getDay()-Ee.value-1,endDay:b}}),Ct=K(()=>{const p=[],{days:b,endDay:B}=bt.value,ne=b<0?b+7:b;if(ne<6)for(let te=B-ne;te<=B;te++)p.push({i:te,fill:!0});const ue=p.length;for(let te=1;te<=je.value;te++){const Te={i:te,event:He.value[te],classes:[]};at.value[te]===!0&&(Te.in=!0,Te.flat=!0),p.push(Te)}if(D.value[tt.value]!==void 0&&D.value[tt.value].forEach(te=>{const Te=ue+te-1;Object.assign(p[Te],{selected:!0,unelevated:!0,flat:!1,color:oe.value,textColor:pe.value})}),de.value[tt.value]!==void 0&&de.value[tt.value].forEach(te=>{if(te.from!==void 0){const Te=ue+te.from-1,_e=ue+(te.to||je.value)-1;for(let Ft=Te;Ft<=_e;Ft++)Object.assign(p[Ft],{range:te.range,unelevated:!0,color:oe.value,textColor:pe.value});Object.assign(p[Te],{rangeFrom:!0,flat:!1}),te.to!==void 0&&Object.assign(p[_e],{rangeTo:!0,flat:!1})}else if(te.to!==void 0){const Te=ue+te.to-1;for(let _e=ue;_e<=Te;_e++)Object.assign(p[_e],{range:te.range,unelevated:!0,color:oe.value,textColor:pe.value});Object.assign(p[Te],{flat:!1,rangeTo:!0})}else{const Te=ue+je.value-1;for(let _e=ue;_e<=Te;_e++)Object.assign(p[_e],{range:te.range,unelevated:!0,color:oe.value,textColor:pe.value})}}),Ce.value!==void 0){const te=ue+Ce.value.from-1,Te=ue+Ce.value.to-1;for(let _e=te;_e<=Te;_e++)p[_e].color=oe.value,p[_e].editRange=!0;Ce.value.includeFrom===!0&&(p[te].editRangeFrom=!0),Ce.value.includeTo===!0&&(p[Te].editRangeTo=!0)}H.value.year===O.value.year&&H.value.month===O.value.month&&(p[ue+O.value.day-1].today=!0);const Pe=p.length%7;if(Pe>0){const te=7-Pe;for(let Te=1;Te<=te;Te++)p.push({i:Te,fill:!0})}return p.forEach(te=>{let Te="q-date__calendar-item ";te.fill===!0?Te+="q-date__calendar-item--fill":(Te+=`q-date__calendar-item--${te.in===!0?"in":"out"}`,te.range!==void 0&&(Te+=` q-date__range${te.rangeTo===!0?"-to":te.rangeFrom===!0?"-from":""}`),te.editRange===!0&&(Te+=` q-date__edit-range${te.editRangeFrom===!0?"-from":""}${te.editRangeTo===!0?"-to":""}`),(te.range!==void 0||te.editRange===!0)&&(Te+=` text-${te.color}`)),te.classes=Te}),p}),wt=K(()=>e.disable===!0?{"aria-disabled":"true"}:{});ye(()=>e.modelValue,p=>{if(h===JSON.stringify(p))h=0;else{const b=jt(q.value,c.value);yt(b.year,b.month,b)}}),ye(_,()=>{$.value!==null&&w.$el.contains(document.activeElement)===!0&&$.value.focus()}),ye(()=>H.value.year+"|"+H.value.month,()=>{v("navigation",{year:H.value.year,month:H.value.month})}),ye(E,p=>{U(p,c.value,"mask"),q.value=p}),ye(I,p=>{U(q.value,p,"locale"),c.value=p});function Ye(p){h=JSON.stringify(p)}function vt(){const{year:p,month:b,day:B}=O.value,ne={...H.value,year:p,month:b,day:B},ue=D.value[Qt(ne)];(ue===void 0||ue.includes(ne.day)===!1)&&z(ne),ce(ne.year,ne.month)}function A(p){Bo(p)===!0&&(_.value=p)}function Q(p,b){["month","year"].includes(p)&&(p==="month"?It:le)(b===!0?-1:1)}function ce(p,b){_.value="Calendar",yt(p,b)}function ze(p,b){if(e.range===!1||!p){ke.value=null;return}const B=Object.assign({...H.value},p),ne=b!==void 0?Object.assign({...H.value},b):B;ke.value={init:B,initHash:Ut(B),final:ne,finalHash:Ut(ne)},ce(B.year,B.month)}function rt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function st(p,b,B){return Bl(p,b,B,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function jt(p,b){const B=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(B.length===0)return qt();const ne=B[B.length-1],ue=st(ne.from!==void 0?ne.from:ne,p,b);return ue.dateHash===null?qt():ue}function qt(){let p,b;if(e.defaultYearMonth!==void 0){const B=e.defaultYearMonth.split("/");p=parseInt(B[0],10),b=parseInt(B[1],10)}else{const B=O.value!==void 0?O.value:C();p=B.year,b=B.month}return{year:p,month:b,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:p+"/"+et(b)+"/01"}}function It(p){let b=H.value.year,B=Number(H.value.month)+p;B===13?(B=1,b++):B===0&&(B=12,b--),yt(b,B),ve.value===!0&&Rt("month")}function le(p){const b=Number(H.value.year)+p;yt(b,H.value.month),ve.value===!0&&Rt("year")}function Re(p){yt(p,H.value.month),_.value=e.defaultView==="Years"?"Months":"Calendar",ve.value===!0&&Rt("year")}function Be(p){yt(H.value.year,p),_.value="Calendar",ve.value===!0&&Rt("month")}function Ue(p,b){(D.value[b]?.includes(p.day)===!0?d:z)(p)}function it(p){return{year:p.year,month:p.month,day:p.day}}function yt(p,b,B){if(Fe.value!==null&&p<=Fe.value.year&&((b<Fe.value.month||p<Fe.value.year)&&(b=Fe.value.month),p=Fe.value.year),We.value!==null&&p>=We.value.year&&((b>We.value.month||p>We.value.year)&&(b=We.value.month),p=We.value.year),B!==void 0){const{hour:ue,minute:Pe,second:te,millisecond:Te,timezoneOffset:_e,timeHash:Ft}=B;Object.assign(H.value,{hour:ue,minute:Pe,second:te,millisecond:Te,timezoneOffset:_e,timeHash:Ft})}const ne=p+"/"+et(b)+"/01";ne!==H.value.dateHash&&(me.value=H.value.dateHash<ne==(i.lang.rtl!==!0)?"left":"right",p!==H.value.year&&(Se.value=me.value),Vt(()=>{De.value=p-p%Et-(p<0?Et:0),Object.assign(H.value,{year:p,month:b,day:1,dateHash:ne})}))}function Pt(p,b,B){const ne=p!==null&&p.length===1&&e.multiple===!1?p[0]:p,{reason:ue,details:Pe}=Yt(b,B);Ye(ne),v("update:modelValue",ne,ue,Pe)}function Rt(p){const b=x.value[0]!==void 0&&x.value[0].dateHash!==null?{...x.value[0]}:{...H.value};Vt(()=>{b.year=H.value.year,b.month=H.value.month;const B=e.calendar!=="persian"?new Date(b.year,b.month,0).getDate():ao(b.year,b.month);b.day=Math.min(Math.max(1,b.day),B);const ne=N(b),{details:ue}=Yt("",b);Ye(ne),v("update:modelValue",ne,p,ue)})}function Yt(p,b){return b.from!==void 0?{reason:`${p}-range`,details:{...it(b.target),from:it(b.from),to:it(b.to)}}:{reason:`${p}-day`,details:it(b)}}function N(p,b,B){return p.from!==void 0?{from:ae.value(p.from,b,B),to:ae.value(p.to,b,B)}:ae.value(p,b,B)}function z(p){let b;if(e.multiple===!0)if(p.from!==void 0){const B=Ut(p.from),ne=Ut(p.to),ue=x.value.filter(te=>te.dateHash<B||te.dateHash>ne),Pe=L.value.filter(({from:te,to:Te})=>Te.dateHash<B||te.dateHash>ne);b=ue.concat(Pe).concat(p).map(te=>N(te))}else{const B=P.value.slice();B.push(N(p)),b=B}else b=N(p);Pt(b,"add",p)}function d(p){if(e.noUnset===!0)return;let b=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const B=N(p);p.from!==void 0?b=e.modelValue.filter(ne=>ne.from!==void 0?ne.from!==B.from&&ne.to!==B.to:!0):b=e.modelValue.filter(ne=>ne!==B),b.length===0&&(b=null)}Pt(b,"remove",p)}function U(p,b,B){const ne=x.value.concat(L.value).map(Pe=>N(Pe,p,b)).filter(Pe=>Pe.from!==void 0?Pe.from.dateHash!==null&&Pe.to.dateHash!==null:Pe.dateHash!==null),ue=(e.multiple===!0?ne:ne[0])||null;Ye(ue),v("update:modelValue",ue,B)}function S(){if(e.minimal!==!0)return be("div",{class:"q-date__header "+r.value},[be("div",{class:"relative-position"},[be(_t,{name:"q-transition--fade"},()=>be("div",{key:"h-yr-"+ie.value,class:"q-date__header-subtitle q-date__header-link "+(_.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:o.value,...a("vY",{onClick(){_.value="Years"},onKeyup(p){p.keyCode===13&&(_.value="Years")}})},[ie.value]))]),be("div",{class:"q-date__header-title relative-position flex no-wrap"},[be("div",{class:"relative-position col"},[be(_t,{name:"q-transition--fade"},()=>be("div",{key:"h-sub"+Y.value,class:"q-date__header-title-label q-date__header-link "+(_.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:o.value,...a("vC",{onClick(){_.value="Calendar"},onKeyup(p){p.keyCode===13&&(_.value="Calendar")}})},[Y.value]))]),e.todayBtn===!0?be(W,{class:"q-date__header-today self-start",icon:i.iconSet.datetime.today,"aria-label":i.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:o.value,onClick:vt}):null])])}function X({label:p,type:b,key:B,dir:ne,goTo:ue,boundaries:Pe,cls:te}){return[be("div",{class:"row items-center q-date__arrow"},[be(W,{round:!0,dense:!0,size:"sm",flat:!0,icon:re.value[0],"aria-label":b==="Years"?i.lang.date.prevYear:i.lang.date.prevMonth,tabindex:o.value,disable:Pe.prev===!1,...a("go-#"+b,{onClick(){ue(-1)}})})]),be("div",{class:"relative-position overflow-hidden flex flex-center"+te},[be(_t,{name:"q-transition--jump-"+ne},()=>be("div",{key:B},[be(W,{flat:!0,dense:!0,noCaps:!0,label:p,tabindex:o.value,...a("view#"+b,{onClick:()=>{_.value=b}})})]))]),be("div",{class:"row items-center q-date__arrow"},[be(W,{round:!0,dense:!0,size:"sm",flat:!0,icon:re.value[1],"aria-label":b==="Years"?i.lang.date.nextYear:i.lang.date.nextMonth,tabindex:o.value,disable:Pe.next===!1,...a("go+#"+b,{onClick(){ue(1)}})})])]}const se={Calendar:()=>[be("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[be("div",{class:"q-date__navigation row items-center no-wrap"},X({label:c.value.months[H.value.month-1],type:"Months",key:H.value.month,dir:me.value,goTo:It,boundaries:St.value.month,cls:" col"}).concat(X({label:H.value.year,type:"Years",key:H.value.year,dir:Se.value,goTo:le,boundaries:St.value.year,cls:""}))),be("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Xe.value.map(p=>be("div",{class:"q-date__calendar-item"},[be("div",p)]))),be("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[be(_t,{name:"q-transition--slide-"+me.value},()=>be("div",{key:tt.value,class:"q-date__calendar-days fit"},Ct.value.map(p=>be("div",{class:p.classes},[p.in===!0?be(W,{class:p.today===!0?"q-date__today":"",dense:!0,flat:p.flat,unelevated:p.unelevated,color:p.color,textColor:p.textColor,label:p.i,tabindex:o.value,...a("day#"+p.i,{onClick:()=>{ee(p.i)},onMouseover:()=>{Z(p.i)}})},p.event!==!1?()=>be("div",{class:"q-date__event bg-"+p.event}):null):be("div",""+p.i)]))))])])],Months(){const p=H.value.year===O.value.year,b=ne=>Fe.value!==null&&H.value.year===Fe.value.year&&Fe.value.month>ne||We.value!==null&&H.value.year===We.value.year&&We.value.month<ne,B=c.value.monthsShort.map((ne,ue)=>{const Pe=H.value.month===ue+1;return be("div",{class:"q-date__months-item flex flex-center"},[be(W,{class:p===!0&&O.value.month===ue+1?"q-date__today":null,flat:Pe!==!0,label:ne,unelevated:Pe,color:Pe===!0?oe.value:null,textColor:Pe===!0?pe.value:null,tabindex:o.value,disable:b(ue+1),...a("month#"+ue,{onClick:()=>{Be(ue+1)}})})])});return e.yearsInMonthView===!0&&B.unshift(be("div",{class:"row no-wrap full-width"},[X({label:H.value.year,type:"Years",key:H.value.year,dir:Se.value,goTo:le,boundaries:St.value.year,cls:" col"})])),be("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},B)},Years(){const p=De.value,b=p+Et,B=[],ne=ue=>Fe.value!==null&&Fe.value.year>ue||We.value!==null&&We.value.year<ue;for(let ue=p;ue<=b;ue++){const Pe=H.value.year===ue;B.push(be("div",{class:"q-date__years-item flex flex-center"},[be(W,{key:"yr"+ue,class:O.value.year===ue?"q-date__today":null,flat:!Pe,label:ue,dense:!0,unelevated:Pe,color:Pe===!0?oe.value:null,textColor:Pe===!0?pe.value:null,tabindex:o.value,disable:ne(ue),...a("yr#"+ue,{onClick:()=>{Re(ue)}})})]))}return be("div",{class:"q-date__view q-date__years flex flex-center"},[be("div",{class:"col-auto"},[be(W,{round:!0,dense:!0,flat:!0,icon:re.value[0],"aria-label":i.lang.date.prevRangeYears(Et),tabindex:o.value,disable:ne(p),...a("y-",{onClick:()=>{De.value-=Et}})})]),be("div",{class:"q-date__years-content col self-stretch row items-center"},B),be("div",{class:"col-auto"},[be(W,{round:!0,dense:!0,flat:!0,icon:re.value[1],"aria-label":i.lang.date.nextRangeYears(Et),tabindex:o.value,disable:ne(b),...a("y+",{onClick:()=>{De.value+=Et}})})])])}};function ee(p){const b={...H.value,day:p};if(e.range===!1){Ue(b,tt.value);return}if(ke.value===null){const B=Ct.value.find(ue=>ue.fill!==!0&&ue.i===p);if(e.noUnset!==!0&&B.range!==void 0){d({target:b,from:B.range.from,to:B.range.to});return}if(B.selected===!0){d(b);return}const ne=Ut(b);ke.value={init:b,initHash:ne,final:b,finalHash:ne},v("rangeStart",it(b))}else{const B=ke.value.initHash,ne=Ut(b),ue=B<=ne?{from:ke.value.init,to:b}:{from:b,to:ke.value.init};ke.value=null,z(B===ne?b:{target:b,...ue}),v("rangeEnd",{from:it(ue.from),to:it(ue.to)})}}function Z(p){if(ke.value!==null){const b={...H.value,day:p};Object.assign(ke.value,{final:b,finalHash:Ut(b)})}}return Object.assign(w,{setToday:vt,setView:A,offsetCalendar:Q,setCalendarTo:ce,setEditingRange:ze}),()=>{const p=[be("div",{class:"q-date__content col relative-position"},[be(_t,{name:"q-transition--fade"},se[_.value])])],b=ha(t.default);return b!==void 0&&p.push(be("div",{class:"q-date__actions"},b)),e.name!==void 0&&e.disable!==!0&&k(p,"push"),be("div",{class:qe.value,...wt.value},[S(),be("div",{ref:$,class:"q-date__main col column",tabindex:-1},p)])}}}),Gl=Je`
mutation CreateAssumptionMutation($detail: String!) {
  CreateAssumptionMutation(detail: $detail) {
    _id
    detail
  }
}
`,Wl=Je`
  mutation CreateSowAssumptionMutation(
    $sow_id: Int!
    $assumption_id: String!
    $sow_detail: String
  ) {
    CreateSowAssumptionMutation(
      sow_id: $sow_id
      assumption_id: $assumption_id
      sow_detail: $sow_detail
    ) {
      _id
      sow_id
      Name
      sow_detail
      sow_order
      BaseAssumptionDetail
      assumption_id
      sow_guideline_id
    }
  }
`,Hl=Je`
  mutation UpdateSowAssumptionMutation(
    $_id: String!
    $Name: String
    $sow_detail: String
  ) {
    UpdateSowAssumptionMutation(
      _id: $_id
      Name: $Name
      sow_detail: $sow_detail
    ) {
      _id
      sow_id
      sow_guideline_id
      Name
      sow_detail
      sow_order
    }
  }
`,Yl=Je`
  mutation DeleteSowAssumptionMutation($_id: String!) {
    DeleteSowAssumptionMutation(_id: $_id) {
      _id
    }
  }
`,zl=Je`
mutation CreateExclusionMutation($detail: String!) {
  CreateExclusionMutation(detail: $detail) {
    _id
    detail
  }
}
`,Zl=Je`
  mutation CreateSowExclusionMutation(
    $sow_id: Int!
    $exclusion_id: String!
    $sow_detail: String
  ) {
    CreateSowExclusionMutation(
      sow_id: $sow_id
      exclusion_id: $exclusion_id
      sow_detail: $sow_detail
    ) {
      _id
      sow_id
      Name
      sow_detail
      sow_order
      BaseExclusionDetail
      exclusion_id
      sow_guideline_id
    }
  }
`,Kl=Je`
  mutation UpdateSowExclusionMutation($_id: String!, $Name: String) {
    UpdateSowExclusionMutation(_id: $_id, Name: $Name) {
      _id
      sow_id
      Name
      sow_detail
      BaseExclusionDetail
      sow_order
    }
  }
`,Jl=Je`
  mutation DeleteSowExclusionMutation($_id: String!) {
    DeleteSowExclusionMutation(_id: $_id) {
      _id
    }
  }
`,Xl=Je`
query Assumptions($detail: String, $showDeletedEntries: Boolean, $page: Int, $first: Int) {
  Assumptions(detail: $detail, showDeletedEntries: $showDeletedEntries, page: $page, first: $first) {
    data {
      _id
      detail
    }
  }
}
`,_l=Je`
query Exclusions($detail: String, $showDeletedEntries: Boolean, $page: Int, $first: Int) {
  Exclusions(detail: $detail, showDeletedEntries: $showDeletedEntries, page: $page, first: $first) {
    data {
      _id
      detail
    }
  }
}
`,xl=Ke({name:"CreateAssumptionModal",components:{SearchModel:Ht},props:{cardAddMode:{type:String,default:""},showComponentModal:{type:Boolean,default:!1},setComponentModal:{type:Function,default:()=>{}},pushNewResponseData:{type:Function,default:()=>{}}},setup(e){const t=ft(),v=K(()=>parseInt(t.params.id)),w=K(()=>ct().darkmode),i=$e({name:"",componentId:null,isAlrImp:!1,showModal:!1,whichOne:"false",resetName:!1,associatedImple:null,associatedImpleName:"",newRequirementName:"",newRequirementId:null,newDiscoveryQuestion:"",newResponseType:"Document Upload",isCreateNew:!1,componentName:"",componentDetail:"",newName:"",componentSearch:"",isMenuOpen:!1,page:1,showSpinner:!1}),s=f([]),a=f([]),o=K(()=>i.componentId?!1:!i.isCreateNew);let r;const m=(oe,pe)=>{clearTimeout(r),r=setTimeout(oe,pe)};ye(()=>i.componentSearch,()=>{m(async()=>{i.page=1,s.value=[],a.value=[]},500)}),nt(()=>{i.showModal=!0,q()});async function C(){try{const{mutate:oe}=Ne(Gl,()=>({variables:{detail:i.componentSearch}})),{result:pe}=await oe();let ve=pe.data.CreateAssumptionMutation._id;i.componentId=ve,setTimeout(()=>{h()},10)}catch(oe){console.log(oe)}}async function h(){try{const oe={sow_id:v.value,assumption_id:i.componentId.toString(),sow_detail:i.newDetail},{mutate:pe}=Ne(Wl),ve=await pe(oe);e.pushNewResponseData("assumption","create",ve.data.CreateSowAssumptionMutation)}catch(oe){console.error(oe)}}async function M(){try{const oe={detail:i.componentSearch},{mutate:pe}=Ne(zl);await pe(oe);let ve=pe.CreateExclusionMutation._id;i.componentId=ve,setTimeout(()=>{k()},10)}catch(oe){console.error(oe)}}async function k(){try{const oe={sow_id:v.value,exclusion_id:i.componentId.toString(),sow_detail:i.newDetail},{mutate:pe}=Ne(Zl),ve=await pe(oe);e.pushNewResponseData("exclusion","create",ve.data.CreateSowExclusionMutation)}catch(oe){console.error(oe)}}const $=Fa();async function q(){$.setSearch(""),$.setPage(1),e.cardAddMode==="Assumption"?await E():e.cardAddMode==="Exclusion"&&await I()}const c=f(!1),E=async()=>{const{result:oe,loading:pe}=Le(Xl,()=>({detail:$.search,page:$.page,showDeletedEntries:!1,first:15})),ve=f(null);ge(()=>{if(pe.value&&(c.value=!0),ve.value!==$.search&&(c.value=!0,s.value=[],ve.value=$.search),oe.value){c.value=!1;const P=s.value;oe.value&&oe.value.Assumptions&&($.page>1?s.value=[...s.value,...oe.value.Assumptions.data]:s.value=[...oe.value.Assumptions.data,...s.value]),$.setSpinner(s.value,P)}})};$.onSetValueCallback(Ae);const I=async()=>{const{result:oe,loading:pe}=Le(_l,()=>({detail:$.search,page:$.page,showDeletedEntries:!1,first:15})),ve=f(null);ge(()=>{if(pe.value&&(c.value=!0),ve.value!==$.search&&(c.value=!0,a.value=[],ve.value=$.search),oe.value){console.log(oe.value,"exclusionData"),c.value=!1;const P=a.value;oe.value&&oe.value.Exclusions&&($.page>1?a.value=[...a.value,...oe.value.Exclusions.data]:a.value=[...oe.value.Exclusions.data,...a.value]),$.setSpinner(a.value,P)}})},O=kt();function H(){O.notify({spinner:!0,message:e.cardAddMode+" Added",timeout:500,color:"indigo-9"})}function _(oe,pe){switch(oe){case"Assumption":i.newDetail=i.componentDetail,i.isCreateNew?C():h();break;case"Exclusion":i.newDetail=i.componentDetail,i.isCreateNew?M():k();break}setTimeout(()=>{pe!=="another"&&(i.showModal=!1,e.setComponentModal(!1))},1e3),pe==="another"?(H(),document.body.style.cursor="wait"):setTimeout(()=>{e.setComponentModal(!1),i.showModal=!1,H(),document.body.style.cursor="wait"},1e3),setTimeout(()=>{document.body.style.cursor="default"},1001)}function Ve(){i.isCreateNew=!0,i.isMenuOpen=!1}function me(){i.isMenuOpen=!0}const Se=K(()=>e.cardAddMode==="Assumption"?s.value:e.cardAddMode==="Exclusion"?a.value:null);function Ae(oe){i.componentId=oe._id,i.name=oe.detail,i.componentSearch=oe.detail,i.isMenuOpen=!1,i.isCreateNew=!1}const De=async(oe,pe)=>{oe===i.page&&(i.page++,setTimeout(()=>{pe()},500))};function ke(oe){i.componentSearch=oe}function qe(oe){i.page=oe}return{loadQuery:De,state:i,createSowComponent:_,setCreateNew:Ve,disableCreate:o,handleInputClick:me,computedComponent:Se,setComponentValue:Ae,fetchComponent:q,sow_id:v,setPage:qe,updateSearch:ke,isLoading:c,searchOptions:$,darkmode:w}}}),en={class:"text-xl mt-4"},tn={style:{width:"100%"}},on={class:"input-form intro-y mt-5 mb-[-1rem]"},an={style:{position:"absolute",right:"0px",bottom:"1rem"}};function ln(e,t,v,w,i,s){const a=we("SearchModel");return l(),R(Ot,{modelValue:e.state.showModal,"onUpdate:modelValue":t[3]||(t[3]=o=>e.state.showModal=o),onClickOutside:t[4]||(t[4]=o=>e.setComponentModal(!1))},{default:T(()=>[u(ht,{class:F(["container intro-y box",e.darkmode?"bg-[#28334E]":""]),style:{"overflow-y":"hidden"},dark:e.darkmode},{default:T(()=>[u(gt,{class:"col flex flex-col mb-0 pb-0",style:{"overflow-y":"hidden"}},{default:T(()=>[n("p",en,V(e.state.isCreateNew?"Create a New ":"Attach a ")+V(e.cardAddMode),1),t[5]||(t[5]=n("hr",{style:{width:"100%"}},null,-1))]),_:1}),u(gt,{class:"items-center"},{default:T(()=>[n("div",null,[n("div",tn,[n("div",null,[u(a,{label:e.cardAddMode,rows:e.computedComponent,value:"detail",popupWidth:"30rem",class:"component-search text-md",setPage:e.setPage,filled:"","no-focus":"",loading:e.isLoading,store:e.searchOptions},null,8,["label","rows","setPage","loading","store"])]),n("div",on,[u(lt,{id:"validation-form-6",modelValue:e.state.componentDetail,"onUpdate:modelValue":t[0]||(t[0]=o=>e.state.componentDetail=o),modelModifiers:{trim:!0},filled:"",label:"Details of "+e.cardAddMode,class:"form-control detail-input",name:"details",borderless:"",type:"textarea",dark:e.darkmode},null,8,["modelValue","label","dark"])])]),t[6]||(t[6]=n("div",{class:"mt-20"},null,-1)),n("div",an,[u(W,{dense:"",class:"save-btn mr-8 font-regular","no-caps":"",flat:"",label:e.state.componentId||e.state.isCreateNew?"Add Another":"Cancel",color:"grey-8",onClick:t[1]||(t[1]=o=>e.state.componentId||e.state.isCreateNew?e.createSowComponent(e.cardAddMode,"another"):e.state.showModal=!1)},null,8,["label"]),u(W,{dense:"",disable:e.disableCreate,class:"save-btn q-px-md",style:{"margin-right":"1.5rem","margin-left":"0rem"},"no-caps":"",label:e.state.isCreateNew?"Create & Close":"Save & Close",color:"primary",onClick:t[2]||(t[2]=o=>e.createSowComponent(e.cardAddMode,"close"))},null,8,["disable","label"])])])]),_:1})]),_:1},8,["class","dark"])]),_:1},8,["modelValue"])}const sa=Ze(xl,[["render",ln],["__scopeId","data-v-ac211c16"]]),nn=Je`
  query SowExclusions($sow_id: Int!) {
    SowExclusions(sow_id: $sow_id) {
      data {
        _id
        sow_id
        sow_guideline_id
        Name
        sow_detail
        sow_order
        BaseExclusionDetail
        exclusion_id
      }
    }
  }
`,sn=Ke({components:{CreateAssumptionModal:sa},props:{readonly:{type:Boolean,default:!1}},setup(){const e=ft(),t=K(()=>parseInt(e.params.id)),v=f([]),w=$e({isEditing:!1,cardAddMode:!1,showComponentModal:!1,showCompleted:!1}),i=[{name:"name",required:!0,label:"Exclusions",align:"left",field:c=>c.Name,format:c=>`${c}`,sortable:!0}];async function s(c){try{console.log(c,"deleteExclusion _id");const E={_id:c},{mutate:I}=Ne(Jl),O=await I(E);$("exclusion","delete",O.data.DeleteSowExclusionMutation)}catch(E){console.error(E)}}async function a(c){console.log(c,"updateExclusion variables");try{const{mutate:E}=Ne(Kl),I=await E(c);$("exclusion","update",I.data.UpdateSowExclusionMutation)}catch(E){console.error(E)}}function o(){}function r(c){w.showComponentModal===c?(w.showComponentModal=!1,setTimeout(()=>{w.showComponentModal=c},100)):w.showComponentModal=c}function m(c){setTimeout(()=>{w.showDelete=!1,w.editName=!1,w.editDetails=!1,c.editingValue=""},500)}function C(c,E){c.editingValue="Name",M(E)}const h=f([]),M=c=>{Vt(()=>{h[c].focus()})},k=c=>E=>{h[c]=E};nt(async()=>{const{result:c}=Le(nn,()=>({sow_id:t.value}));ge(()=>{if(c.value){const E=c.value.SowExclusions.data.map(I=>({...I,editingValue:"",showDetail:!1,Name:I.Name===null?I.BaseExclusionDetail:I.Name}));v.value=E}})});function $(c,E,I){switch(c){case"exclusion":E==="create"?v.value.push({...I,editingValue:"",showDetail:!1,Name:I.Name===null?I.BaseExclusionDetail:I.Name}):E==="delete"&&v.value.splice(v.value.findIndex(O=>O._id===I._id),1);break}}function q(c){c.operation!=="delete"?a(c.row):s(c.row._id)}return{inputRef:k,state:w,columns:i,handleRowClick:o,setComponentModal:r,updateComponent:q,setEditMode:C,handleFocusOut:m,sowExclusions:v,pushNewResponseData:$}}}),rn={key:0,class:"mt-5 responsive-table-container"};function dn(e,t,v,w,i,s){const a=we("CreateAssumptionModal");return e.sowExclusions?(l(),g("div",rn,[e.state.showComponentModal?(l(),R(a,{key:0,cardAddMode:"Exclusion",showComponentModal:e.state.showComponentModal,setComponentModal:e.setComponentModal,pushNewResponseData:e.pushNewResponseData},null,8,["showComponentModal","setComponentModal","pushNewResponseData"])):y("",!0)])):y("",!0)}const un=Ze(sn,[["render",dn]]),mn=Je`
query SowAssumptions($sow_id: Int!) {
  SowAssumptions(sow_id: $sow_id) {
    data {
      _id
      sow_id
      sow_guideline_id
      Name
      sow_detail
      sow_order
      BaseAssumptionDetail
    }
  }
}
`,cn=Ke({components:{CreateAssumptionModal:sa},props:{readonly:{type:Boolean,default:!1}},setup(){const e=ft(),t=K(()=>parseInt(e.params.id)),v=f([]),w=$e({isEditing:!0,cardAddMode:!1,showComponentModal:!1}),i=[{name:"name",required:!0,label:"Product Assumptions",align:"left",field:c=>c.Name,format:c=>`${c}`,sortable:!0}];function s({row:c,operation:E}){E!=="delete"?o({row:c}):a(c._id)}async function a(c){try{const E={_id:c},{mutate:I}=Ne(Yl),O=await I(E);q("assumption","delete",O.data.DeleteSowAssumptionMutation)}catch(E){console.error(E)}}async function o({row:c}){let E={_id:c._id,Name:c.Name};try{const{mutate:I}=Ne(Hl),O=await I(E);q("assumption","update",O.data.UpdateSowAssumptionMutation)}catch(I){console.error(I)}}function r(){}function m(c){w.showComponentModal===c?(w.showComponentModal=!1,setTimeout(()=>{w.showComponentModal=c},100)):w.showComponentModal=c}function C(c){setTimeout(()=>{w.showDelete=!1,w.editName=!1,w.editDetails=!1,c.editingValue=""},500)}function h(c,E){c.editingValue="Name",k(E)}const M=f([]),k=c=>{Vt(()=>{M[c].focus()})},$=c=>E=>{M[c]=E};nt(async()=>{const{result:c}=Le(mn,()=>({sow_id:t.value}));ge(()=>{if(c.value){const E=c.value.SowAssumptions.data.map(I=>({...I,editingValue:"",showDetail:!1,Name:I.Name===null?I.BaseAssumptionDetail:I.Name}));v.value=E}})});function q(c,E,I){switch(c){case"assumption":E==="create"?v.value.push({...I,editingValue:"",showDetail:!1,Name:I.Name===null?I.BaseAssumptionDetail:I.Name}):E==="delete"&&v.value.splice(v.value.findIndex(O=>O._id===I._id),1);break}}return{inputRef:$,focusInputField:k,state:w,columns:i,handleRowClick:r,setComponentModal:m,deleteAssumption:a,updateAssumption:o,inputRefs:M,handleFocusOut:C,setEditMode:h,pushNewResponseData:q,sowAssumptions:v,updateComponent:s}}}),pn={key:0,class:"mt-5 responsive-table-container"};function fn(e,t,v,w,i,s){const a=we("CreateAssumptionModal");return e.sowAssumptions?(l(),g("div",pn,[e.state.showComponentModal?(l(),R(a,{key:0,cardAddMode:"Assumption",showComponentModal:e.state.showComponentModal,setComponentModal:e.setComponentModal,pushNewResponseData:e.pushNewResponseData},null,8,["showComponentModal","setComponentModal","pushNewResponseData"])):y("",!0)])):y("",!0)}const wn=Ze(cn,[["render",fn]]),vn=Ke({components:{AccordianQTable:za,AccordianQTableDeep:So},props:{customerTasks:{type:Object,default:()=>({})}},setup(){const e=Zo(Ko);function t(L){e.setSowID(L)}const v=$e({showModal:!1,isLoading:!0});setTimeout(()=>{v.isLoading=!1},2e3);function w(){v.showModal=!1}const i=ft(),s=f(i.params.id),a=$e([{name:"name",align:"left",label:"Name",field:L=>L.RequirementName,format:L=>`${L}`},{name:"requirementStatus",align:"right",label:"Status",field:L=>L.text_Response,format:L=>`${L}`},{name:"actions",align:"right",label:"Actions"}]),o=$e([{name:"name",align:"left",label:"Name",field:L=>L.RequirementName,format:L=>`${L}`},{name:"skillTier",align:"center",label:"Skill Tier",field:L=>L.RequirementDescription?L.RequirementDescription:"N/A",format:L=>`${L}`},{name:"actions",align:"right",label:"Actions"}]),r=f(window.innerWidth),m=()=>{r.value=window.innerWidth};nt(()=>{window.addEventListener("resize",m),m()}),to(()=>{window.removeEventListener("resize",m)});const C=f([""]),h=f([]),M=f([]),k=f([]),{result:$,load:q,error:c}=Nt(Jo,()=>({sow_id:s.value,first:100}));nt(()=>{q()}),ge(()=>{if(c.value&&console.log(c.value,"error"),$.value){const L=$.value.SowGuidelineRequirements.data.map((ae,fe)=>({...ae,Name:ae.RequirementName,index:fe,textInput:ae.text_Response,fileInput:ae.fileUploadResponse,editMode:!1}));L.map(ae=>{h.value.find(fe=>fe.SowGuidelineName===ae.SowGuidelineName)||h.value.push({SowGuidelineName:ae.SowGuidelineName,SowImplementationTypeName:ae.SowImplementationTypeName})});let G=[];M.value=L,M.value.map(ae=>ae.ImplementationTaskNames.map(fe=>{G.push({TaskName:fe,SowImplementationTypeName:ae.SowImplementationTypeName,SowGuidelineName:ae.SowGuidelineName,ImplementationTaskRequirements:M.value.filter(Y=>Y.ImplementationTaskNames.includes(fe))})})),console.log(G,"allTaskNames"),k.value=h.value.map(ae=>({SowImplementationTypeName:ae.SowImplementationTypeName,SowGuidelineName:ae.SowGuidelineName,TaskName:ae.SowGuidelineName,relatedItems:M.value,ImplementationTaskRequirements:M.value})),console.log(L,"newData"),L.length>0&&(C.value=L.reduce((ae,fe)=>(ae.includes(fe.SowImplementationTypeName)||fe.SowImplementationTypeName!==null&&fe.Name!=="seperator"&&(ae.push(fe.SowImplementationTypeName),console.log(ae,"result")),ae),[]))}});const{mutate:E,onDone:I,onError:O}=Ne(xa,()=>({variables:{_id:v.sowRequirementID,text_Response:v.textResponse,fileUploadResponse:v.fileUploadResponse}}));I(L=>{console.log(L,"response onDone"),v.textResponse=null,v.fileUploadResponse=null,H.notify({color:"indigo",textColor:"white",icon:"edit",message:"Requirement Updated"})}),O(L=>{console.log(L,"error")});const H=kt();function _(L,G){G==="download"?ke(L):(v.sowRequirementID=L._id,v.textResponse=L.textInput,v.fileUploadResponse=L.fileInput,E())}const Ve=f(""),me=f(null),{result:Se,load:Ae,error:De}=Nt(el,()=>({_id:me.value}));ge(()=>{De.value&&console.log(De.value,"error"),Se.value&&(Ve.value=Se.value.SowGuidelineRequirement.S3Url)});function ke(L){me.value=L,Ae(),H.notify({color:"indigo",textColor:"white",icon:"download",message:"Downloading Document..."}),setTimeout(()=>{window.open(Ve.value,"_blank")},1e3)}const qe=f([]);function oe(L,G){L.includes(G.SowGuidelineName)?qe.value=qe.value.filter(ae=>ae!==G.SowGuidelineName):qe.value.push(G.SowGuidelineName)}const pe=mt("contextMenuSetter");function ve(L,G,ae){pe({id:L,evt:ae,route:"sow_details/requirement",routeName:"SowRequirementDetails",loadingMessage:"Redirecting to SOW Requirement..."}),t(s.value)}const P=f(!1);function x(L){P.value=L}return{state:v,setShowModal:w,sowGuidelineRequirements:$,requirementColumns:a,sowRequirements:M,sowImplementationTables:C,updateRequirement:_,downloadDocument:ke,windowWidth:r,sowGuidelineNames:h,expandTypesRef:qe,expandOrHideRows:oe,goToSowRequirementDetails:ve,sowImplementationTasks:k,showTasksTable:P,setShowTasksTable:x,columns:o}}});function yn(e,t,v,w,i,s){const a=we("AccordianQTable"),o=we("AccordianQTableDeep");return l(!0),g(Oe,null,Ge(e.sowImplementationTables,(r,m)=>(l(),g("div",{key:m,class:"w-full"},[e.showTasksTable?y("",!0):(l(),R(a,{key:0,rows:e.sowRequirements.filter(C=>C.SowImplementationTypeName===r),idx:m,columns:e.requirementColumns,stateValue:e.state,title:r+" Requirements",handleRowClick:e.goToSowRequirementDetails,showPagination:!1,customLoadingDataText:"Searching for SOW Requirements...",customNoDataText:"No Requirements found in this SOW",loading:e.state.isLoading,expandOrHideRows:e.expandOrHideRows,updateComponent:e.updateRequirement,class:"shadow-md mt-5 mb-5 animate__animated animate__fadeInUp responsive-table-container",style:{"animation-duration":"0.5s"},topTooltip:"The purpose of Requirements is to centralize all documentation related to this SOW. This can include text responses, simple yes or no answers, or uploaded documents.",href:"implementation-type/requirement/",filterByRowName:"SowGuidelineName",rowName:"RequirementName",expansionHeaderName:"Related Guideline",expansionHeaderType:"SowGuidelineRequirement",setShowTasksTable:e.setShowTasksTable},null,8,["rows","idx","columns","stateValue","title","handleRowClick","loading","expandOrHideRows","updateComponent","setShowTasksTable"])),e.showTasksTable?(l(),R(o,{key:1,rows:e.sowImplementationTasks.filter(C=>C.SowImplementationTypeName===r),idx:m,columns:e.columns,stateValue:e.state,title:r+" Requirements",handleRowClick:e.goToSowRequirementDetails,showPagination:!1,customLoadingDataText:"Searching for SOW Requirements...",customNoDataText:"No Requirements found in this SOW",loading:e.state.isLoading,expandOrHideRows:e.expandOrHideRows,updateComponent:e.updateRequirement,class:"shadow-md mt-5 mb-5 animate__animated animate__fadeInUp responsive-table-container",style:{"animation-duration":"0.5s"},topTooltip:"The purpose of Requirements is to centralize all documentation related to this SOW. This can include text responses, simple yes or no answers, or uploaded documents.",href:"implementation-type/requirement/",filterByRowName:"TaskName",rowName:"Name",expansionHeaderName:"Related Guideline",expansionHeaderType:"ImplementationTask",filterByRowNameSecondary:"TaskName",relatedHeaderTitle:"Tasks",relatedHeaderTitleSecondary:"Requirements",setShowTasksTable:e.setShowTasksTable,showHeaderToggle:!0,redirectToTask:"/implementation-type/requirement/",dense:""},null,8,["rows","idx","columns","stateValue","title","handleRowClick","loading","expandOrHideRows","updateComponent","setShowTasksTable"])):y("",!0)]))),128)}const gn=Ze(vn,[["render",yn]]),hn=Je`
  mutation UpdateSowLocationMutation(
    $_id: String!
    $account_physical_location_id: Int!
    $sow_order: Int
  ) {
    UpdateSowLocationMutation(
      _id: $_id
      account_physical_location_id: $account_physical_location_id
      sow_order: $sow_order
    ) {
      _id
      sow_id
      account_physical_location_id
      AccountID
      Name
      Address1
      Address2
      City
      State
      PostalCode
      CountryID
      Active
      Primary
      Phone
    }
  }
`,Sn=Je`
  mutation DeleteSowLocationMutation($_id: String!) {
    DeleteSowLocationMutation(_id: $_id) {
      _id
    }
  }
`,bn=Ke({name:"WorkLocation",components:{SearchModel:Ht},props:{index:{type:Number,required:!0},sow:{type:[Object,null],required:!0},location:{type:Object,required:!0},sowLocations:{type:Array,required:!0},handleSowLocationUpdates:{type:Function,default:()=>{}},readonly:{type:Boolean,default:!1},setCreateNew:{type:Function,default:()=>{}},loading:{type:Boolean,default:!1}},setup(e){const t=K(()=>{if(e.location.Address1==="N/A")return{address1:"N/A",address2:"N/A"};{let me=", "+e.location.City+" "+e.location.State+", "+e.location.PostalCode,Se=e.location.Address1+me,Ae=e.location.Address2!==""?e.location.Address2+me:"N/A";return{address1:Se,address2:Ae}}}),v=ct(),w=K(()=>v.darkMode),i=ft(),s=$e({address1:"",address2:e.location.Address2,phone:e.location.Phone,editField:null,accountId:null,locationID:null,showDelete:!1,editMode:!1,search:""});function a(me){console.log(me,"location val"),me==="close"?s.editMode=!1:o(me.id)}async function o(me){try{const{mutate:Se}=Ne(hn,()=>({variables:{_id:e.location._id,account_physical_location_id:me}})),{data:Ae}=await Se();s.editMode=!1,e.handleSowLocationUpdates("update",Ae.UpdateSowLocationMutation)}catch(Se){console.error(Se)}}async function r(){try{const{mutate:me}=Ne(Sn,()=>({variables:{_id:e.location._id}})),{data:Se}=await me();s.editMode=!1,e.handleSowLocationUpdates("delete",Se.DeleteSowLocationMutation)}catch(me){console.error(me)}}function m(me){s.editField=me}const C=f(null);function h(me,Se){s.address1=me,s.phone=Se}const M=f([]),k=f(!1),{result:$,loading:q,error:c,load:E}=Nt(Xo,()=>({Address:M.value.length===0?"":s.search,companyID:e.sow&&e.sow.account_id}));ye(()=>e.sow,()=>{E()});function I(me){if(me==="Search Location")return"Search Location";{let Se=me.address1+", "+me.city+" "+me.state+", "+me.postalCode;return me.address2!==""?me.address2+", "+Se:Se}}const O=f(null),H=f(!0);ge(()=>{if(c.value&&console.log(c.value),q.value&&(k.value=!0),$.value){k.value=!1;let me=M.value;M.value=$.value.CompanyLocations.data,M.value[0]&&H.value&&(O.value=I(M.value[0]),s.locationID=M.value[0].autotask_id),H.value=!1,xe.setSpinner(M.value,me)}}),xe.onSetValueCallback(a);function _(me,Se){Se==="close"&&setTimeout(()=>{s.editMode=!1},400)}const Ve=f(!1);return{setSowLocation:a,state:s,computedAddress:t,addressInput:C,handleFocusOut:m,route:i,setLocation:h,deleteSowLocation:r,searchOptions:xe,locations:M,isLocationLoading:k,computeSetAddress:I,defaultLocation:O,focusTracker:_,darkmode:w,isHoveringLocation:Ve}},computed:{formattedPhoneNumber(){return this.location.Phone.toString().replace(/^1?(\d{3})(\d{3})(\d{4})/,function(v,w,i,s){return v.startsWith("1")?`(${w}) ${i}-${s}`:`(${w}) ${i}-${s}`})}}}),Tn={class:"relative text-slate-500"},kn={class:"mt-.5 flex items-center"},Cn={class:"md:absolute md:right-[-14rem] md:top-0 mt-3 md:mt-0 flex flex-col md:items-end mr-0"},Dn={class:"flex items-center"};function In(e,t,v,w,i,s){const a=we("SearchModel");return l(),g("div",{class:"pb-5 relative ml-5 md:ml-0",onMouseover:t[6]||(t[6]=o=>e.sowLocations.length===1?null:e.state.showDelete=!0),onMouseleave:t[7]||(t[7]=o=>e.state.showDelete=!1)},[n("div",Tn,[n("p",{class:"w-32 relative cursor-pointer",onClick:t[0]||(t[0]=o=>e.readonly?null:e.state.editMode=!0),onMouseover:t[1]||(t[1]=o=>e.isHoveringLocation=!0),onMouseleave:t[2]||(t[2]=o=>e.isHoveringLocation=!1)},[t[8]||(t[8]=J(" Work Address ",-1)),u(Qe,{name:"edit",class:"ml-1",color:e.isHoveringLocation?"blue-6":"blue-grey-3"},null,8,["color"]),n("span",{class:F(e.readonly?"":e.darkmode?"text-slate-300 cursor-pointer":"text-slate-900 cursor-pointer")},V(e.index!==0?e.index+1:null),3)],32),e.state.showDelete?(l(),R(W,{key:0,align:"right",size:"sm",flat:"",dense:"",round:"",color:"red-4",icon:"delete","cy-data":"delete-sow-location",class:"cursor-pointer absolute right-2 top-0 z-10 items-center",onClick:e.deleteSowLocation},null,8,["onClick"])):y("",!0)]),n("div",kn,[!e.state.editMode&&!e.loading?(l(),g("p",{key:0,class:F(["text-type w-72 truncate",e.readonly?"":e.darkmode?"text-slate-300 cursor-pointer":"text-slate-900 cursor-pointer"]),onClick:t[3]||(t[3]=o=>e.readonly?null:e.state.editMode=!0),onMouseover:t[4]||(t[4]=o=>e.isHoveringLocation=!0),onMouseleave:t[5]||(t[5]=o=>e.isHoveringLocation=!1)},V(e.computedAddress.address1),35)):y("",!0),e.loading?(l(),R(he,{key:1,class:"w-72 h-3 mt-2",loading:e.loading,rounded:!0},null,8,["loading"])):y("",!0),e.state.editMode?(l(),R(a,{key:2,label:"Locations",rows:e.locations,loading:e.isLocationLoading,value:e.computeSetAddress,class:"w-72",dense:"",focusTracker:e.focusTracker,defaultValue:e.defaultLocation,isCreateNew:!0,setCreateNew:e.setCreateNew},null,8,["rows","loading","value","focusTracker","defaultValue","setCreateNew"])):y("",!0)]),n("div",Cn,[t[9]||(t[9]=n("div",{class:"text-slate-500 relative"},[n("p",{style:{width:"10rem"}},"Phone Number")],-1)),n("div",Dn,[e.loading?(l(),R(he,{key:1,class:"w-20 h-3 mt-2 -ml-40",loading:e.loading},null,8,["loading"])):(l(),g("p",{key:0,style:{width:"10rem"},class:F(e.readonly?"":e.darkmode?"text-slate-300 cursor-pointer":"text-slate-900 cursor-pointer")},V(e.formattedPhoneNumber===""?"N/A":e.formattedPhoneNumber),3))])])],32)}const Pn=Ze(bn,[["render",In]]),Nn=Ke({components:{SearchModel:Ht},props:{selectAccount:Boolean,setAccountModal:{type:Function,default:()=>{}},updateSow:{type:Function,default:()=>{}},updateSowAccount:{type:Function,default:()=>{}}},setup(e){const t=ft(),v=K(()=>parseInt(t.params.id)),w=K(()=>ct().darkmode),i=$e({openAccount:!1,showAttach:!1,accountId:null,showModal:e.selectAccount});ye(()=>e.selectAccount,$=>{i.showModal=$});function s($,q){i.openAccount=$,q&&(i.showAttach=!0)}function a(){i.showModal=!1,e.updateSowAccount({id:v.value,account_id:i.accountId})}function o($){console.log($,"id"),$!=="close"&&(i.accountId=$.autotask_id)}const r=Yo(),m=f([]),C=f(!1),h=f(""),{result:M,loading:k}=Le(_o,()=>({companyName:r.search,page:r.page,first:15}));return ge(()=>{if(k.value&&(C.value=!0),h.value!==r.search&&(C.value=!0,m.value=[],h.value=r.search),M.value){C.value=!1;const $=m.value,q=M.value.Companies.data.filter(c=>!m.value.some(E=>E.AccountName===c.AccountName));r.page>1?m.value=[...m.value,...q]:m.value=[...q,...m.value],r.setSpinner(m.value,$)}}),nt(()=>{r.onSetValueCallback(o)}),{state:i,setAccountDisplay:s,updateAccount:a,setAccountId:o,accounts:m,isLoading:C,darkmode:w,searchOptions:r}}}),Mn={class:"flex w-full sm:w-[30rem] mt-[25vh] flex-col min-h-full text-center sm:items-center rounded-xl",style:{"border-radius":"10px 10px 0px 0px"}},$n={class:"flex text-start"},On={class:"mr-0 w-3/4"},An={class:"flex justify-end ml-0 w-1/4"};function Rn(e,t,v,w,i,s){const a=we("SearchModel");return l(),R(Ot,{modelValue:e.state.showModal,"onUpdate:modelValue":t[1]||(t[1]=o=>e.state.showModal=o)},{default:T(()=>[n("div",Mn,[n("div",{class:F(["p-5 sm:flex sm:items-start",e.darkmode?"bg-[#28334E]":"bg-white"])},[t[2]||(t[2]=n("div",{class:"mx-auto flex h-16 w-20 flex-shrink-0 items-center justify-center rounded-full sm:mx-0"},[n("svg",{class:"h-16 w-16 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 10.5v3.75m-9.303 3.376C1.83 19.126 2.914 21 4.645 21h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 4.88c-.866-1.501-3.032-1.501-3.898 0L2.697 17.626zM12 17.25h.007v.008H12v-.008z"})])],-1)),u(Qe,{name:"close",class:"w-5 h-5 ml-2 text-gray-500 absolute right-5 top-5 cursor-pointer",onClick:t[0]||(t[0]=o=>e.setAccountModal(!1))}),t[3]||(t[3]=n("div",{class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},[n("h3",{id:"modal-title",class:"text-2xl ml-3 mb-3 font-medium leading-6 text-slate-500 dark:text-slate-300"}," No Account Linked "),n("div",{class:"mt-2 mb-4"},[n("p",{class:"text-md ml-3 text-slate-500"}," For this Sow to properly function an account must be linked. Attach an account to this Sow. ")])],-1))],2),n("div",{class:F([e.darkmode?"bg-[#3a4666]":"bg-gray-50","px-5 py-3 flex-col sm:px-6 pb-4 w-full sm:w-[30rem]"]),style:{"border-radius":"0px 0px 10px 10px"}},[t[4]||(t[4]=n("p",{class:"text-slate-500 mb-3 text-lg text-center mr-20"},"Select an Account",-1)),n("div",$n,[n("div",On,[u(a,{rows:e.accounts,label:"Accounts",value:"companyName",loading:e.isLoading,"no-focus":"",dense:"",filled:"",store:e.searchOptions},null,8,["rows","loading","store"])]),n("div",An,[u(W,{disable:e.state.accountId===null,label:"Assign",color:"primary",dense:"",class:"px-3","no-caps":"",onClick:e.updateAccount},null,8,["disable","onClick"])])])],2)])]),_:1},8,["modelValue"])}const Ln=Ze(Nn,[["render",Rn]]),qn=Ke({props:{project:{type:Object,required:!0},formatTotal:{type:Function,default:()=>{}}},setup(){}});function En(e,t,v,w,i,s){return l(),g(Oe,null,[n("div",null,[t[0]||(t[0]=n("p",null,"Project Name:",-1)),n("p",null,V(e.project.ProjectName),1)]),n("div",null,[t[1]||(t[1]=n("p",null,"Start Date:",-1)),n("p",null,V(e.project.StartDateTime),1)]),n("div",null,[t[2]||(t[2]=n("p",null,"End Date:",-1)),n("p",null,V(e.project.EndDateTime),1)]),n("div",null,[t[3]||(t[3]=n("p",null,"Purchase Order Number:",-1)),n("p",null,V(e.project.PurchaseOrderNumber),1)])],64)}const Bn=Ze(qn,[["render",En]]),Vn=Ke({components:{WopProjectData:Bn},props:{formatTotal:{type:Function,default:()=>{}},sowProjects:{type:Array,default:()=>[]}},setup(){const e=$e({pageValue:1}),t=io();function v(w){t.push({name:"ProjectDetails",params:{id:w.project_id}})}return{state:e,goToProject:v}}}),jn={key:0,class:"project-review-cont"},Fn={style:{border:"none",display:"flex","justify-content":"center"},class:"flex flex-center q-pt-md"},Un={key:0},Qn={class:"absolute right-5"};function Gn(e,t,v,w,i,s){const a=we("WopProjectData");return l(!0),g(Oe,null,Ge(e.sowProjects,(o,r)=>(l(),g("div",{key:r},[r===e.state.pageValue-1?(l(),g("div",jn,[u(a,{project:o,formatTotal:e.formatTotal},null,8,["project","formatTotal"]),n("div",Fn,[e.sowProjects.length<1?(l(),g("div",Un,[u(pl,{modelValue:e.state.pageValue,"onUpdate:modelValue":t[0]||(t[0]=m=>e.state.pageValue=m),color:"indigo-6",max:e.sowProjects.length},null,8,["modelValue","max"])])):y("",!0),n("div",Qn,[u(W,{"icon-right":"open_in_new",color:"primary",flat:"",label:"AT",dense:"","no-caps":"",class:"mr-3",href:o.AutotaskLink,target:"_blank"},{default:T(()=>[u(Me,{style:{"font-size":"0.8rem"},class:"text-no-wrap"},{default:T(()=>[...t[1]||(t[1]=[J("Open Project in Autotask ",-1)])]),_:1})]),_:1},8,["href"]),u(W,{"icon-right":"visibility",color:"primary",flat:"",label:"View",dense:"","no-caps":"",onClick:m=>e.goToProject(o)},null,8,["onClick"])])])])):y("",!0)]))),128)}const Wn=Ze(Vn,[["render",Gn]]),ia=Je`
  query SowContracts($sow_id: Int, $IsActive: Boolean) {
    SowContracts(sow_id: $sow_id, IsActive: $IsActive) {
      data {
        id
        contract_id
        sow_id
        ContractName
        EndDate
        StartDate
        ContractPeriodType
        Description
        PurchaseOrderNumber
        Status
        AutotaskLink
        # Contract {contractName}
      }
    }
  }
`,ra=Je`
  query SowProjects($sow_idNew: String) {
    SowProjects(sow_idNew: $sow_idNew) {
      data {
        _id
        project_id
        sow_idNew
        AccountID
        ProjectName
        EndDateTime
        StartDateTime
        Type
        ProjectTypeName
        Status
        ProjectLeadResourceID
        ContractID
        OpportunityID
        PurchaseOrderNumber
        Description
        LaborEstimatedRevenue
        ProjectCostsRevenue
        OriginalEstimatedRevenue
        OpportunityTitle
        ContractName
        ProjectLeadResourceName
        AutotaskLink
        # Tasks {}
        # Project {}
      }
    }
  }
`,Hn=Je`
  mutation CreateWopMutation(
    $WopInput: [WopInput]!
    $currentUserEmail: String!
  ) {
    CreateWopMutation(WopInput: $WopInput, currentUserEmail: $currentUserEmail)
  }
`,Yn=Ke({props:{type:{type:String,default:"contract"},header:{type:String,default:""},isReq:Boolean,createWop:Boolean,createProject:Boolean,sow:{type:Object,default:()=>{}},item:{type:Object,default:null},updateWop:{type:Function,default:()=>{}},contract:{type:Object,default:()=>{}},createWopContract:{type:Function,default:()=>{}},checkDate:{type:Function,default:()=>{}},sowServices:{type:Array,default:()=>[]},darkmode:{type:Boolean,default:!1},showRecurringBlockHourContract:{type:Boolean,default:!1},checkboxLabel:{type:String,default:"Checkbox Label"},checkboxTooltip:{type:String,default:null},toggleLabel:{type:String,default:"Toggle Label"},toggleTooltip:{type:String,default:null},setCheckboxValue:{type:Function,default:()=>{}},secondColumnHeader:{type:String,default:"Bill to Account"},po:{type:String,default:""},groupServicesByImplementation:{type:Boolean,default:!1},checkboxValue:{type:Boolean,default:!1}},setup(e){const t=$e({name:e.sow.Name,billToParent:!1,startDate:e.checkDate().date,endDate:e.checkDate().endDate,startDate1:"",endDate1:"",startCalendar:!1,endCalendar:!1,isParentAccount:!1,createContractInAT:!1,checkboxValue:e.checkboxValue,PO:""});ye(()=>e.po,()=>{t.PO=e.po}),nt(()=>{t.PO=e.sow?.Name});function v(m){e.setCheckboxValue(m)}function w(m){m==="startDate"?(t.endCalendar=!1,t.startCalendar=!t.startCalendar):m==="endDate"?(t.startCalendar=!1,t.endCalendar=!t.endCalendar):m==="recurringStartDate"?(s.endCalendar=!1,s.startCalendar=!s.startCalendar):m==="recurringEndDate"&&(s.startCalendar=!1,s.endCalendar=!s.endCalendar)}const i=$e({value:null}),s=$e({name:e.sow.Name,billToParent:!1,startDate:e.checkDate().date,startDate1:"",startCalendar:!1,endCalendar:!1,isParentAccount:!1,createContractInAT:!1});ye(()=>e.item,()=>{e.item&&(console.log(e.item,"props.item"),t.name=e.item.Name,t.startDate=e.item.StartDate??e.checkDate().firstDayNextMonth,t.endDate=e.item.EndDate??e.checkDate().contractExpDate)},{immediate:!0}),ye(()=>s.startDate,()=>{var m=new Date(s.startDate);m.setFullYear(m.getFullYear()+1),m.setDate(m.getDate()-1),i.value=m.toLocaleDateString()},{immediate:!0});const a=K(()=>{let m=[];return e.item.relatedSowServicesAndBundles?.map(C=>{m.push(C.id??C._id)}),m});ye(()=>e.createProject,()=>{t.createContractInAT||(e.header==="Recurring Labor Contract Name"?e.createWopContract({EntityName:t.name,StartDateTime:t.startDate,EndDateTime:t.endDate,BillToParent:t.billToParent,CreateContractInAT:t.createContractInAT,contract_type:3}):e.groupServicesByImplementation?e.createWopContract({EntityName:t.name,StartDateTime:t.startDate,EndDateTime:t.endDate,BillToParent:t.billToParent,CreateContractInAT:t.createContractInAT,sow_service_id:a.value,contract_type:2}):e.createWopContract({EntityName:t.name,StartDateTime:t.startDate,EndDateTime:t.endDate,BillToParent:t.billToParent,sow_service_id:e.item?e.item.id??e.item._id:null,CreateContractInAT:t.createContractInAT,contract_type:2}))}),ye(()=>t.startDate1,()=>{t.startCalendar=!1}),ye(()=>t.endDate1,()=>{t.endCalendar=!1});function o(m,C,h){if(console.log(m,h,"updateDate"),h!=="")if(h.length===10){var M=h.substring(0,4),k=h.substring(5,7),$=h.substring(8,10),q=k+"/"+$+"/"+M;C==="startDate"?(t.startDate=q,e.updateWop(e.type,"startDate",t.startDate)):C==="endDate"?(t.endDate=q,e.updateWop(e.type,"endDate",t.endDate)):C==="recurringStartDate"?(s.startDate=q,e.updateWop(m,"startDate",s.startDate)):(s.endDate=q,e.updateWop(e.type,"endDate",s.endDate))}else m==="startDate"?(t.startDate=h,e.updateWop(e.type,"startDate",t.startDate)):m==="endDate"?(t.endDate=h,e.updateWop(e.type,"endDate",t.endDate)):m==="recurringStartDate"?(s.startDate=h,e.updateWop(e.type,"startDate",s.startDate)):(s.endDate=h,e.updateWop(e.type,"endDate",s.endDate))}function r(m){m!==null&&(t.isParentAccount=!0)}return{state:t,setCheckbox:v,toggleCalendar:w,setParentAccount:r,updateDate:o,recurringBlockHourContract:s,recurringBlockHourContractEndDate:i}}}),zn={class:"contract-cont"},Zn={style:{"margin-right":"0rem"},class:"col-span-2 sm:col-span-1"},Kn={class:"wop-text"},Jn={key:0,style:{"flex-direction":"column"},class:"ml-0 sm:ml-[5.5rem] mt-4 sm:mt-0 col-span-2 sm:col-span-1"},Xn={class:"wop-text"},_n={style:{position:"relative"}},xn={key:0},es={class:"relative mt-3",style:{"margin-right":"0.5rem"}},ts={class:"wop-text flex"},os={style:{display:"flex","margin-top":"0rem"},class:"hover:underline cursor-pointer"},as={class:"relative ml-0 mt-3 sm:ml-[5.5rem] mb-3"},ls={class:"flex wop-text"},ns={style:{display:"flex"},class:"hover:underline cursor-pointer"},ss={class:"grid grid-cols-2 col-span-2"},is={class:""};function rs(e,t,v,w,i,s){return l(),g("div",null,[n("div",zn,[n("div",Zn,[n("p",Kn,V(e.header),1),u(lt,{id:"regular-form-1",modelValue:e.state.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.state.name=a),style:$t(e.isReq&&e.state.name===""?"border-color: red":""),filled:"",dense:"",class:"form-control integer-input",placeholder:"Name",dark:e.darkmode,onChange:t[1]||(t[1]=a=>e.updateWop(e.id,"ContractName",e.state.name))},null,8,["modelValue","style","dark"])]),e.type==="contract"?(l(),g("div",Jn,[n("p",Xn,V(e.secondColumnHeader),1),n("div",_n,[e.secondColumnHeader==="Bill to Account"?(l(),g("p",{key:0,class:F(["mt-0",!e.contract?.UseNewProjectContract||e.state.createContractInAT?"text-gray-500":""])},V(e.state.billToParent?e.sow.ParentAccountName:e.sow.AccountName),3)):(l(),g("p",{key:1,class:F(["mt-2 italic",e.state.createContractInAT?"text-slate-300 dark:text-slate-500":""])},[e.item.relatedSowServicesAndBundles?.length===0?(l(),g("span",xn,V(e.item.sowService.Name),1)):(l(!0),g(Oe,{key:1},Ge(e.item.relatedSowServicesAndBundles,a=>(l(),g("span",{key:a.id,style:{"list-style":"disc"}},[n("li",null,V(a.Name),1)]))),128))],2))]),e.sow.ParentAccountName&&!e.contract?.UseNewProjectContract?(l(),R(dt,{key:0,modelValue:e.state.billToParent,"onUpdate:modelValue":t[2]||(t[2]=a=>e.state.billToParent=a),label:"Bill to Parent Account",dark:e.darkmode,style:{"margin-top":"0.5rem","margin-left":"-0.5rem"},onClick:t[3]||(t[3]=a=>e.updateWop(e.id,"BillToParent",e.state.billToParent))},null,8,["modelValue","dark"])):y("",!0)])):Sa(e.$slots,"search",{key:1}),n("div",{class:F(["",e.type==="contract"?"grid grid-cols-2 col-span-2":"flex"])},[n("div",es,[n("p",ts,[t[20]||(t[20]=J(" Start Date ",-1)),e.state.startCalendar?(l(),R(W,{key:0,class:"ml-2 cursor-pointer absolute left-12",icon:"close",flat:"",size:"sm",onClick:t[4]||(t[4]=a=>!e.contract?.UseNewProjectContract||e.state.createContractInAT?null:e.state.startCalendar=!1)})):y("",!0)]),n("div",os,[n("p",{class:F(!e.contract?.UseNewProjectContract||e.state.createContractInAT?"wop-text cursor-not-allowed":""),onClick:t[5]||(t[5]=a=>!e.contract?.UseNewProjectContract||e.state.createContractInAT?null:e.toggleCalendar("startDate"))},V(e.state.startDate),3)]),e.state.startCalendar?(l(),R(so,{key:0,modelValue:e.state.startDate1,"onUpdate:modelValue":t[7]||(t[7]=a=>e.state.startDate1=a),minimal:"",class:F(["calender-cont",e.darkmode?"bg-blue-grey-9":""]),style:{left:"0px"},dark:e.darkmode,onClick:t[8]||(t[8]=a=>e.contract?.UseNewProjectContract?e.updateDate(e.type,"startDate",e.state.startDate1):null)},{default:T(()=>[u(W,{flat:"",round:"",color:"red",icon:"close",size:"sm",style:{position:"absolute",right:"0.2rem",top:"0.2rem"},onClick:t[6]||(t[6]=a=>e.state.startCalendar=!1)})]),_:1},8,["modelValue","dark","class"])):y("",!0)]),n("div",as,[n("p",ls,[t[21]||(t[21]=J(" End Date ",-1)),e.state.endCalendar?(l(),R(W,{key:0,class:"ml-2 cursor-pointer absolute left-12",icon:"close",flat:"",size:"sm",onClick:t[9]||(t[9]=a=>!e.contract?.UseNewProjectContract||e.state.createContractInAT?null:e.state.endCalendar=!1)})):y("",!0)]),n("div",ns,[n("p",{class:F(!e.contract?.UseNewProjectContract||e.state.createContractInAT?"text-gray-500 cursor-not-allowed":""),onClick:t[10]||(t[10]=a=>!e.contract?.UseNewProjectContract||e.state.createContractInAT?null:e.toggleCalendar("endDate"))},V(e.state.endDate),3)]),e.state.endCalendar?(l(),R(so,{key:0,modelValue:e.state.endDate1,"onUpdate:modelValue":t[12]||(t[12]=a=>e.state.endDate1=a),minimal:"",class:F(["calender-cont",e.darkmode?"bg-blue-grey-9":""]),style:{left:"-7rem"},dark:e.darkmode,onClick:t[13]||(t[13]=a=>e.updateDate(e.type,"endDate",e.state.endDate1))},{default:T(()=>[u(W,{flat:"",round:"",color:"red",icon:"close",size:"sm",style:{position:"absolute",right:"0.2rem",top:"0.2rem"},onClick:t[11]||(t[11]=a=>e.state.endCalendar=!1)})]),_:1},8,["modelValue","dark","class"])):y("",!0)])],2),n("div",null,[e.type==="project"?(l(),R(lt,{key:0,modelValue:e.state.PO,"onUpdate:modelValue":t[14]||(t[14]=a=>e.state.PO=a),filled:"",dense:"",label:"Project PO",class:"form-control integer-input ml-10 mt-4",placeholder:"end date",dark:e.darkmode,onChange:t[15]||(t[15]=a=>e.updateWop("project","PO",e.state.PO))},null,8,["modelValue","dark"])):y("",!0)]),n("div",ss,[n("div",null,[e.checkboxLabel!=="hidden"?(l(),R(dt,{key:0,modelValue:e.state.checkboxValue,"onUpdate:modelValue":t[16]||(t[16]=a=>e.state.checkboxValue=a),label:e.checkboxLabel,dark:e.darkmode,dense:"",color:"primary",onClick:t[17]||(t[17]=a=>e.setCheckbox(e.state.checkboxValue))},null,8,["modelValue","label","dark"])):y("",!0),e.checkboxTooltip?(l(),R(Me,{key:1,style:{"font-size":"0.9rem","white-space":"pre-line"},class:"bg-white border shadow-md text-black w"},{default:T(()=>[J(V(e.checkboxTooltip),1)]),_:1})):y("",!0)]),n("div",is,[e.toggleTooltip?(l(),R(Qe,{key:0,class:"text-slate-500 hover:text-blue-400 transition-all duration-500",name:"help",size:"20px"},{default:T(()=>[u(Me,{style:{"font-size":"0.9rem"},class:"bg-white border shadow-md text-black"},{default:T(()=>[J(V(e.toggleTooltip),1)]),_:1})]),_:1})):y("",!0),u(At,{modelValue:e.state.createContractInAT,"onUpdate:modelValue":t[18]||(t[18]=a=>e.state.createContractInAT=a),label:e.toggleLabel,dense:"",class:"ml-5",color:"primary",onClick:t[19]||(t[19]=a=>e.updateWop(e.id,"CreateContractInAT",e.state.createContractInAT))},null,8,["modelValue","label"])])])])])}const ds=Ze(Yn,[["render",rs]]),us=Ke({components:{ProjectReview:Wn,SearchModel:Ht,WopInputContainer:ds},props:{sow:{type:[Object,null],required:!0},sowTotals:{type:[Object,null],required:!0}},setup(e){const t=ft(),v=K(()=>t.params.id),w=K(()=>ct().darkmode);let i=f(window.innerWidth);const s=()=>{i.value=window.innerWidth};nt(()=>{window.addEventListener("resize",s)}),to(()=>{window.removeEventListener("resize",s)});const a=$e({groupServicesByImplementation:!1,isWop:!1,isWopConfigure:!1,isWopReview:!1,aisCostsModal:!1,createWop:!1,loadingTime:1e4,endDate:"",newProjectContracts:[],aisCosts:null,showRenewWop:!1,accountID:null,createProject:!1,PO:e.sow?.Name,wop:{EntityName:e.sow&&e.sow.Name,StartDateTime:c().date,EndDateTime:c().endDate,PurchaseOrderNumber:e.sow&&e.sow.Name,ContractID:0,UseNewProjectContract:!0,BillToParent:!1,ContractName:e.sow&&e.sow.Name,ServiceContractName:"",CreateContractInAT:!1,CreateProjectInAT:!1}}),o=f([]),r=f([]),m=f([]),C=f([]),h=f([]);async function M(){const{result:Y}=Le(ia,()=>({sow_idNew:v.value}));ge(()=>{Y.value&&(C.value=Y.value.SowContracts.data)})}nt(()=>{M()});async function k(){const{result:Y}=Le($o,()=>({sow_idNew:v.value})),{result:Ie,loading:j}=Le(Qo,()=>({sow_idNew:v.value})),{result:ie}=Le(Go,()=>({sow_idNew:v.value})),{result:re}=Le($o,()=>({sow_idNew:v.value,hasRelatedService:!0}));ge(()=>{Y.value&&(m.value=Y.value.SowImplementationTypes.data),Ie.value&&(r.value=Ie.value.SowServices.data.map(Xe=>({...Xe,relatedSowServicesAndBundles:[]}))),ie.value&&!j.value&&(console.log("BUNDLES DATA",ie.value.SowServiceBundles.data),r.value=[...r.value,...ie.value.SowServiceBundles.data.map(Xe=>({...Xe,relatedSowServicesAndBundles:[]}))]),re.value&&(o.value=re.value.SowImplementationTypes.data)});const{result:Ee}=Le(ra,()=>({sow_idNew:v.value}));ge(()=>{Ee.value&&(h.value=Ee.value.SowProjects.data)})}ye(()=>e.openWop,()=>{e.openWop==="create"?(m.value.length<2,Ae("wopConfigure")):e.openWop==="review"&&(a.isWopReview=!0)});let $=[];function q({EntityName:Y,sow_service_id:Ie,StartDateTime:j,EndDateTime:ie,BillToParent:re,contract_type:Ee}){let Xe=[];var je={};let pt=[];switch(typeof Ie){case"string":je={sow_service_bundle_id:Ie};break;case"number":je={sow_service_id:Ie};break;case"object":for(let Fe of Ie)typeof Fe=="string"?pt.push(Fe):Xe.push(Fe);je={sow_service_id:Xe,sow_service_bundle_id:pt};break}$.push({sow_idNew:v.value,EntityType:1,EntityName:Y,contract_type:Ee,StartDateTime:j,EndDateTime:ie,BillToParent:re,PurchaseOrderNumber:a.wop.PurchaseOrderNumber,...je}),console.log($,"createWopContract")}function c(){const Y=new Date,Ie=Y.getMonth()+1+"/"+Y.getDate()+"/"+Y.getFullYear().toString();let j=Y.getMonth()+4+"/"+(Y.getDate()-1)+"/"+Y.getFullYear().toString(),ie=Y.getFullYear()+1;Y.getMonth()+4>12&&(j=Y.getMonth()-12+4+"/"+(Y.getDate()-1)+"/"+ie.toString());let re=Y.getMonth()+2+"/1/"+Y.getFullYear().toString();Y.getMonth()+2>12&&(re=Y.getMonth()-12+2+"/"+(Y.getDate()-1)+"/"+ie.toString());const Ee=Y.getMonth()+1+"/30/"+(Y.getFullYear()+1).toString();return{date:Ie,endDate:j,firstDayNextMonth:re,contractExpDate:Ee}}function E(){let Y=c().date.replaceAll("/","-");const Ie=h.value[0].EndDateTime;let j=Ie&&Ie.substring(0,10),ie=j&&j.replaceAll("/","-"),re=Ie&&parseInt(Ie.substring(6,7))-3,Ee=re&&"0"+re.toString(),Xe=ie&&ie.substring(0,5)+Ee+ie.substring(7,10),je=Y.substring(1,2)==="-"?"0"+Y.substring(0,1):Y.substring(0,2),pt=Y.substring(5,9)+"-"+je+"-"+Y.substring(2,4);pt>Xe&&pt<ie?a.showRenewWop=!0:a.showRenewWop=!1}const I=Uo.getItem("userData"),O=JSON.parse(I);async function H(){try{const Y={WopInput:$,currentUserEmail:O.email};console.log($,"wopInputs CreateWOP()");const{mutate:Ie}=Ne(Hn),{data:j}=await Ie(Y);console.log(j),setTimeout(()=>{$=[]},1e4)}catch(Y){console.error(Y)}}const _=kt();function Ve(){_.loading.show({message:"The Opportunity is being WOP'd. This may take a minute or two."})}function me(){a.wop.EntityName===""||a.wop.PurchaseOrderNumber===""?(a.isReq=!0,console.log("error: fill in required fields")):(a.createProject=!a.createProject,a.createWop=!0,a.wop.CreateContractInAT||$.push({sow_idNew:v.value,EntityType:1,EntityName:a.wop.ContractName,StartDateTime:a.wop.StartDateTime,EndDateTime:a.wop.EndDateTime,PurchaseOrderNumber:a.wop.PurchaseOrderNumber,contract_type:1,BillToParent:a.wop.BillToParent}),(!a.wop.CreateProjectInAT||$.length===0)&&$.push({sow_idNew:v.value,EntityType:0,EntityName:a.wop.EntityName,StartDateTime:a.wop.StartDateTime,EndDateTime:a.wop.EndDateTime,ContractID:a.wop.ContractID,UseNewProjectContract:a.wop.UseNewProjectContract,PurchaseOrderNumber:a.wop.PurchaseOrderNumber}),setTimeout(()=>{console.log($,"all wopInputs onCreateWop"),H()},5e3),Ve(),setTimeout(()=>{_.loading.hide()},3e3),setTimeout(()=>{a.isWopConfigure=!1,a.isReq=!1},500),setTimeout(()=>{a.createWop=!1},2e4))}function Se(){a.wop.EntityName=e.sow.Name,a.wop.StartDateTime=c().date,a.wop.EndDateTime=c().endDate,a.wop.PurchaseOrderNumber=e.sow.Name,a.wop.ContractID=0,a.wop.UseNewProjectContract=!0,a.wop.BillToParent=!1,a.wop.ContractName=e.sow.Name,a.wop.ServiceContractName=""}function Ae(Y){Y==="wopConfigure"?(Se(),a.isWop=!1,a.isWopReview=!1,a.isReq=!1,a.isWopConfigure=!0):Y==="wopReview"?me():Y==="wopClose"&&(a.isWop=!1,a.isWopReview=!1,a.isWopConfigure=!1,a.aisCostsModal=!1)}function De(Y){a.wop.UseNewProjectContract=Y}function ke(Y,Ie,j,ie){switch(console.log("updateWop",Y,Ie,j,ie),Ie){case"name":a.wop.EntityName=a.wop.UseNewProjectContract?j.substring(0,50):j.substring(0,41);break;case"startDate":a.wop.StartDateTime=j;break;case"endDate":a.wop.EndDateTime=j;break;case"PO":a.wop.PurchaseOrderNumber=j;break;case"contract":a.wop.ContractID=j,a.wop.UseNewProjectContract=!1;break;case"UseNewProjectContract":a.wop.UseNewProjectContract=j;for(var re=0;a.newProjectContracts.length>re;re++)a.newProjectContracts[re]===ie&&(a.newProjectContracts.splice(re,1),a.newProjectContracts.length!==0?a.wop.UseNewProjectContract=!0:a.wop.UseNewProjectContract=!1);j===!0&&(a.wop.ContractID=null),a.wop.ContractID=j;break;case"ContractName":a.wop.ContractName=j;break;case"ServiceContractName":a.wop.ServiceContractName=j;break;case"BillToParent":a.wop.BillToParent=j;break;case"CreateContractInAT":a.wop.CreateContractInAT=j;break;case"CreateProjectInAT":a.wop.CreateProjectInAT=j;break}}const qe=K(()=>e.sow.opportunity_id!==null&&e.sow.OpportunityStatus!=="Active"?{message:"This SOW already has an Opportunity assigned",disable:!0}:{message:"",disable:!1});function oe(Y){a.isWopReview=Y}const pe=f(!1);ge(()=>{e?.sow?.LaborContractType==="BlockHours"&&(e?.sowTotals?.NonOptionalMonthlySowLaborTotal>0||e?.sowTotals?.NonOptionalYearlySowLaborTotal>0)?pe.value=!0:pe.value=!1});const ve=f([]);ye(()=>r.value,()=>{let Y={};for(let j of r.value)j.SowImplementationTypeName===null?Y["No Related Implementation Type - "+j.BillingFrequency].push(j):Y[j.SowImplementationTypeName+" - "+j.BillingFrequency].push(j);let Ie=[];r.value.forEach(j=>{if(!Ie.some(ie=>ie.Name===j.SowImplementationTypeName)){let ie=[];ie=r.value.filter(re=>re.SowImplementationTypeName===null&&re.BillingFrequency===j.BillingFrequency),j.SowImplementationTypeName?Ie.some(re=>re.Name.includes(j.SowImplementationTypeName))||Ie.push({Name:j.SowImplementationTypeName+" - "+j.BillingFrequency,sowService:ie,startDate:c().firstDayNextMonth,endDate:c().contractExpDate,relatedSowServicesAndBundles:r.value.filter(re=>re.SowImplementationTypeName===j.SowImplementationTypeName&&re.BillingFrequency===j.BillingFrequency)}):Ie.some(re=>re.Name.includes("No Related Implementation Type"))||Ie.push({Name:(j.SowImplementationTypeName??"No Related Implementation Type - ")+" - "+j.BillingFrequency,sowService:ie,startDate:c().firstDayNextMonth,endDate:c().contractExpDate,relatedSowServicesAndBundles:r.value.filter(re=>re.SowImplementationTypeName===j.SowImplementationTypeName&&re.BillingFrequency===j.BillingFrequency)})}}),ve.value=Ie,console.log(ve.value,"groupServicesByImplementationSowServices")},{immediate:!0});const{result:P,loading:x}=Le(Za,()=>({first:15,contractName:a.search,companyID:e.sow?.account_id,page:a.page})),L=f([]),G=f(!1);ge(()=>{if(x&&(G.value=!0),P.value){G.value=!1;let Y=L.value;L.value=P.value.Contracts.data,xe.setSpinner(L.value,Y)}}),ye(()=>xe.getState,()=>{a.search=xe.getState.search,a.page=xe.getState.page},{deep:!0}),xe.onSetValueCallback(ae);function ae(Y){Y!=="close"&&(a.UseNewProjectContract=!1,a.PO=Y.contractName.substring(0,50))}function fe(Y){a.groupServicesByImplementation=Y}return{state:a,contracts:L,isLoadingContracts:G,openWopModal:Ae,updateWop:ke,checkDate:c,sowProjects:h,sowContracts:C,fetchComponents:k,createWopContract:q,implementations:m,wopHelperMessage:qe,setWopReview:oe,checkWopExpiration:E,sowServices:r,implementationsWithServices:o,darkmode:w,windowWidth:i,showRecurringBlockHourContract:pe,groupServicesByImplementationSowServices:ve,setGroupServicesByImplementation:fe,updateWopUseNewProjectContract:De}}}),ms={class:"col-span-4 mr-6 mt-3 mb-5"},cs={class:"page-cont"},ps={style:{position:"relative"}},fs={class:"ml-10"},ws={style:{position:"relative"}},vs={key:0},ys={class:"header"},gs={class:"contract-review-cont"},hs={style:{display:"flex","justify-content":"flex-end",width:"90%"}};function Ss(e,t,v,w,i,s){const a=we("SearchModel"),o=we("WopInputContainer"),r=we("ProjectReview");return l(),g(Oe,null,[n("div",ms,[e.sowContracts.length>0?(l(),R(W,{key:0,"no-caps":"","icon-right":"visibility",glossy:"",dense:"",class:"p-2 q-ml-sm -mr-2 col-span-1 bg-slate-600 hover:text-white text-slate-200 hover:bg-blue-500 2xl:px-5",label:"Review WOP",onClickOnce:e.fetchComponents,onClick:t[0]||(t[0]=m=>e.setWopReview(!0))},null,8,["onClickOnce"])):(l(),R(W,{key:1,"no-caps":"","icon-right":"post_add",glossy:"",dense:"",class:"p-2 q-ml-sm w-full col-span-1 bg-slate-600 hover:text-white text-slate-200 hover:bg-blue-500 2xl:px-5",label:e.windowWidth<640?"Start WOP Process":"Start WOP",onClickOnce:e.fetchComponents,onClick:t[1]||(t[1]=m=>e.openWopModal("wopConfigure"))},null,8,["label","onClickOnce"]))]),n("div",cs,[u(Ot,{modelValue:e.state.isWopConfigure,"onUpdate:modelValue":t[5]||(t[5]=m=>e.state.isWopConfigure=m),persistent:""},{default:T(()=>[u(ht,{class:F(["container intro-y box",e.darkmode?"bg-[#28334E]":""]),style:{"overflow-x":"hidden"},dark:e.darkmode},{default:T(()=>[u(W,{icon:"close",unelevated:"",class:"close-modal z-10","text-color":"red",onClick:t[2]||(t[2]=m=>e.openWopModal("wopClose"))}),u(gt,{class:"w-[100%] sm:w-[90%]"},{default:T(()=>[t[10]||(t[10]=n("p",{class:"header"},"Project",-1)),n("div",null,[n("div",ps,[u(o,{type:"project",header:"Project Name",checkboxLabel:"Use New Project Contract",checkboxValue:!0,setCheckboxValue:e.updateWopUseNewProjectContract,toggleLabel:"Create Project in AT",createProject:e.state.createProject,isReq:e.state.isReq,updateWop:e.updateWop,sow:e.sow,po:e.state.PO,checkDate:e.checkDate,wop:e.state.wop,sowImplementations:e.implementations,darkmode:e.darkmode,contract:e.state.wop,createWop:e.state.createWop,sowServices:e.sowServices,showRecurringBlockHourContract:e.showRecurringBlockHourContract},{search:T(()=>[n("div",fs,[t[9]||(t[9]=n("p",{class:"wop-text mb-1"},"Associated Contract",-1)),u(a,{label:"Contracts",value:"contractName",rows:e.contracts,dense:"",loading:e.isLoadingContracts,filled:"","no-focus":"",disabled:!!e.state.createProjectInAT},null,8,["rows","loading","disabled"])])]),_:1},8,["setCheckboxValue","createProject","isReq","updateWop","sow","po","checkDate","wop","sowImplementations","darkmode","contract","createWop","sowServices","showRecurringBlockHourContract"])])])]),_:1}),t[14]||(t[14]=n("hr",{style:{width:"85%",margin:"0px"},class:"dark:border-slate-600"},null,-1)),u(gt,{class:"items-center w-[100%] sm:w-[90%]"},{default:T(()=>[t[13]||(t[13]=n("p",{class:"header"},"Contracts",-1)),n("div",null,[n("div",ws,[u(o,{type:"contract",header:"Project Contract Name",checkboxLabel:"Service/Bundles per Implementation Type","checkbox-tooltip":"Toggle to Create one contract per service/bundle, \\n or one contract for all services/bundles related to an Implementation Type",setCheckboxValue:e.setGroupServicesByImplementation,toggleLabel:"Create Contract in AT","toggle-tooltip":`If true, Contract will not be created and should be managed in Autotask. If\r
              false, Contract gets automatically created in Project Central.`,sow:e.sow,createProject:e.state.createProject,updateWop:e.updateWop,isReq:e.state.isReq,contract:e.state.wop,checkDate:e.checkDate,createWop:e.state.createWop,sowServices:e.sowServices,darkmode:e.darkmode,showRecurringBlockHourContract:e.showRecurringBlockHourContract},null,8,["setCheckboxValue","sow","createProject","updateWop","isReq","contract","checkDate","createWop","sowServices","darkmode","showRecurringBlockHourContract"]),e.showRecurringBlockHourContract?(l(),g("div",vs,[t[11]||(t[11]=n("hr",{style:{width:"85%"},class:"dark:border-slate-600 mb-5"},null,-1)),u(o,{type:"contract",header:"Recurring Labor Contract Name",checkboxLabel:"hidden","checkbox-tooltip":"Toggle to Create one contract per service/bundle, \\n or one contract for all services/bundles related to an Implementation Type",setCheckboxValue:e.setGroupServicesByImplementation,toggleLabel:"Create Contract in AT",sow:e.sow,createProject:e.state.createProject,isReq:e.state.isReq,contract:e.state.wop,checkDate:e.checkDate,createWop:e.state.createWop,createWopContract:e.createWopContract,sowServices:e.sowServices,darkmode:e.darkmode,showRecurringBlockHourContract:e.showRecurringBlockHourContract},null,8,["setCheckboxValue","sow","createProject","isReq","contract","checkDate","createWop","createWopContract","sowServices","darkmode","showRecurringBlockHourContract"])])):y("",!0),(l(!0),g(Oe,null,Ge(e.state.groupServicesByImplementation?e.groupServicesByImplementationSowServices:e.sowServices,(m,C)=>(l(),g("div",{key:C,style:{position:"relative"}},[t[12]||(t[12]=n("hr",{style:{width:"100%","margin-top":"1rem","margin-bottom":"1rem"},class:"dark:border-slate-600"},null,-1)),u(o,{id:C,isReq:e.state.isReq,header:(e.state.groupServicesByImplementation?"Recurring ":"")+"Service Contract Name",checkboxLabel:"Add Services to Existing Contract",toggleLabel:"Create Contract in AT",secondColumnHeader:e.state.groupServicesByImplementation?"Related Services/Bundles":"Bill to Account",item:m,contract:e.state.wop,createWop:e.state.createWop,sow:e.sow,createWopContract:e.createWopContract,createProject:e.state.createProject,checkDate:e.checkDate,isParentAccount:e.state.isParentAccount,groupServicesByImplementation:e.state.groupServicesByImplementation,darkmode:e.darkmode},null,8,["id","isReq","header","secondColumnHeader","item","contract","createWop","sow","createWopContract","createProject","checkDate","isParentAccount","groupServicesByImplementation","darkmode"])]))),128))])])]),_:1}),u(zt,{align:"right"},{default:T(()=>[ut(u(W,{label:"Cancel","no-caps":"",color:"red-5",style:{"margin-right":"1rem"},onClick:t[3]||(t[3]=m=>e.openWopModal("wopStart"))},null,512),[[Dt]]),ut(u(W,{label:"Finish","no-caps":"",color:"primary",style:{"margin-right":"1rem"},onClick:t[4]||(t[4]=m=>e.openWopModal("wopReview"))},null,512),[[Dt]])]),_:1})]),_:1},8,["class","dark"])]),_:1},8,["modelValue"]),u(Ot,{modelValue:e.state.isWopReview,"onUpdate:modelValue":t[8]||(t[8]=m=>e.state.isWopReview=m),persistent:""},{default:T(()=>[u(ht,{class:F(["container intro-y box",e.darkmode?"bg-[#28334E]":""]),style:{width:"40rem"},dark:e.darkmode},{default:T(()=>[u(W,{icon:"close",unelevated:"",class:"close-modal","text-color":"red",onClick:t[6]||(t[6]=m=>e.openWopModal("wopClose"))}),u(gt,{class:"items-center"},{default:T(()=>[...t[15]||(t[15]=[n("p",null,"WOP Wizard 2.0 - Review",-1)])]),_:1}),u(gt,{style:{height:"100%"}},{default:T(()=>[n("p",ys,"Project"+V(e.sowProjects.length!==1?"s":""),1),n("div",gs,[u(r,{sowProjects:e.sowProjects},null,8,["sowProjects"])])]),_:1}),u(gt,{style:{height:"100%"}},{default:T(()=>[...t[16]||(t[16]=[n("p",{class:"header"},"Contracts",-1)])]),_:1}),u(zt,{align:"right",style:{width:"100%",display:"flex","justify-content":"center"}},{default:T(()=>[n("div",hs,[ut(u(W,{flat:"",label:"Close",color:"red",onClick:t[7]||(t[7]=m=>e.openWopModal("wopClose"))},null,512),[[Dt]])])]),_:1})]),_:1},8,["class","dark"])]),_:1},8,["modelValue"])])],64)}const bs=Ze(us,[["render",Ss],["__scopeId","data-v-22fe7eac"]]),Vo=Je`
  mutation CreateSowDocumentMutation(
    $sow_id: Int!
    $reportType: String!
    $requesting_user_id: String!
    $dropboxSignatureRecipient: String
    $ProposalIntro: String
    $RemoveEngagementSummary: Boolean
    $RemoveProposalOutline: Boolean
    $RemoveServiceFees: Boolean
    $removeAnnualTotalBlock: Boolean
    $removeRequirementChecklist: Boolean
    $isEmail: Boolean
    $isVerkada: Boolean
    $showInlineHours: Boolean
    $removeImplementationDetails: Boolean
    $removeProposalOutlineImplementationDetails: Boolean
    $removeMonthlyMilestones: Boolean
    $UseQuantity: Boolean
    $engagementSummaryLaborType: Int
  ) {
    CreateSowDocumentMutation(
      sow_id: $sow_id
      reportType: $reportType
      requesting_user_id: $requesting_user_id
      dropboxSignatureRecipient: $dropboxSignatureRecipient
      ProposalIntro: $ProposalIntro
      RemoveEngagementSummary: $RemoveEngagementSummary
      RemoveProposalOutline: $RemoveProposalOutline
      RemoveServiceFees: $RemoveServiceFees
      removeAnnualTotalBlock: $removeAnnualTotalBlock
      removeRequirementChecklist: $removeRequirementChecklist
      isEmail: $isEmail
      isVerkada: $isVerkada
      showInlineHours: $showInlineHours
      removeImplementationDetails: $removeImplementationDetails
      removeProposalOutlineImplementationDetails: $removeProposalOutlineImplementationDetails
      removeMonthlyMilestones: $removeMonthlyMilestones
      UseQuantity: $UseQuantity
      engagementSummaryLaborType: $engagementSummaryLaborType
    ) {
      _id
      sow_id
      requesting_user_id
      original_name
      disk
      version
      ProposalIntro
      RemoveEngagementSummary
      RemoveProposalOutline
      RemoveServiceFees
      removeMonthlyMilestones
      removeProposalOutlineImplementationDetails
      UseQuantity
      dropboxSignatureRecipient
      isEmail
      isVerkada
      reportType
      showInlineHours
      url
      s3url
      engagementSummaryLaborType
    }
  }
`,Ts=Ke({props:{showModal:Boolean,setShowModal:{type:Function,required:!0},fetchSowDocuments:{type:Function,default:()=>{}},reportType:{type:String,default:"Direct"},sowRef:{type:Object,default:()=>{}},fetchNewSowDocument:{type:Function,default:()=>{}}},setup(e){const t=ft(),v=K(()=>parseInt(t.params.id)),w=mt("formatDateUnix"),i=$e({showDocumentModal:!1,emailSow:!1,removeEngagementSummary:!1,removeProposalOutline:!1,removeServiceFees:!1,removeAnnualTotalBlock:!0,removeRequirementChecklist:!1,isVerkada:!1,proposalIntro:"",emailValue:"",reportType:"",isDisabled:!1,showSave:!1,showExportModal:!1,helloSignEmail:"",showInlineHours:!1,removeImplementationDetails:!1,removeProposalOutlineImplementationDetails:!1,removeMonthlyMilestones:!0,UseQuantity:!1,engagementSummaryLaborType:"0"}),s=K(()=>ct().darkmode),a=f(!1),o=f({label:"Download SOW",value:"Download SOW",description:"Downloaded SOW will be downloaded directly to your computer",icon:"download"}),r=f(!1);ye(()=>e.showModal,()=>{i.showDocumentModal=e.showModal,i.showExportModal=e.showModal});async function m(O){if(i.reportType=O,O==="goBack"&&(i.showDocumentModal=!1,i.showExportModal=!0,a.value=!1),O==="eSign")a.value=!1,i.showExportModal=!1,r.value=!0;else if(O==="CDW"||O==="Direct"){a.value=!1,e.setShowModal(!1),h.notify({message:o.value.label==="Email SOW"?"Sow Document will be Emailed shortly":"Sow Document will be Downloaded shortly",color:"indigo-9"});const{mutate:H}=Ne(Vo,()=>({variables:{sow_id:v.value,requesting_user_id:k._id,original_name:e.sowRef.original_name,disk:e.sowRef.disk,version:e.sowRef.version,ProposalIntro:i.proposalIntro,RemoveEngagementSummary:i.removeEngagementSummary,RemoveProposalOutline:i.removeProposalOutline,RemoveServiceFees:i.removeServiceFees,removeRequirementChecklist:i.removeRequirementChecklist,removeAnnualTotalBlock:i.removeServiceFees?!0:i.removeAnnualTotalBlock,isEmail:o.value.label!=="Download SOW",isVerkada:i.isVerkada,showInlineHours:i.showInlineHours,reportType:O,url:e.sowRef.url,removeImplementationDetails:i.removeImplementationDetails,removeProposalOutlineImplementationDetails:i.removeProposalOutlineImplementationDetails,removeMonthlyMilestones:i.removeMonthlyMilestones,UseQuantity:i.UseQuantity,engagementSummaryLaborType:parseInt(i.engagementSummaryLaborType)}})),_=await H();console.log(_.data.CreateSowDocumentMutation,"PrintSowDocument"),e.fetchNewSowDocument&&e.fetchNewSowDocument(_.data.CreateSowDocumentMutation),o.value.label==="Download SOW"&&window.open(_.data.CreateSowDocumentMutation.s3url,"_blank")}else(O==="Open Direct"||O==="Open CDW")&&(a.value=!0,i.showModal=!1,e.setShowModal(!1),i.helloSignEmail="")}function C(){i.emailSow=!1,i.removeEngagementSummary=!1,i.removeProposalOutline=!1,i.removeServiceFees=!1,i.removeAnnualTotalBlock=!0,i.removeRequirementChecklist=!1,i.removeImplementationDetails=!1,i.removeProposalOutlineImplementationDetails=!1,i.removeMonthlyMilestones=!0,i.isVerkada=!1,i.proposalIntro="",i.emailValue="",i.UseQuantity=!1,i.isDisabled=!1,i.showSave=!1,i.engagementSummaryLaborType="0"}ye(()=>e.showModal,O=>{C(),i.showExportModal=O});const h=kt();let M="",k="";try{M=Uo.getItem("userData"),k=JSON.parse(M)}catch(O){console.log(O)}async function $(){h.notify({message:"Sent Client E-Signature Request",color:"indigo-9"}),r.value=!1,e.setShowModal(!1);const{mutate:O}=Ne(Vo,()=>({variables:{sow_id:v.value,reportType:"Direct",requesting_user_id:k._id,dropboxSignatureRecipient:i.helloSignEmail,isEmail:!1,original_name:e.sowRef.original_name,disk:e.sowRef.disk,version:e.sowRef.version,ProposalIntro:i.proposalIntro,RemoveEngagementSummary:i.removeEngagementSummary,RemoveProposalOutline:i.removeProposalOutline,RemoveServiceFees:i.removeServiceFees,removeRequirementChecklist:i.removeRequirementChecklist,removeAnnualTotalBlock:i.removeServiceFees?!0:i.removeAnnualTotalBlock,isVerkada:i.isVerkada,showInlineHours:i.showInlineHours,url:e.sowRef.url,removeImplementationDetails:i.removeImplementationDetails,removeProposalOutlineImplementationDetails:i.removeProposalOutlineImplementationDetails,removeMonthlyMilestones:i.removeMonthlyMilestones,UseQuantity:i.UseQuantity,engagementSummaryLaborType:parseInt(i.engagementSummaryLaborType)}}));await O()}ye(()=>i.helloSignEmail,()=>{});function q(){return!0}const c=K(()=>!!i.removeEngagementSummary),E=K(()=>{let O="";switch(i.engagementSummaryLaborType){case"0":O="Detailed Labor Charge";break;case"1":O="One Labor Charge";break;case"2":O="Group Labor by Implementation Type";break}return O}),I=K(()=>{let O="";switch(i.engagementSummaryLaborType){case"0":O="Shows One Labor Charge per Guideline";break;case"1":O="Shows One Labor Charge 'Labor Implementation'";break;case"2":O="Shows One Labor Charge per Implementation Type";break}return O});return{state:i,validateEmail:q,printSow:m,showPrintDialog:a,printSowOption:o,showHelloSignModal:r,sendESign:$,formatDateUnix:w,darkmode:s,sowOptions:[{label:"Email SOW",value:"Email SOW",description:"Emailed SOW will be sent to your inbox",icon:"mail"},{label:"Download SOW",value:"Download SOW",description:"Downloaded SOW will be downloaded directly to your computer",icon:"download"}],engagementSummaryLaborTypeLabel:E,engagementSummaryLaborTypeTooltip:I,disableEngagementSummaryLaborType:c}}}),ks={class:"w-full"},Cs={class:"text-h6"},Ds={key:0,class:"flex flex-col px-1"},Is={key:0,class:"flex items-center"},Ps={class:"grid grid-cols-3 items-center ml-3"},Ns={class:"mb-2 col-span-2"},Ms={class:"grid grid-cols-2 ml-2"},$s={class:"ml-3"},Os={class:"ml-3"},As={class:"col-span-2 flex flex-col ml-3 mt-5 w-1/2"},Rs={class:"flex justify-center w-full mt-10"},Ls={class:"p-0"},qs={class:"p-5 text-center"},Es={class:"text-slate-500 mt-2 mb-2"},Bs={class:"px-5 pb-5 text-center flex"};function Vs(e,t,v,w,i,s){return l(),g("div",null,[u(Ot,{modelValue:e.state.showExportModal,"onUpdate:modelValue":t[4]||(t[4]=a=>e.state.showExportModal=a),onHide:t[5]||(t[5]=a=>e.setShowModal(!1))},{default:T(()=>[u(ht,{class:F([e.darkmode?"bg-[#28334E] text-white":"","pb-2 w-[80%] sm:w-[90%] w-96"])},{default:T(()=>[u(gt,null,{default:T(()=>[t[31]||(t[31]=n("p",{class:"text-center"},"SOW Export Format?",-1)),n("p",null,[u(fl,{modelValue:e.printSowOption,"onUpdate:modelValue":t[0]||(t[0]=a=>e.printSowOption=a),filled:"",dark:e.darkmode,options:e.sowOptions,label:"SOW Print Options",color:"primary",class:"mt-2",style:{"min-wdth":"450px"},"options-selected-class":"text-deep-orange"},{option:T(a=>[u(Mt,ba(a.itemProps,{class:e.darkmode?"bg-[#26324C]":""}),{default:T(()=>[u(Xt,{avatar:""},{default:T(()=>[u(Qe,{name:a.opt.icon},null,8,["name"])]),_:2},1024),u(Xt,null,{default:T(()=>[u(Ao,null,{default:T(()=>[J(V(a.opt.label),1)]),_:2},1024),u(Ao,{caption:""},{default:T(()=>[J(V(a.opt.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1040,["class"])]),_:1},8,["modelValue","dark","options"])])]),_:1}),n("div",ks,[ut(u(W,{icon:"close",color:"red-5",flat:"","no-caps":"",class:"absolute right-0 top-1","data-testid":"close-modal-button",onClick:t[1]||(t[1]=a=>e.setShowModal(!1))},null,512),[[Dt]])]),u(zt,{class:"mx-2 -mt-4 grid grid-cols-1 gap-2 sm:grid-cols-2"},{default:T(()=>[u(W,{class:"mt-2",label:"Direct SOW - Full ",color:"primary",onClick:t[2]||(t[2]=a=>e.printSow("Open Direct"))}),u(W,{class:"mt-2 w-full",style:{"margin-left":"0rem"},label:"CDW SOW - Full ",color:"primary",onClick:t[3]||(t[3]=a=>e.printSow("Open CDW"))})]),_:1})]),_:1},8,["class"])]),_:1},8,["modelValue"]),u(Ot,{modelValue:e.showPrintDialog,"onUpdate:modelValue":t[25]||(t[25]=a=>e.showPrintDialog=a),class:"",onHide:t[26]||(t[26]=a=>e.setShowModal(!1))},{default:T(()=>[u(ht,{class:F(["container intro-y box pb-3",e.darkmode?"bg-[#28334E] text-white":""]),style:{display:"flex","flex-direction":"column","align-items":"center",width:"100%"}},{default:T(()=>[ut(u(W,{icon:"close",unelevated:"",class:"close-modal","text-color":"red",onClick:t[6]||(t[6]=a=>e.setShowModal(!1))},null,512),[[Dt]]),u(W,{icon:"info",unelevated:"",href:"https://aislabs.atlassian.net/wiki/x/CoC5Cg?atlOrigin=eyJpIjoiNDk3ZGE1YWJiMzViNDM4N2I0ZDU2NTVlZmIyZTY3NzYiLCJwIjoiYyJ9",target:"_blank"},{default:T(()=>[u(Me,{class:"text-sm border bg-white shadow-md text-black"},{default:T(()=>[...t[32]||(t[32]=[n("div",null," Confluence Documentation ",-1)])]),_:1})]),_:1}),u(gt,null,{default:T(()=>[n("div",Cs,V(e.printSowOption.label==="Email SOW"?"Email":"Download")+" "+V(e.reportType)+" "+V(e.state.reportType.split(" ")[1])+" Sow ",1)]),_:1}),u(zt,{align:"left",class:"flex flex-col"},{default:T(()=>[e.state.reportType==="Open CDW"?(l(),g("div",Ds,[t[35]||(t[35]=n("p",{class:"text-slate-400"},"Should the Document include hours in the Implementation Guideline area?",-1)),t[36]||(t[36]=n("hr",{class:"mt-2 border-slate-300 dark:border-slate-500"},null,-1)),u(dt,{modelValue:e.state.showInlineHours,"onUpdate:modelValue":t[7]||(t[7]=a=>e.state.showInlineHours=a),label:"Show Inline Hours",class:"mb-[-1rem] mt-2 -ml-2",dark:e.darkmode},null,8,["modelValue","dark"]),u(dt,{modelValue:e.state.removeImplementationDetails,"onUpdate:modelValue":t[8]||(t[8]=a=>e.state.removeImplementationDetails=a),label:"Remove Implementation Details",class:"mb-[-1rem] mt-2 -ml-2",dark:e.darkmode},{default:T(()=>[u(Me,{class:"text-sm border bg-white shadow-md text-black"},{default:T(()=>[...t[33]||(t[33]=[J(" The Implementation Details section will be hidden",-1)])]),_:1})]),_:1},8,["modelValue","dark"]),u(dt,{modelValue:e.state.removeMonthlyMilestones,"onUpdate:modelValue":t[9]||(t[9]=a=>e.state.removeMonthlyMilestones=a),label:"Remove Monthly Milestones",class:"mb-[-1rem] mt-2 -ml-2",dark:e.darkmode},{default:T(()=>[u(Me,{class:"text-sm border bg-white shadow-md text-black"},{default:T(()=>[...t[34]||(t[34]=[J(" This will hide the Recurring Milestones on the Sow Document",-1)])]),_:1})]),_:1},8,["modelValue","dark"])])):y("",!0)]),_:1}),u(zt,{align:"left",class:"flex flex-col -mt-5"},{default:T(()=>[e.state.reportType==="Open Direct"?(l(),g("div",Is,[n("div",Ps,[n("div",Ns,[t[37]||(t[37]=n("p",{class:"text-weight-medium text-slate-400 ml-2 mb-2"},"Proposal Intro",-1)),u(lt,{id:"horizontal-form-1",modelValue:e.state.proposalIntro,"onUpdate:modelValue":t[10]||(t[10]=a=>e.state.proposalIntro=a),autocomplete:"off",class:"form-control pl-2 mt-1 outline-none outline-1",filled:"",active:"",dense:"",placeholder:"Proposal Intro",style:{width:"100%",height:"38px"},disabled:e.state.isDisabled,dark:e.darkmode},null,8,["modelValue","disabled","dark"])]),u(At,{modelValue:e.state.isVerkada,"onUpdate:modelValue":t[11]||(t[11]=a=>e.state.isVerkada=a),"checked-icon":"check",color:"primary",label:"Verkada Client?","unchecked-icon":"clear",size:"md",class:"ml-2 mt-4",disable:e.state.isDisabled},null,8,["modelValue","disable"])]),t[47]||(t[47]=n("hr",{class:"w-full mx-5 border-slate-300 border-dashed dark:border-slate-500 my-3"},null,-1)),n("div",Ms,[n("div",$s,[t[41]||(t[41]=n("p",{class:"text-weight-medium text-slate-400"}," Default Options ",-1)),u(dt,{modelValue:e.state.removeMonthlyMilestones,"onUpdate:modelValue":t[12]||(t[12]=a=>e.state.removeMonthlyMilestones=a),label:"Remove Monthly Milestones",dark:e.darkmode,class:"mt-3",dense:""},{default:T(()=>[u(Me,{class:"text-sm border bg-white shadow-md text-black"},{default:T(()=>[...t[38]||(t[38]=[J(" This will hide the Recurring Milestones on the Sow Document",-1)])]),_:1})]),_:1},8,["modelValue","dark"]),u(dt,{modelValue:e.state.removeAnnualTotalBlock,"onUpdate:modelValue":t[13]||(t[13]=a=>e.state.removeAnnualTotalBlock=a),"true-value":!e.state.removeServiceFees,label:"Remove Annual Total Block",disable:e.state.isDisabled||e.state.removeServiceFees,dark:e.darkmode,class:"mt-3",dense:""},{default:T(()=>[e.state.removeServiceFees?(l(),R(Me,{key:0,class:"text-sm border bg-white shadow-md text-black"},{default:T(()=>[...t[39]||(t[39]=[J("True if Service Fees is removed",-1)])]),_:1})):y("",!0)]),_:1},8,["modelValue","true-value","disable","dark"]),u(dt,{modelValue:e.state.removeRequirementChecklist,"onUpdate:modelValue":t[14]||(t[14]=a=>e.state.removeRequirementChecklist=a),label:"Remove Requirement Checklist",dark:e.darkmode,class:"mt-3",dense:""},{default:T(()=>[u(Me,{class:"text-sm border bg-white shadow-md text-black"},{default:T(()=>[...t[40]||(t[40]=[J("Toggles the Requirement Checklist",-1)])]),_:1})]),_:1},8,["modelValue","dark"])]),n("div",Os,[t[42]||(t[42]=n("p",{class:"text-weight-medium text-slate-400"}," Proposal Outline & Fees Section ",-1)),u(dt,{modelValue:e.state.removeEngagementSummary,"onUpdate:modelValue":t[15]||(t[15]=a=>e.state.removeEngagementSummary=a),label:"Remove Engagement Summary",dark:e.darkmode,dense:"",class:"mt-3",disable:e.state.isDisabled},null,8,["modelValue","dark","disable"]),u(dt,{modelValue:e.state.removeProposalOutline,"onUpdate:modelValue":t[16]||(t[16]=a=>e.state.removeProposalOutline=a),label:"Remove Proposal Outline",disable:e.state.isDisabled,dark:e.darkmode,dense:"",class:"my-3"},null,8,["modelValue","disable","dark"]),u(dt,{modelValue:e.state.removeServiceFees,"onUpdate:modelValue":t[17]||(t[17]=a=>e.state.removeServiceFees=a),label:"Remove Service Fees",disable:e.state.isDisabled,dark:e.darkmode,dense:""},null,8,["modelValue","disable","dark"]),u(At,{modelValue:e.state.engagementSummaryLaborType,"onUpdate:modelValue":t[18]||(t[18]=a=>e.state.engagementSummaryLaborType=a),"toggle-indeterminate":"","true-value":"2","false-value":"0","indeterminate-value":"1",label:e.engagementSummaryLaborTypeLabel,disable:e.disableEngagementSummaryLaborType},{default:T(()=>[u(Me,{class:"text-sm border bg-white shadow-md text-black"},{default:T(()=>[J(V(e.engagementSummaryLaborTypeTooltip),1)]),_:1})]),_:1},8,["modelValue","label","disable"])]),n("div",As,[t[46]||(t[46]=n("p",{class:"text-weight-medium text-slate-400"}," Implementation Type Details Section ",-1)),u(dt,{modelValue:e.state.UseQuantity,"onUpdate:modelValue":t[19]||(t[19]=a=>e.state.UseQuantity=a),label:"Replace Est. Hours with Quantity",dark:e.darkmode,dense:"",class:"mt-3 text-no-wrap"},{default:T(()=>[u(Me,{class:"text-sm border bg-white shadow-md text-black"},{default:T(()=>[...t[43]||(t[43]=[J(' Replaces the "Est. Hours" Column with "Quantity"',-1)])]),_:1})]),_:1},8,["modelValue","dark"]),u(dt,{modelValue:e.state.removeProposalOutlineImplementationDetails,"onUpdate:modelValue":t[20]||(t[20]=a=>e.state.removeProposalOutlineImplementationDetails=a),label:"Remove First Implementation Details",dark:e.darkmode,dense:"",class:"my-3 text-no-wrap"},{default:T(()=>[u(Me,{class:"text-sm border bg-white shadow-md text-black"},{default:T(()=>[...t[44]||(t[44]=[J(" The Implementation Details section near the Start of the document will be hidden",-1)])]),_:1})]),_:1},8,["modelValue","dark"]),u(dt,{modelValue:e.state.removeImplementationDetails,"onUpdate:modelValue":t[21]||(t[21]=a=>e.state.removeImplementationDetails=a),label:"Remove Second Implementation Details",dark:e.darkmode,dense:"",class:"text-no-wrap"},{default:T(()=>[u(Me,{class:"text-sm border bg-white shadow-md text-black"},{default:T(()=>[...t[45]||(t[45]=[J(" The Implementation Details section at the End of the document will be hidden",-1)])]),_:1})]),_:1},8,["modelValue","dark"])])])])):y("",!0),n("div",Rs,[u(W,{label:"Go Back",color:e.darkmode?"blue-12":"blue-grey-5","no-caps":"",icon:"arrow_back",class:"text-slate-400 flex mr-5",style:{"padding-right":"1rem"},onClick:t[22]||(t[22]=a=>e.printSow("goBack"))},null,8,["color"]),e.state.reportType!=="Open CDW"?(l(),R(W,{key:0,class:"text-slate-400 flex mr-5",label:"Send for eSign","icon-right":"draw",color:"teal",onClick:t[23]||(t[23]=a=>e.printSow("eSign"))})):y("",!0),e.sowRef?.LatestSignableSowDocument!==null?(l(),R(Me,{key:1,style:{"font-size":"0.9rem"}},{default:T(()=>[J(" Last Signature Request Sent Date: "+V(e.formatDateUnix(e.sowRef?.LatestSignableSowDocument?.DropboxSignatureRequestSentDate)),1)]),_:1})):y("",!0),u(W,{label:"Create Document",color:"primary","no-caps":"",icon:"add",class:"text-slate-400 flex ml-2",style:{"padding-right":"1rem"},onClick:t[24]||(t[24]=a=>e.printSow(e.state.reportType.split(" ")[1]))})])]),_:1})]),_:1},8,["class"])]),_:1},8,["modelValue"]),u(Ot,{modelValue:e.showHelloSignModal,"onUpdate:modelValue":t[30]||(t[30]=a=>e.showHelloSignModal=a)},{default:T(()=>[u(ht,{class:F(["container intro-y box w-120 px-2 flex flex-col items-center",e.darkmode?"bg-[#28334E]":""]),dark:e.darkmode},{default:T(()=>[ut(u(W,{icon:"close",unelevated:"",class:"close-modal","text-color":"red",onClick:t[27]||(t[27]=a=>e.setShowModal(!1))},null,512),[[Dt]]),n("div",Ls,[n("div",qs,[t[49]||(t[49]=n("div",{class:"text-3xl mt-5"},"Send for E-Sign",-1)),n("div",Es,[t[48]||(t[48]=J(" Send to what email? ",-1)),u(lt,{modelValue:e.state.helloSignEmail,"onUpdate:modelValue":t[28]||(t[28]=a=>e.state.helloSignEmail=a),class:"mt-2",style:{width:"100%"},rules:[a=>!!a||"This field is required."],dark:e.darkmode,placeholder:"Email"},null,8,["modelValue","rules","dark"])])]),n("div",Bs,[ut(u(W,{class:"btn btn-outline-secondary w-24 mr-2 text-bold",color:"red-5",flat:"","no-caps":"",label:"Cancel",onClick:t[29]||(t[29]=a=>e.printSow("Open Direct"))},null,512),[[Dt]]),n("div",null,[u(W,{label:"Send For Client Signature","no-caps":"",color:"primary",class:"text-slate-400 flex mr-2",disable:!e.validateEmail(),onClick:e.sendESign},null,8,["disable","onClick"]),e.validateEmail()?y("",!0):(l(),R(Me,{key:0,class:"text-sm bg-white border shadow-md text-black"},{default:T(()=>[J(V(e.state.helloSignEmail===""?"Fill out Signature Request":"Invalid Email Address"),1)]),_:1}))])])])]),_:1},8,["dark","class"])]),_:1},8,["modelValue"])])}const da=Ze(Ts,[["render",Vs]]),js=Ke({components:{apexchart:Ka},props:{sowTotals:{type:Object,required:!0},windowWidth:{type:Number,required:!0},darkmode:{type:Boolean,default:!1}},setup(e){const t=K(()=>ct().darkmode),v=$e([{label:"Implementation Total",value:e.sowTotals?.SowLaborTotal},{label:"One-Time Total",value:e.sowTotals?.SowNonLaborOneTimeTotal},{label:"Monthly Total",value:e.sowTotals?.SowNonLaborMonthlyTotal},{label:"Yearly Total",value:e.sowTotals?.SowNonLaborYearlyTotal}]),w=f({plotOptions:{pie:{donut:{size:"55%"}}},labels:v.map(s=>s.label),legend:{labels:{colors:t.value?"#c8cfd6":"#64748B"},position:e.windowWidth<700?"bottom":"right",markers:{size:7}},theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#255aee",shadeTo:"light",shadeIntensity:.65}}}),i=f(v.map(s=>s.value));return{chartOptions:w,chartSeries:i}}});function Fs(e,t,v,w,i,s){const a=we("apexchart");return l(),R(a,{width:e.windowWidth<400?300:e.windowWidth>1700?375:350,type:"donut",options:e.chartOptions,series:e.chartSeries},null,8,["width","options","series"])}const Us=Ze(js,[["render",Fs]]),Qs=Je`
query SowLocations($sow_id: Int!) {
  SowLocations(sow_id: $sow_id) {
    data {
      _id
      sow_id
      account_physical_location_id
      AccountID
      Name
      Address1
      Address2
      City
      State
      PostalCode
      CountryID
      Active
      Primary
      Phone
    }
  }
}
`,Gs=Ke({components:{SearchModel:Ht,WorkLocation:Pn,WopModal:bs,AccountModal:Ln,ExportSowModal:da,PiChart:Us,CreateNewLocationModal:tl},props:{sow:{type:[Object,null],required:!0},updateSowAccount:{type:Function,required:!0},sowTotals:{type:Object,default:()=>{}},isSowLoading:{type:Boolean,default:!1},goToSowSection:{type:Function,required:!0}},setup(e){const t=$e({addLocation:!1,deleteModal:!1,selectAccount:!1,OpportunityTitle:e.sow&&e.sow.OpportunityTitle,overview:e.sow&&e.sow.Overview,internalNotes:e.sow&&e.sow.InternalNotes,probability:e.sow&&e.sow.probability,OpportunityStatus:e.sow&&e.sow.OpportunityStatus,OpportunityStage:e.sow&&e.sow.OpportunityStage,CdwAmEmail:e.sow&&e.sow.CdwAmEmail,MilestoneType:e.sow&&e.sow.MilestoneType,LaborContractType:e.sow&&e.sow.LaborContractType,eSign:"",helloSignEmail:"",reportType:"",shouldExitEditing:!0,showPiChart:!0}),v=mt("windowWidth"),w=ct(),i=K(()=>w.darkMode),s=ft(),a=K(()=>s.params.id),o=f(!1),r=f(!1),m=f([]),C=[{Name:"Opportunity"},{Name:"Quote"}],h=Ua(),M=Qa(),k=Ga(),$=Wa(),q=Ha();let c;const E=(d,U)=>{clearTimeout(c),c=setTimeout(d,U)};ye(()=>v.value,()=>{console.log(v.value,"windowWidth.value CHANGED IN sowDetailOverview"),t.showPiChart=!1,E(()=>{setTimeout(()=>{t.showPiChart=!0},1e3)},2e3)});function I(d){t.showModal=d}const O=kt(),H=()=>{r.value=!0},_=d=>{d==="Opportunity"?(fe(),setTimeout(()=>{},1)):d==="Quote"&&Y()},{result:Ve,load:me}=Nt(Pa,()=>({sow_idNew:a.value,first:20})),{result:Se,load:Ae}=Nt(Qo,()=>({sow_idNew:a.value,first:20})),{result:De,load:ke}=Nt(Go,()=>({sow_idNew:a.value,first:20})),qe=f([]),oe=f([]),pe=f([]),ve=K(()=>oe.value.concat(pe.value));ge(()=>{Ve.value&&(qe.value=Ve.value.SowProducts.data),Se.value&&(oe.value=Se.value.SowServices.data),De.value&&(pe.value=De.value.SowServiceBundles.data)}),nt(async()=>{const{result:d}=Le(Qs,()=>({sow_idNew:a.value,first:20}));ge(()=>{d.value&&(m.value=d.value.SowLocations.data)}),setTimeout(()=>{me(),Ae(),ke()},500)});function P(d){const S=d.toFixed(2).toString();return S==="0"||S==="1"?S:S==="1.00"?100:S[2]==="0"?S[3]:S[2]+S[3]}function x(d){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(d).replace("$","$ ")}const L=f([{value:e.sow&&e.sow.Tier1Rate,label:"Tier 1 Rate",variableLabel:"Tier1Rate"},{value:e.sow&&e.sow.Tier2Rate,label:"Tier 2 Rate",variableLabel:"Tier2Rate"},{value:e.sow&&e.sow.Tier3Rate,label:"Tier 3 Rate",variableLabel:"Tier3Rate"},{value:e.sow&&e.sow.ProjectManagerRate,label:"PM Rate",variableLabel:"ProjectManagerRate"},{value:e.sow&&e.sow.ConsultantRate,label:"Consultant Rate",variableLabel:"ConsultantRate"},{value:e.sow&&e.sow.AfterHoursRate,label:"After Hours Rate",variableLabel:"AfterHoursRate"},{value:e.sow&&e.sow.InfrastructureRate,label:"Infrastructure Rate",variableLabel:"InfrastructureRate"}]),G=f(e.isSowLoading);ye(()=>e.sow,()=>{e.sow&&(G.value=!1,at.value=e.sow.account_id,jt(),L.value[0].value=e.sow.Tier1Rate,L.value[1].value=e.sow.Tier2Rate,L.value[2].value=e.sow.Tier3Rate,L.value[3].value=e.sow.ProjectManagerRate,L.value[4].value=e.sow.ConsultantRate,L.value[5].value=e.sow.AfterHoursRate,L.value[6].value=e.sow.InfrastructureRate,t.OpportunityTitle=e.sow.OpportunityTitle,t.overview=e.sow.Overview)});const ae=f("");async function fe(){try{const d={sow_idNew:a.value},{mutate:U}=Ne(ll,()=>({variables:d}));await U(),O.notify({message:"Opportunity sent to AutoTask",color:"indigo-9"})}catch(d){O.notify({message:d.response.errors[0].message,color:"red-9"}),console.log("Error",d)}}async function Y(){try{const d={sow_idNew:a.value},{mutate:U}=Ne(nl,()=>({variables:d}));await U(),O.notify({message:"Quote in AT was created",color:"indigo-9"})}catch(d){O.notify({message:d.response.errors[0].message,color:"red-9"}),console.log("Error",d)}}async function Ie(d){console.log(d,"variables updateSOW");try{const{mutate:U,error:S}=Ne(sl);console.log(S.value,"error SOW");const X=await U(d);console.log(X,"SOW Updated"),ae.value=""}catch(U){console.error(U,"error sow")}}function j(d,U){console.log("updateSowData, id, type",d,U),d==="close"?setTimeout(()=>{t.shouldExitEditing?ae.value="":t.shouldExitEditing=!0},500):Ie({_id:a.value,[U]:d})}const ie=f(null),re=f(null),Ee=f(null);function Xe(d){ae.value=d,d==="Overview"?Vt(()=>{ie.value.focus()}):d==="internalNotes"?Vt(()=>{Ee.value.focus()}):d==="probability"&&Vt(()=>{re.value.focus()})}async function je(d){try{const{mutate:U}=Ne(dl,()=>({variables:d})),{data:S}=await U();t.addLocation=!1,pt("create",S.CreateSowLocationMutation),console.log(S,"data Created SOW Location")}catch(U){console.error(U)}}function pt(d,U){if(d==="create")Object.isExtensible(m.value)||(m.value=[...m.value]),m.value.push(U);else if(d==="update")m.value=m.value.map(S=>(S._id===U._id&&(S.Address1=U.Address1,S.City=U.City,S.State=U.State,S.PostalCode=U.PostalCode,S.Phone=U.Phone),S));else if(d==="delete"){Object.isExtensible(m.value)||(m.value=[...m.value]);const S=m.value.findIndex(X=>X._id===U._id);S!==-1&&m.value.splice(S,1)}}function Fe(d){d!=="close"?je({sow_idNew:a.value,account_physical_location_id:d}):t.addLocation=!1}const We=io();async function St(){try{const d={_id:a.value};O.loading.show({delay:400,message:"Copying SOW and redirecting...",spinnerSize:100,spinnerColor:"primary",messageColor:"white",backgroundColor:"primary"});const{mutate:U}=Ne(il),{data:S}=await U(d);We.push({path:"/sow_details/"+S.CreateCopySowMutation._id}),setTimeout(()=>{location.reload(),O.loading.hide()},1e3),setTimeout(()=>{He(!0)},5e3),setTimeout(()=>{He(!0)},1e4)}catch(d){console.error(d)}}async function D(){t.deleteModal=!1;try{const d={_id:a.value};O.loading.show({delay:400,message:"Deleting SOW and Redirecting...",spinnerSize:100,spinnerColor:"primary",messageColor:"white",backgroundColor:"primary"});const{mutate:U}=Ne(rl);await U(d),O.loading.hide(),We.push({path:"/sows"})}catch(d){console.error(d)}}const de=f([]),Ce=(d,U)=>{ae.value=U.label,Vt(()=>{de[d].focus()})},tt=d=>U=>{de[d]=U},at=f(e.sow&&e.sow.account_id);function He(d){at.value!==null?t.selectAccount=!1:t.selectAccount=d}ye(()=>s.path,()=>{s.path.includes("sow_details")&&setTimeout(()=>{e.sow&&!at.value&&He(!0)},7e3)},{immediate:!0});const bt=K(()=>t.overview!==null&&t.overview!==""&&t.overview!==void 0?t.overview.replace(/\n/g,"<br/>"):"N/A"),{result:Ct,loading:wt}=Le(ul,()=>({search:h.search,page:h.page,first:20})),Ye=f([]),vt=f(!1),A=f("");ge(()=>{if(wt.value&&(vt.value=!0),h.search&&A.value!==h.search&&(Ye.value=[],vt.value=!0,A.value=h.search),Ct.value){vt.value=!1;let d=Ye.value;const U=Ct.value.CdwAMs.data.filter(S=>!Ye.value.some(X=>X.id===S.id));h.page>1?Ye.value=[...Ye.value,...U]:Ye.value=[...U,...Ye.value],xe.setSpinner(Ye.value,d)}});function Q(d,U){if(console.log("focus tracker: "+d),U==="close")setTimeout(()=>{ae.value="",t.addLocation=!1},400);else if(d==="CdwAMs"){let S=function(X){console.log("ITEM DAN THE H MAN",X),X==="close"?setTimeout(()=>{t.shouldExitEditing?ae.value="":t.shouldExitEditing=!0},500):j(X.id,"cdw_am_id")};h.onSetValueCallback(S)}else if(d==="Milestone"){let S=function(X){j(X.id,"MilestoneType")};k.onSetValueCallback(S)}else if(d==="Labor Type"){let S=function(X){j(X.value,"LaborContractType")};$.onSetValueCallback(S)}else if(d==="Opportunity"){let S=function(X){j(X.autotask_id,"opportunity_id")};q.onSetValueCallback(S)}else if(d==="Locations"){let S=function(X){console.log("fetchLocations setTheLocation()"),Fe(X.autotask_id)};it(),console.log("fetchLocations"),M.onSetValueCallback(S)}}const ce=f([]),ze=f(!1),{result:rt,loading:st,load:jt}=Nt(Ja,()=>({companyID:at.value,title:q.search,page:q.page,first:15})),qt=f("");ge(()=>{if(st.value&&(ze.value=!0),q.search&&qt.value!==q.search&&(ce.value=[],ze.value=!0,qt.value=q.search),rt.value){ze.value=!1,console.log(rt.value,"opporunitiesData");const d=rt.value.Opportunities.data.filter(U=>!ce.value.some(S=>S.id===U.id));q.page>1?ce.value=[...ce.value,...d]:ce.value=[...d,...ce.value]}});const It=f([]),le=f(!1),{result:Re,loading:Be,error:Ue,load:it}=Nt(Xo,()=>({Address:t.search,companyID:at.value,first:50})),yt=f(null);ge(()=>{if(Ue.value&&console.log(Ue.value),Be.value&&(le.value=!0),Re.value){le.value=!1;let d=It.value;It.value=Re.value.CompanyLocations.data,xe.setSpinner(It.value,d)}});function Pt(d){if(console.log("computedAddress",d),d==="Search Location")return"Search Location";{let U=d.address1+", "+d.city+" "+d.state+", "+d.postalCode;return d.address2!==""?d.address2+", "+U:U}}function Rt(d){d!==void 0?t.isCreateNew=d:t.isCreateNew=!1}function Yt(d){d&&(t.search=d.address1+", "+d.city+" "+d.state+", "+d.postalCode,t.selectedID=d._id),t.isMenuOpenTemplate=!1,setTimeout(()=>{t.isMenuOpenTemplate=!0},500)}function N(d,U){d.key==="Enter"&&d.shiftKey||(d.key==="Enter"?this.editField="":U==="probability"&&d.target.value>100&&setTimeout(()=>{d.target.value=100,t.probability=100},200))}const z=f(null);return{getFormattedOverviewText:bt,inputRef:tt,overviewRef:ie,setEditField:Xe,inputRefs:de,focusInputField:Ce,copySow:St,deleteSow:D,createSowLocation:Fe,state:t,updateSowData:j,updateSow:Ie,tiers:L,editField:ae,sowLocations:m,createInAT:H,createATModal:r,ProjectAT:C,createAutoTask:_,createOpportunity:fe,createQuote:Y,formatTotal:x,setToPercentage:P,handleSowLocationUpdates:pt,showHelloSignModal:o,route:s,setShowModal:I,setAccountModal:He,windowWidth:v,probabilityRef:re,internalNotesRef:Ee,LaborTypes:al,Milestones:ol,focusTracker:Q,isOpportunityLoading:ze,opportunities:ce,isCdwAMsLoading:vt,cdwAMs:Ye,setCreateNew:Rt,setLocation:Yt,computedAddress:Pt,defaultLocation:yt,locations:It,isLocationLoading:le,fetchLocations:it,searchOptionsOpportunity:q,searchOptionsLocation:M,searchOptionsMilestone:k,searchOptionsBase:$,searchOptionsCdwAM:h,handleKeyDown:N,darkmode:i,isHoveringItem:z,loading:G,accountId:at,sowProducts:qe,sowServices:oe,sowServiceBundles:pe,computedSowAllServices:ve}}}),Ws={class:"column",style:{"min-height":"200px"}},Hs={class:"col-auto"},Ys={class:"md:grid md:grid-cols-3 flex"},zs={class:"col-4 col-sm-4 ml-5"},Zs={key:0},Ks={class:"col-4 col-sm-4 ml-5 text-slate-900 dark:text-slate-300"},Js={key:0},Xs={class:"col column relative flex justify-center items-center sm:items-start"},_s={class:"flex"},xs={key:0,class:"ml-3"},ei={class:"w-full sm:grid sm:grid-cols-2",style:{"min-height":"250px"}},ti={key:0,class:"relative"},oi={class:"ml-2 text-slate-500 transition-all duration-500 absolute top-7 right-5 sm:-right-5"},ai={key:0},li={key:0},ni={key:1,class:"flex items-center my-3"},si={class:"relative flex items-center justify-center ml-8"},ii={class:"ml-12"},ri={class:"ml-5 flex sm:flex-row sm:flex-no-wrap text-slate-600 mb-10 sm:mb-0 text-sm sm:text-xs 2xl:ml-24"},di={class:"pl-2 2xl:-mt-10"},ui={class:"dark:text-slate-300 flex"},mi={key:0,class:"-mr-3 ml-3"},ci={class:"my-0 dark:text-slate-300 flex"},pi={key:0,class:"-mr-3 ml-3"},fi={class:"dark:text-slate-300 flex"},wi={key:0,class:"-mr-3 ml-3"},vi={class:"h-80 ml-[2.5%] w-[95%] sm:ml-[10%] sm:w-[90%] md:w-[80%] 2xl:w-[80%] mt-0 sm:-mt-6 sm:ml-3 mb-16 sm:mb-28 flex flex-col items-center"},yi={class:"text-lg bold mb-2 text-slate-500 dark:text-slate-300"},gi={class:"p-1 pl-3 grid grid-cols-2 sm:grid-cols-2 md:grid-cols-6 w-full flex justify-center"},hi={key:0,class:"flex items-center w-32"},Si=["onClick"],bi={class:"cursor-pointer text-center sm:text-left"},Ti={class:"text-slate-500"},ki={class:"grid grid-cols-4 sm:flex sm:flex-wrap w-[100%] ml-[-0rem] sm:flex-row justify-center md:ml-0 lg:mt-[-10rem] md:mt-[-10rem] mt-[-5rem] md:flex-row md:justify-center items-center lg:mt-0 md:w-full"},Ci={class:"flex items-start justify-start",style:{"max-width":"100vw"}},Di={class:"flex my-5 ml-5"},Ii={class:"text-slate-500"},Pi={key:0},Ni={class:"flex mb-5 ml-5"},Mi={class:"text-slate-500"},$i={key:0},Oi={class:"flex mb-5 ml-5"},Ai={class:"text-slate-500"},Ri={key:0},Li={class:"mt-5"},qi={key:0},Ei={class:"flex ml-5 w-full"},Bi={class:"text-slate-500"},Vi=["innerHTML"],ji={class:"grid grid-cols-2 md:grid-cols-3 mt-5"},Fi={class:"flex ml-5 col-span-2 sm:col-span-1 md:col-span-2"},Ui={class:"text-slate-500"},Qi={key:0},Gi={class:"flex mt-5 sm:mt-0 md:-mr-10 md:justify-end ml-5 mb-5 md:mb-0"},Wi={class:"inline"},Hi={class:"p-0"},Yi={class:"px-5 pb-5 text-center"};function zi(e,t,v,w,i,s){const a=we("PiChart"),o=we("WopModal"),r=we("SearchModel"),m=we("WorkLocation"),C=we("CreateNewLocationModal"),h=we("ExportSowModal"),M=we("AccountModal");return l(),g("div",{class:F(["responsive-overview-container card rounded-lg shadow-md q-card p-5 mt-5 animate__fadeIn md:px-1 mb-10",e.darkmode?"bg-[#28344F]":"bg-white border"]),style:{"animation-duration":"1s"}},[n("div",Ws,[n("div",Hs,[n("div",Ys,[n("div",zs,[e.editField!=="Opportunity"?(l(),g("p",{key:0,class:"cursor-pointer md:w-64 text-slate-900 dark:text-slate-300","data-cy":"opportunity",onClick:t[4]||(t[4]=k=>e.setEditField("Opportunity"))},[n("span",{class:"text-slate-500",onMouseover:t[0]||(t[0]=k=>e.isHoveringItem="Opportunity"),onMouseleave:t[1]||(t[1]=k=>e.isHoveringItem=null)},[t[44]||(t[44]=J(" Opportunity ",-1)),u(Qe,{name:"edit",class:"ml-1",color:e.isHoveringItem==="Opportunity"?"blue-6":"blue-grey-3"},null,8,["color"])],32),t[45]||(t[45]=n("br",null,null,-1)),e.loading?y("",!0):(l(),g("span",{key:0,onMouseover:t[2]||(t[2]=k=>e.isHoveringItem="Opportunity"),onMouseleave:t[3]||(t[3]=k=>e.isHoveringItem=null)},V(e.state.OpportunityTitle??"N/A"),33))])):y("",!0),e.loading?(l(),R(he,{key:1,class:"h-2 w-40 mt-2"})):y("",!0)]),n("div",{class:F(["col-4 col-sm-4 mr-10 text-light text-slate-900 dark:text-slate-300",e.state.OpportunityTitle!==null&&e.windowWidth<500?"ml-5 mb-2":"ml-10"])},[t[46]||(t[46]=n("span",{class:"text-slate-500"},"Status",-1)),t[47]||(t[47]=n("br",null,null,-1)),e.loading?y("",!0):(l(),g("span",Zs,V(e.sow.OpportunityStatus??"N/A"),1)),e.loading?(l(),R(he,{key:1,class:"h-2 w-40 mt-2"})):y("",!0)],2),n("div",Ks,[t[48]||(t[48]=n("span",{class:"text-slate-500"},"Stage",-1)),t[49]||(t[49]=n("br",null,null,-1)),e.loading?y("",!0):(l(),g("span",Js,V(e.sow.OpportunityStage===null||e.sow.OpportunityStage===""?"N/A":e.sow.OpportunityStage),1)),e.loading?(l(),R(he,{key:1,class:"h-2 w-40 mt-2"})):y("",!0)])]),t[50]||(t[50]=n("hr",{class:"border-dashed mt-3 border-gray-300 dark:border-gray-500"},null,-1))]),n("div",Xs,[n("div",{class:F(["col-4 col-sm-4 -ml-5 sm:ml-5 mt-5 flex justify-center sm:justify-start",e.darkmode&&"text-slate-300"])},[n("b",_s,[t[51]||(t[51]=J(" Annual Total: ",-1)),e.loading?y("",!0):(l(),g("span",xs,V(e.sowTotals&&e.sowTotals.AnnualTotal.toLocaleString("en-US",{style:"currency",currency:"USD"})),1))]),e.loading?(l(),R(he,{key:0,class:"h-3 w-32 mt-1 ml-4"})):y("",!0)],2),n("div",ei,[n("div",null,[e.sowTotals&&e.state.showPiChart&&!e.loading?(l(),g("div",ti,[u(a,{class:"mt-3",sowTotals:e.sowTotals,windowWidth:e.windowWidth,darkmode:e.darkmode},null,8,["sowTotals","windowWidth","darkmode"]),n("div",oi,[n("div",{class:"bg-slate-500 hover:bg-blue-400 px-2 rounded-full text-white cursor-pointer",onClick:t[5]||(t[5]=k=>e.goToSowSection("implementations"))},[J(V(e.sow.relatedImplementationTypes?.length)+" ",1),u(Qe,{name:"layers",clas:"ml-2"}),u(Me,{style:{"font-size":"0.9rem"},class:"bg-white border shadow-md text-black"},{default:T(()=>[t[52]||(t[52]=n("b",null,"Implementation Types:",-1)),(l(!0),g(Oe,null,Ge(e.sow.relatedImplementationTypes&&e.sow.relatedImplementationTypes,(k,$)=>(l(),g("div",{key:$},[n("li",null,V(k.Name),1)]))),128))]),_:1})]),n("div",{class:"bg-slate-500 hover:bg-green-400 px-2 rounded-full text-white cursor-pointer my-2",onClick:t[6]||(t[6]=k=>e.goToSowSection("implementations"))},[J(V(e.sowProducts.length)+" ",1),u(Qe,{name:"layers",clas:"ml-2"}),u(Me,{style:{"font-size":"0.9rem"},class:"bg-white border shadow-md text-black"},{default:T(()=>[t[53]||(t[53]=n("b",null,"Products:",-1)),e.sowProducts.length===0?(l(),g("div",ai,"N/A")):y("",!0),(l(!0),g(Oe,null,Ge(e.sowProducts,(k,$)=>(l(),g("div",{key:$},[n("li",null,V(k.Name),1)]))),128))]),_:1})]),n("div",{class:"bg-slate-500 hover:bg-orange-300 px-2 rounded-full text-white cursor-pointer",onClick:t[7]||(t[7]=k=>e.goToSowSection("implementations"))},[J(V(e.sowServices.length+e.sowServiceBundles.length)+" ",1),u(Qe,{name:"layers",clas:"ml-2"}),u(Me,{style:{"font-size":"0.9rem"},class:"bg-white border shadow-md text-black"},{default:T(()=>[t[54]||(t[54]=n("b",null,"Services & Bundles:",-1)),e.sowServiceBundles.length===0?(l(),g("div",li,"N/A")):(l(!0),g(Oe,{key:1},Ge(e.computedSowAllServices,(k,$)=>(l(),g("div",{key:$},[n("li",null,[n("i",null,V(k.__typename==="SowServiceBundle"?"Bundle -":""),1),J(" "+V(k.Name),1)])]))),128))]),_:1})])])])):(l(),g("div",ni,[n("div",si,[u(he,{bordered:"",class:"bg-primary border-2 border-gray-300",size:"8rem",type:"circle"}),t[55]||(t[55]=n("div",{class:"bg-slate-300 dark:bg-[#28344F] h-16 w-16 absolute z-10 rounded-full border-2 border-grey-300"},null,-1))]),n("div",ii,[u(he,{class:"h-2 w-20 mt-3"}),u(he,{class:"h-2 w-20 mt-3"}),u(he,{class:"h-2 w-20 mt-3"}),u(he,{class:"h-2 w-20 mt-3"})])])),n("div",ri,[t[59]||(t[59]=n("div",{class:"flex flex-col sm:items-center ml-6 mb-2 sm:ml-0 sm:mb-0"},[n("p",{class:"break-words italic sm:-pr-10 w-full sm:w-40 text-left mt-4 dark:text-slate-300"}," These Costs are ESTIMATED ")],-1)),n("div",di,[n("p",ui,[t[56]||(t[56]=n("span",{class:"text-slate-500 dark:text-slate-400"},"Total Non-Labor Costs: ",-1)),e.loading?y("",!0):(l(),g("b",mi,V(e.sowTotals&&e.sowTotals.SowProductTotalCost.toLocaleString("en-US",{style:"currency",currency:"USD"})),1)),e.loading?(l(),R(he,{key:1,class:"h-2 w-10 ml-2 mt-1"})):y("",!0)]),n("p",ci,[t[57]||(t[57]=n("span",{class:"text-slate-500 dark:text-slate-400"},"Total Labor Costs: ",-1)),e.loading?y("",!0):(l(),g("b",pi,V(e.sowTotals&&e.sowTotals.SowLaborTotalCost.toLocaleString("en-US",{style:"currency",currency:"USD"})),1)),e.loading?(l(),R(he,{key:1,class:"h-2 w-10 ml-2 mt-1"})):y("",!0)]),n("p",fi,[t[58]||(t[58]=n("span",{class:"text-slate-500 dark:text-slate-400"},"Sow Milestone Costs: ",-1)),e.loading?y("",!0):(l(),g("b",wi,V(e.sowTotals&&e.sowTotals.SowMilestoneGrandTotal.toLocaleString("en-US",{style:"currency",currency:"USD"})),1)),e.loading?(l(),R(he,{key:1,class:"h-2 w-10 ml-2 mt-1"})):y("",!0)])])])]),n("div",vi,[n("p",yi,[t[61]||(t[61]=J(" Labor Rates ",-1)),u(Qe,{class:"ml-2 text-slate-500 hover:text-blue-400 transition-all duration-500",name:"help"},{default:T(()=>[u(Me,{style:{"font-size":"0.9rem"},class:"bg-white border shadow-md text-black"},{default:T(()=>[...t[60]||(t[60]=[J("Labor Rates will effect Implementation Pricing",-1)])]),_:1})]),_:1})]),n("div",{class:F(["h-56 md:h-44 pb-10 rounded-xl w-full ml-0 md:ml-5",e.darkmode?"bg-[#2f3a57]":"bg-slate-50"])},[n("div",gi,[(l(!0),g(Oe,null,Ge(e.tiers,(k,$)=>(l(),g("div",{key:$,class:F(["ml-2",$>2?"col-span-1 md:col-span-3 ":"col-span-1 md:col-span-2"])},[e.editField===k.label?(l(),g("div",hi,[u(lt,{ref_for:!0,ref:e.inputRef($),modelValue:k.value,"onUpdate:modelValue":q=>k.value=q,modelModifiers:{number:!0},type:"number",class:F(["mb-0 mt-1",$>2?"col-span-3 ":"w-2/3"]),standout:"bg-slate-50",dark:e.darkmode,dense:"",label:k.label,"edit-field":e.editField,filled:"","data-cy":k.variableLabel,onChange:q=>e.updateSow({_id:e.sow._id,[k.variableLabel]:k.value}),onKeyup:eo(q=>e.updateSow({_id:e.sow._id,[k.variableLabel]:k.value}),["enter"]),onFocusout:t[8]||(t[8]=q=>e.editField="")},null,8,["modelValue","onUpdate:modelValue","class","dark","label","edit-field","data-cy","onChange","onKeyup"])])):(l(),g("div",{key:1,class:"p-1 pb-2",onClick:q=>e.focusInputField($,k)},[n("p",bi,[n("span",Ti,V(k.label),1),t[62]||(t[62]=n("br",null,null,-1)),e.loading?y("",!0):(l(),g("span",{key:0,class:F(e.darkmode?"text-slate-300":"text-slate-900")},V(k.value.toLocaleString("en-US",{style:"currency",currency:"USD"})),3)),e.loading?(l(),R(he,{key:1,class:"h-3 w-12 mt-1 w-14"})):y("",!0)])],8,Si))],2))),128))])],2)])]),n("div",ki,[u(W,{"no-caps":"","icon-right":"arrow_forward",class:"p-2 q-mx-sm q-mb-sm col-span-2 bg-slate-600 hover:text-white text-slate-200 hover:bg-blue-500 2xl:px-5",dense:"",glossy:"",label:"Create in AT",onClick:e.createInAT},null,8,["onClick"]),u(W,{dense:"",glossy:"","no-caps":"","icon-right":"arrow_forward",class:"p-2 q-mx-sm q-mb-sm col-span-2 bg-slate-600 hover:text-white text-slate-200 hover:bg-blue-500 2xl:px-5",label:"Print Sow",onClick:t[9]||(t[9]=k=>e.setShowModal(!0))}),u(o,{sow:e.sow,sowTotals:e.sowTotals},null,8,["sow","sowTotals"]),t[63]||(t[63]=n("div",null,null,-1)),t[64]||(t[64]=n("div",null,null,-1)),u(W,{"no-caps":"","icon-right":"content_copy",dense:"",glossy:"",class:"p-2 q-mr-sm q-mb-sm col-span-2 bg-slate-600 text-slate-200 hover:text-white hover:bg-slate-500 2xl:px-5",label:"Copy Sow",onClick:e.copySow},null,8,["onClick"]),u(W,{"no-caps":"",glossy:"",dense:"","icon-right":"delete",class:"p-2 q-mx-sm q-mb-sm col-span-2 bg-slate-600 text-slate-200 hover:text-white hover:bg-red-500 2xl:px-5",label:"Delete Sow",onClick:t[10]||(t[10]=k=>e.state.deleteModal=!0)})]),t[78]||(t[78]=n("hr",{class:"mt-5 mb-3 border-dashed border-gray-300"},null,-1)),n("div",Ci,[n("div",null,[n("div",Di,[e.editField!=="CdwAM"?(l(),g("p",{key:0,class:"mr-20 cursor-pointer text-slate-900 dark:text-slate-300","data-cy":"cdw-am",onClick:t[11]||(t[11]=k=>e.setEditField("CdwAM")),onMouseover:t[12]||(t[12]=k=>e.isHoveringItem="CdwAM"),onMouseleave:t[13]||(t[13]=k=>e.isHoveringItem=null)},[n("span",Ii,[t[65]||(t[65]=J("CDW AM ",-1)),u(Qe,{name:"edit",class:"ml-1",color:e.isHoveringItem==="CdwAM"?"blue-6":"blue-grey-3"},null,8,["color"])]),t[66]||(t[66]=n("br",null,null,-1)),e.loading?y("",!0):(l(),g("span",Pi,V(e.sow.CdwAmEmail??"N/A"),1)),e.loading?(l(),R(he,{key:1,class:"h-3 w-20 mt-2"})):y("",!0)],32)):y("",!0),e.editField==="CdwAM"?(l(),R(r,{key:1,label:"CdwAMs",value:"email",rows:e.cdwAMs,loading:e.isCdwAMsLoading,class:"w-4/5",filled:"",dense:"",focusTracker:e.focusTracker,store:e.searchOptionsCdwAM,perPageAmount:20},null,8,["rows","loading","focusTracker","store"])):y("",!0)]),n("div",Ni,[e.editField!=="Milestone"?(l(),g("p",{key:0,class:"mr-20 w-40 cursor-pointer text-slate-900 dark:text-slate-300","data-cy":"milestone",onClick:t[14]||(t[14]=k=>e.setEditField("Milestone")),onMouseover:t[15]||(t[15]=k=>e.isHoveringItem="Milestone"),onMouseleave:t[16]||(t[16]=k=>e.isHoveringItem=null)},[n("span",Mi,[t[67]||(t[67]=J("Milestone ",-1)),u(Qe,{name:"edit",class:"ml-1",color:e.isHoveringItem==="Milestone"?"blue-6":"blue-grey-3"},null,8,["color"])]),t[68]||(t[68]=n("br",null,null,-1)),e.loading?y("",!0):(l(),g("span",$i,V(e.sow.MilestoneTypeName),1)),e.loading?(l(),R(he,{key:1,class:"h-3 w-20 mt-2"})):y("",!0)],32)):y("",!0),e.editField==="Milestone"?(l(),R(r,{key:1,label:"Milestone",rows:e.Milestones,loading:!1,class:"w-4/5",filled:"",dense:"",focusTracker:e.focusTracker,store:e.searchOptionsMilestone},null,8,["rows","focusTracker","store"])):y("",!0)]),n("div",Oi,[e.editField!=="LaborType"?(l(),g("p",{key:0,class:"mr-20 cursor-pointer text-slate-900 dark:text-slate-300","data-cy":"labor-type",onClick:t[17]||(t[17]=k=>e.setEditField("LaborType")),onMouseover:t[18]||(t[18]=k=>e.isHoveringItem="LaborType"),onMouseleave:t[19]||(t[19]=k=>e.isHoveringItem=null)},[n("span",Ai,[t[69]||(t[69]=J("Labor Contract Type ",-1)),u(Qe,{name:"edit",class:"ml-1",color:e.isHoveringItem==="LaborType"?"blue-6":"blue-grey-3"},null,8,["color"])]),t[70]||(t[70]=n("br",null,null,-1)),e.loading?y("",!0):(l(),g("span",Ri,V(e.sow.LaborContractType==="FixedFee"?"Fixed Fee":e.sow.LaborContractType==="BlockHours"?"Block Hours":e.sow.LaborContractType==="TMFullHour"?"Time and Materials":e.sow.LaborContractType??"N/A"),1)),e.loading?(l(),R(he,{key:1,class:"h-3 w-32 mt-2"})):y("",!0)],32)):y("",!0),e.editField==="LaborType"?(l(),R(r,{key:1,label:"Labor Type",rows:e.LaborTypes,loading:!1,class:"w-4/5",dense:"",filled:"",focusTracker:e.focusTracker,store:e.searchOptionsBase},null,8,["rows","focusTracker","store"])):y("",!0)])]),n("div",Li,[(l(!0),g(Oe,null,Ge(e.sowLocations,(k,$)=>(l(),R(m,{key:k.autotask_id,index:$,location:k,sow:e.sow,handleSowLocationUpdates:e.handleSowLocationUpdates,sowLocations:e.sowLocations,setCreateNew:e.setCreateNew,loading:e.loading},null,8,["index","location","sow","handleSowLocationUpdates","sowLocations","setCreateNew","loading"]))),128)),e.sowLocations.length<3?(l(),g("div",qi,[e.state.addLocation?(l(),R(r,{key:1,label:"Locations",rows:e.locations,loading:e.isLocationLoading,value:e.computedAddress,class:"ml-5 md:ml-0",dense:"",focusTracker:e.focusTracker,isCreateNew:!0,setCreateNew:e.setCreateNew,store:e.searchOptionsLocation,perPageAmount:50},null,8,["rows","loading","value","focusTracker","setCreateNew","store"])):(l(),R(W,{key:0,label:"Add Location",outline:"",class:"md:ml-0 md:mb-0 mb-5 ml-5",style:{color:"#5ca5ee"},icon:"add","no-caps":"",onClick:t[20]||(t[20]=k=>e.state.addLocation=!0)}))])):y("",!0),u(C,{isCreateNew:e.state.isCreateNew,setAddMode:e.setCreateNew,setLocation:e.setLocation,accountId:e.accountId,refetchAccountLocations:e.fetchLocations},null,8,["isCreateNew","setAddMode","setLocation","accountId","refetchAccountLocations"])])]),n("div",Ei,[e.editField!=="Overview"?(l(),g("div",{key:0,class:"mr-20 cursor-pointer text-slate-900 dark:text-slate-300",onClick:t[21]||(t[21]=k=>e.setEditField("Overview")),onMouseover:t[22]||(t[22]=k=>e.isHoveringItem="Overview"),onMouseleave:t[23]||(t[23]=k=>e.isHoveringItem=null)},[n("span",Bi,[t[71]||(t[71]=J("Overview ",-1)),u(Qe,{name:"edit",class:"ml-1",color:e.isHoveringItem==="Overview"?"blue-6":"blue-grey-3"},null,8,["color"])]),t[72]||(t[72]=n("br",null,null,-1)),e.loading?(l(),R(he,{key:0,class:"h-8 w-80 mt-1"})):(l(),g("p",{key:1,innerHTML:e.getFormattedOverviewText},null,8,Vi))],32)):y("",!0),e.editField==="Overview"?(l(),R(lt,{key:1,ref:"overviewRef",modelValue:e.state.overview,"onUpdate:modelValue":t[24]||(t[24]=k=>e.state.overview=k),filled:"",type:"textarea",class:"w-full",label:"Overview",dark:e.darkmode,dense:"",onFocusout:t[25]||(t[25]=k=>e.editField=""),onChange:t[26]||(t[26]=k=>e.updateSow({_id:e.sow._id,Overview:e.state.overview})),onKeydown:e.handleKeyDown},null,8,["modelValue","dark","onKeydown"])):y("",!0)]),n("div",ji,[n("div",Fi,[e.editField!=="internalNotes"?(l(),g("div",{key:0,class:"mr-20 cursor-pointer text-slate-900 dark:text-slate-300",onClick:t[27]||(t[27]=k=>e.setEditField("internalNotes")),onMouseover:t[28]||(t[28]=k=>e.isHoveringItem="internalNotes"),onMouseleave:t[29]||(t[29]=k=>e.isHoveringItem=null)},[n("span",Ui,[t[73]||(t[73]=J("Internal Notes ",-1)),u(Qe,{name:"edit",class:"ml-1",color:e.isHoveringItem==="internalNotes"?"blue-6":"blue-grey-3"},null,8,["color"])]),t[74]||(t[74]=n("br",null,null,-1)),e.loading?y("",!0):(l(),g("p",Qi,V(e.sow.internalNotes??"N/A"),1)),e.loading?(l(),R(he,{key:1,class:"h-3 w-40 mt-2"})):y("",!0)],32)):y("",!0),e.editField==="internalNotes"?(l(),R(lt,{key:1,ref:"internalNotesRef",modelValue:e.state.internalNotes,"onUpdate:modelValue":t[30]||(t[30]=k=>e.state.internalNotes=k),filled:"",type:"textarea",placeholder:"Internal Notes",class:"w-full",label:"Internal Notes",dark:e.darkmode,dense:"",onFocusout:t[31]||(t[31]=k=>e.editField=""),onChange:t[32]||(t[32]=k=>e.updateSow({_id:e.sow._id,internalNotes:e.state.internalNotes})),onKeydown:e.handleKeyDown},null,8,["modelValue","dark","onKeydown"])):y("",!0)]),n("div",Gi,[e.editField!=="probability"?(l(),g("div",{key:0,class:"mr-20 cursor-pointer text-slate-900 dark:text-slate-300",onClick:t[33]||(t[33]=k=>e.setEditField("probability"))},[t[76]||(t[76]=n("span",{class:"text-slate-500"},"Probability",-1)),u(Qe,{name:"help",class:"text-slate-500 hover:text-blue-400 transition-all duration-500 cursor-default absolute ml-2",size:"xs"},{default:T(()=>[u(Me,{style:{"font-size":"0.9rem"},class:"bg-white border shadow-md text-black"},{default:T(()=>[...t[75]||(t[75]=[J("Probability of winning the Opportunity",-1)])]),_:1})]),_:1}),t[77]||(t[77]=n("br",null,null,-1)),e.loading?y("",!0):(l(),g("p",{key:0,class:F(e.darkmode?"text-slate-300":"")},V(e.sow.probability?e.sow.probability+" %":"N/A"),3)),e.loading?(l(),R(he,{key:1,class:"h-3 w-16 mt-2"})):y("",!0)])):y("",!0),e.editField==="probability"?(l(),R(lt,{key:1,ref:"probabilityRef",modelValue:e.state.probability,"onUpdate:modelValue":t[34]||(t[34]=k=>e.state.probability=k),modelModifiers:{number:!0},type:"number",filled:"",label:"Probability",class:"mr-5 w-28",placeholder:"0 - 100 %",maxlength:3,dark:e.darkmode,dense:"",onFocusout:t[35]||(t[35]=k=>e.editField=""),onChange:t[36]||(t[36]=k=>e.updateSow({_id:e.sow._id,probability:e.state.probability>100?100:e.state.probability})),onKeydown:t[37]||(t[37]=k=>e.handleKeyDown(k,"probability"))},null,8,["modelValue","dark"])):y("",!0)])])])]),u(h,{showModal:e.state.showModal,setShowModal:e.setShowModal,sowRef:e.sow,reportType:e.state.reportType},null,8,["showModal","setShowModal","sowRef","reportType"]),u(Ot,{modelValue:e.createATModal,"onUpdate:modelValue":t[41]||(t[41]=k=>e.createATModal=k)},{default:T(()=>[u(ht,{class:F(["container intro-y box w-72",e.darkmode?"bg-[#28334E]":""]),style:{display:"flex","flex-direction":"column","align-items":"center",padding:"0.5rem","padding-bottom":"0px"},dark:e.darkmode},{default:T(()=>[u(W,{icon:"close",unelevated:"",class:"close-modal",style:{"margin-right":"-0.5rem"},"text-color":"red",onClick:t[38]||(t[38]=k=>e.createATModal=!1)}),u(gt,{style:{"margin-top":"-0.5rem","margin-bottom":".-5rem"}},{default:T(()=>[...t[79]||(t[79]=[n("div",{class:"text-h6"},"Create in AutoTask",-1)])]),_:1}),u(zt,{align:"right"},{default:T(()=>[n("div",Wi,[ut(u(W,{label:"Opportunity",color:"primary",style:{"margin-right":"1rem"},class:"text-slate-400 inline-flex mb-2 ml-2",onClick:t[39]||(t[39]=k=>e.createAutoTask("Opportunity"))},null,512),[[Dt]]),ut(u(W,{label:"Quote",color:"primary",style:{"margin-right":"1rem"},class:"text-slate-400 inline-flex mb-2 ml-2",onClick:t[40]||(t[40]=k=>e.createAutoTask("Quote"))},null,512),[[Dt]])])]),_:1})]),_:1},8,["dark","class"])]),_:1},8,["modelValue"]),u(Ot,{modelValue:e.state.deleteModal,"onUpdate:modelValue":t[43]||(t[43]=k=>e.state.deleteModal=k)},{default:T(()=>[u(ht,{class:F(["container intro-y box w-80 px-2 flex flex-col items-center",e.darkmode?"bg-[#28334E]":""]),dark:e.darkmode},{default:T(()=>[n("div",Hi,[t[80]||(t[80]=n("div",{class:"p-5 text-center"},[n("div",{class:"text-3xl mt-5"},"Are you sure?"),n("div",{class:"text-slate-500 mt-2 mb-2"}," Do you really want to delete this Sow? ")],-1)),n("div",Yi,[u(W,{class:"btn btn-outline-secondary w-24 mr-2",label:"Cancel",flat:"",onClick:t[42]||(t[42]=k=>e.state.deleteModal=!1)}),u(W,{class:"btn btn-outline-secondary w-24 mr-2",color:"red-5",label:"Delete",onClick:e.deleteSow},null,8,["onClick"])])])]),_:1},8,["dark","class"])]),_:1},8,["modelValue"]),u(M,{selectAccount:e.state.selectAccount,setAccountModal:e.setAccountModal,route:e.route,updateSowAccount:e.updateSowAccount},null,8,["selectAccount","setAccountModal","route","updateSowAccount"])],2)}const Zi=Ze(Gs,[["render",zi]]),Ki=Ke({components:{SearchModel:Ht},props:{fetchGuidel:{type:Function,default:()=>{}},setAddMode:{type:Function,default:()=>{}},cardAddMode:{type:String,default:"Guideline"},setGuideline:{type:Function,default:()=>{}},associatedImplementation:{type:Object,default:()=>{}},showComponentModal:{type:String,default:""},setShowComponentModal:{type:Function,default:()=>{}},pushNewResponseData:{type:Function,default:()=>{}},excludedItems:{type:[Array,Object],default:()=>[]},refetchComponentType:{type:Function,default:()=>{}}},setup(e){const t=Wt(),v=$e({name:"",componentId:null,details:"",quantity:1,isOpt:!1,isAlrImp:!1,overridePrice:null,unitPrice:0,showModal:!1,whichOne:"false",resetName:!1,hasService:!1,hasProduct:!1,isMenuOpen:!1,page:1,showSpinner:!1,billingUnitType:"",shouldResetSearch:!1});let w=f(window.innerWidth);const i=()=>{w.value=window.innerWidth};nt(()=>{window.addEventListener("resize",i)}),to(()=>{window.removeEventListener("resize",i)});const s=K(()=>ct().darkmode),a=f(null);function o(){e.showComponentModal==="Guideline"?(k.value=[],O()):e.showComponentModal==="Product"?($.value=[],H()):e.showComponentModal==="Service"?(q.value=[],_()):e.showComponentModal==="Service Bundle"&&(c.value=[],Ve())}let r;const m=(P,x)=>{clearTimeout(r),r=setTimeout(P,x)};ye(()=>e.searchFilterOutExisting,()=>{o()}),ye(()=>xe.getState.search,()=>{m(async()=>{I.value=!0,k.value=[],$.value=[],q.value=[],c.value=[]},500)},{deep:!0});function C(){v.isMenuOpen=!0}const h=ft(),M=K(()=>h.params.id),k=f([]),$=f([]),q=f([]),c=f([]);function E(P){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(P).replace("$","$ ")}ye(()=>v.overridePrice,()=>{v.overridePrice===0&&(v.quantity=0)}),nt(()=>{v.showModal=!0,o(),xe.setSearch(""),xe.setPage(1),xe.onSetValueCallback(pe)});const I=f(!1),O=async()=>{const{result:P,loading:x}=Le(ko,()=>({sow_idNew:M.value,Name:xe.getState.search,implementation_type_idNew:e.associatedImplementation._id,page:xe.getState.page,first:30,filterOutExistingSowGuidelines:!0}));ge(()=>{if(x.value&&(I.value=!0),P.value){console.log(P.value.ImplementationGuidelines.data,"guidelineData"),I.value=!1;const L=k.value;P.value&&P.value.ImplementationGuidelines&&(k.value=[...k.value,...P.value.ImplementationGuidelines.data.filter(G=>e.excludedItems.guidelines&&!e.excludedItems.guidelines.includes(G._id))],xe.setSpinner(k.value,L))}})},H=async()=>{const{result:P,error:x,loading:L}=Le(Co,()=>({name:xe.getState.search,page:xe.getState.page,sow_idNew:M.value,filterOutAllSowProducts:!0,first:30,orderBy:[{column:"SOW_COUNT",order:"DESC"}]}));ge(()=>{if(x.value&&console.log(x.value),L.value&&(I.value=!0),P.value){I.value=!1;const G=$.value;P.value&&P.value.Products&&($.value=[...$.value,...P.value.Products.data.filter(ae=>e.excludedItems.products&&!e.excludedItems.products.includes(ae.autotask_id))],xe.setSpinner($.value,G))}})},_=async()=>{const{result:P,loading:x}=Le(Do,()=>({name:xe.getState.search,page:xe.getState.page,sow_idNew:M.value,filterOutAllSowServices:!0,first:30,orderBy:[{column:"SOW_COUNT",order:"DESC"}]}));ge(()=>{if(x.value&&(I.value=!0),P.value){console.log(P.value,"ServiceData"),I.value=!1;const L=q.value;P.value&&P.value.Services&&(q.value=[...q.value,...P.value.Services.data.filter(G=>e.excludedItems.services&&!e.excludedItems.services.includes(G.autotask_id))],xe.setSpinner(q.value,L))}})},Ve=async()=>{const{result:P,error:x,loading:L}=Le(Io,()=>({name:xe.getState.search,page:xe.getState.page,sow_idNew:M.value,filterOutAllSowServiceBundles:!0,first:30,orderBy:[{column:"SOW_COUNT",order:"DESC"}]}));ge(()=>{if(L.value&&(I.value=!0),x.value&&console.log(x.value),P.value){I.value=!1;const G=c.value;P.value&&P.value.ServiceBundles&&(c.value=[...c.value,...P.value.ServiceBundles.data.filter(ae=>e.excludedItems.serviceBundles&&!e.excludedItems.serviceBundles.includes(ae.autotask_id))],xe.setSpinner(c.value,G))}})};async function me(){try{let P={implementation_guideline_idNew:v.componentId,sow_idNew:M.value,quantity:v.quantity,sow_detail:v.details,IsAlreadyImplemented:v.isAlrImp,IsOptional:v.isOpt};v.name.includes("Discount")&&(P={...P,PriceOverride:v.overridePrice});const{mutate:x}=Ne(Wo),{data:L}=await x(P),G=L.CreateSowGuidelineMutation;(G.HasSowProducts||G.HasSowServices)&&(G.HasSowProducts&&t.fetchSowProducts(),G.HasSowServices&&(t.fetchSowServices(),t.fetchSowServiceBundles())),e.pushNewResponseData("guideline","create",G,e.associatedImplementation._id)}catch(P){console.error(P)}}async function Se(){try{const P={product_id:v.componentId,sow_idNew:M.value,PriceOverride:v.overridePrice,Quantity:v.quantity,IsOptional:v.isOpt,IsAlreadyImplemented:v.isAlrImp,sow_implementation_type_idNew:e.associatedImplementation.sow_implementation_type_id},{mutate:x}=Ne(ho),{data:L}=await x(P),G=L.CreateSowProductMutation;e.pushNewResponseData(G.BillingFrequency==="One-Time"?"product":"service","create",G,e.associatedImplementation._id)}catch(P){console.error(P)}}async function Ae(){try{const P={service_id:v.componentId,sow_idNew:M.value,PriceOverride:v.overridePrice,Quantity:v.quantity,IsOptional:v.isOpt,sow_implementation_type_idNew:e.associatedImplementation.sow_implementation_type_id},{mutate:x,error:L}=Ne(go),{data:G}=await x(P);console.log(L.value,"error",G,"data");const ae=G.CreateSowServiceMutation;e.pushNewResponseData("service","create",ae,e.associatedImplementation._id)}catch(P){console.error(P)}}async function De(){try{const P={service_bundle_id:v.componentId,sow_idNew:M.value,PriceOverride:v.overridePrice,Quantity:v.quantity,sow_implementation_type_idNew:e.associatedImplementation.sow_implementation_type_id},{mutate:x}=Ne(yo),{data:L}=await x(P),G=L.CreateSowServiceBundleMutation;e.pushNewResponseData("service","create",G,e.associatedImplementation._id)}catch(P){console.error(P)}}function ke(P,x){switch(P){case"Guideline":me();break;case"Product":Se();break;case"Service":Ae();break;case"Service Bundle":De()}oe(v.name),x==="close"?e.setShowComponentModal(!1):x==="another"&&(v.componentId=null,v.name="",v.unitPrice=0,v.componentSearch="",v.isAlrImp=!1,xe.setSearch(""),xe.setPage(1),v.shouldResetSearch=!v.shouldResetSearch)}const qe=kt();function oe(){qe.notify({message:e.showComponentModal+" Added: "+v.name.substring(0,40)+(v.name.substring(0,40).length>=40?"...":""),timeout:3e3,icon:"check",color:"indigo"})}function pe(P){v.componentId=P._id??P.autotask_id,v.name=P.Name??P.name,v.unitPrice=P.unitPrice??P.UnitPrice??0,v.componentSearch=P.Name,v.billingUnitType=P.BillingUnitType,v.isMenuOpen=!1}const ve=K(()=>{switch(e.showComponentModal){case"Guideline":return k.value;case"Product":return $.value;case"Service":return q.value;case"Service Bundle":return c.value;default:return"no results were found"}});return{state:v,createSowComponent:ke,formatTotal:E,guidelines:k,products:$,services:q,computedComponent:ve,setComponentValue:pe,handleInputClick:C,componentSearchRef:a,isLoading:I,darkmode:s,windowWidth:w}}}),Ji={class:"text-xl my-2 text-center"},Xi={class:"text-md mt-2 text-center"},_i={key:0,class:"text-slate-500 text-center mt-2"},xi={class:""},er={style:{width:"100%",overflow:"hidden"}},tr={key:1,class:"pb-1"},or={class:"absolute bottom-0 right-0 form-check form-switch relative w-full sm:w-auto sm:ml-auto mt-4 mb-20 sm:mt-0"},ar={class:"flex absolute right-0 bottom-[-1.5rem] sm:bottom-[-2rem]"},lr={class:"font-light"},nr={class:"dark:text-slate-300 ml-2 mr-1"},sr={class:"flex no-wrap",style:{position:"absolute",right:"0px",bottom:"1rem"}},ir={key:0};function rr(e,t,v,w,i,s){const a=we("SearchModel");return l(),R(Ot,{modelValue:e.state.showModal,"onUpdate:modelValue":t[7]||(t[7]=o=>e.state.showModal=o),onClickOutside:t[8]||(t[8]=o=>e.setShowComponentModal(!1))},{default:T(()=>[u(ht,{class:F(["container intro-y box",e.darkmode?"bg-[#28334E] text-grey-3":""])},{default:T(()=>[u(gt,{class:"col flex flex-col"},{default:T(()=>[ut(u(W,{icon:"close",color:"red-5",flat:"","no-caps":"",class:"absolute right-0 top-1","data-testid":"close-modal-button",onClick:t[0]||(t[0]=o=>e.setShowComponentModal(!1))},null,512),[[Dt]]),n("p",Ji,"Attach a "+V(e.showComponentModal),1),t[10]||(t[10]=n("hr",{style:{width:"100%"}},null,-1)),n("p",Xi,[t[9]||(t[9]=n("span",{class:"font-light mr-3"},"Associated Implementation:",-1)),J(" "+V(e.associatedImplementation.name),1)]),e.state.billingUnitType==="NonLaborOnly"?(l(),g("p",_i,[u(Qe,{name:"info",class:"text-primary"}),J(" "+V(e.state.billingUnitType.split(/(?=[A-Z])/).join(" "))+" Guideline (attaches the associated Product/Service) ",1)])):y("",!0)]),_:1}),u(gt,{class:"items-center"},{default:T(()=>[n("div",xi,[n("div",er,[u(a,{label:e.showComponentModal+"s",rows:e.computedComponent,"no-focus":"",popupWidth:"20rem",value:e.showComponentModal==="Guideline"?["Question","Name"]:"name",filled:"",loading:e.isLoading,perPageAmount:30,resetSearch:e.state.shouldResetSearch,class:"component-search","cy-data":"component-search"},null,8,["label","rows","value","loading","resetSearch"]),u(lt,{id:"regular-form-1",modelValue:e.state.quantity,"onUpdate:modelValue":t[1]||(t[1]=o=>e.state.quantity=o),modelModifiers:{number:!0},class:F(["form-control my-5 quantity-input",e.darkmode?"bg-[#202a46]":""]),"cy-data":"quantity-input",type:"number",label:"How Many?",filled:"",dark:e.darkmode},null,8,["modelValue","dark","class"]),e.showComponentModal!=="Guideline"||e.state.name.includes("Discount")?(l(),R(lt,{key:0,id:"regular-form-1",modelValue:e.state.overridePrice,"onUpdate:modelValue":t[2]||(t[2]=o=>e.state.overridePrice=o),modelModifiers:{number:!0},class:F(["form-control price-input",e.darkmode?"bg-[#202a46]":""]),type:"number",filled:"",label:e.state.name.includes("Discount")?"One-Time Discount":"Price Override",dark:e.darkmode},null,8,["modelValue","label","dark","class"])):(l(),g("div",tr)),n("div",or,[n("div",ar,[n("p",lr,V(e.cardAddMode==="Guideline"||e.cardAddMode==="Product"?"One-Time":"Recurring")+" Payment: ",1),n("p",nr,V(e.state.overridePrice===null||e.state.overridePrice===0||e.state.overridePrice===void 0||e.state.overridePrice===""?e.formatTotal(e.state.isAlrImp?0:e.state.unitPrice*e.state.quantity):e.formatTotal(e.state.isAlrImp?0:e.state.overridePrice*e.state.quantity)),1)]),n("div",{class:F(["flex flex-col mt-0 sm:mt-3 ml-[-.5rem]",e.windowWidth<475?"-mt-8":"absolute"])},[e.showComponentModal==="Guideline"||e.showComponentModal==="Product"?(l(),R(At,{key:0,modelValue:e.state.isAlrImp,"onUpdate:modelValue":t[3]||(t[3]=o=>e.state.isAlrImp=o),dense:"",class:"form-check-input mr-0 ml-3 mb-2 sm:mb-4 w-48",size:"lg",label:"Already Implemented","checked-icon":"check","unchecked-icon":"close"},null,8,["modelValue"])):y("",!0),u(At,{modelValue:e.state.isOpt,"onUpdate:modelValue":t[4]||(t[4]=o=>e.state.isOpt=o),"checked-icon":"check","unchecked-icon":"close",dense:"",size:"lg",class:"form-check-input mr-0 ml-3 w-40",label:"Is Optional"},null,8,["modelValue"])],2)])]),n("div",sr,[u(W,{class:"save-btn q-px-md mr-3",dark:e.darkmode,"no-caps":"",flat:"",label:e.state.componentId?"Add Another":"Cancel",color:e.darkmode?"grey-5":"grey-8",onClick:t[5]||(t[5]=o=>e.state.componentId?e.createSowComponent(e.showComponentModal,"another"):e.setShowComponentModal(!1))},null,8,["dark","label","color"]),n("div",null,[e.state.componentId===null?(l(),R(Me,{key:0,class:"bg-white text-black text-sm border shadow-md"},{default:T(()=>[e.state.componentId===null?(l(),g("span",ir,"Select a "+V(e.showComponentModal),1)):y("",!0)]),_:1})):y("",!0),u(W,{disable:e.state.componentId===null,class:"save-btn q-px-md",style:{"margin-right":"1.5rem","margin-left":"0rem"},"no-caps":"",label:"Save & Close",color:"primary",onClick:t[6]||(t[6]=o=>e.createSowComponent(e.showComponentModal,"close"))},null,8,["disable"])])])])]),_:1})]),_:1},8,["class"])]),_:1},8,["modelValue"])}const dr=Ze(Ki,[["render",rr]]),ur=Ke({props:{readyGuidelineCreate:Boolean,guideline:{type:Object,default:()=>{}},pushNewResponseData:{type:Function,default:()=>{}},impleSearchID:{type:Number,default:null},refetchComponentType:{type:Function,default:()=>{}},addToTotal:{type:Function,default:()=>{}},setNeededGuideline:{type:Function,default:()=>{}},setFirstSowGuidelineId:{type:Function,default:()=>{}}},setup(e){const t=ft(),v=K(()=>t.params.id),w=K(()=>ct().darkmode),i=Wt(),s=$e({name:e.guideline.Name,isNeeded:!1,quantityValue:1,detailsValue:"",isOptional:!1,isAlreadyImplemented:!1,totalPrice:0,neededGuidelines:[],priceOverride:null});ye(()=>e.readyGuidelineCreate,()=>{a()},{immediate:!0});function a(){s.isNeeded&&m()}let o;const r=($,q)=>{clearTimeout(o),o=setTimeout($,q)};async function m(){try{const $={implementation_guideline_idNew:e.guideline._id,sow_idNew:v.value,quantity:s.quantityValue,IsAlreadyImplemented:s.isAlreadyImplemented,IsOptional:s.isOptional,PriceOverride:s.priceOverride},{mutate:q}=Ne(Wo,()=>({variables:$})),{data:c}=await q($),E=c.CreateSowGuidelineMutation;e.refetchComponentType(E.HasSowProducts,E.HasSowServices,E),E.HasSowProducts&&i.fetchSowProducts(),E.HasSowServices&&(i.fetchSowServices(),i.fetchSowServiceBundles()),r(()=>{e.setFirstSowGuidelineId(E._id)},5e3),setTimeout(()=>{console.log(e.guideline,"selected guideline ðŸ˜…ðŸ˜…ðŸ˜…ðŸ˜…ðŸ˜…"),E.BillingFrequency==="One-Time"?e.pushNewResponseData("guideline","create",E):e.pushNewResponseData("service","create",E)},1e3),setTimeout(()=>{console.log("currently doesnt really do anything"),e.guideline.ImplementationGuidelineProducts.length>0&&e.guideline.ImplementationGuidelineProducts.forEach(I=>{I.IsOptional===!1&&i.pushNewResponseData("product","create",{...I,...I.Product,Name:I.Product.name})}),e.guideline.ImplementationGuidelineServices.length>0&&e.guideline.ImplementationGuidelineServices.forEach(I=>{I.IsOptional===!1&&i.pushNewResponseData("service","create",{...I,...I.Service,Name:I.Service.name})}),e.guideline.ImplementationGuidelineServiceBundles.length>0&&e.guideline.ImplementationGuidelineServiceBundles.forEach(I=>{I.IsOptional===!1&&i.pushNewResponseData("service","create",{...I,...I.ServiceBundle,Name:I.ServiceBundle.name})})},2e3)}catch($){console.error($)}}function C(){s.totalPrice+=e.guideline.AISSellPrice*s.quantityValue}function h($){s.isNeeded=$,e.setNeededGuideline(e.guideline,$)}setTimeout(()=>{C()},1);function M(){s.isNeeded=!1,s.name=e.guideline.Name,s.quantityValue=1,s.detailsValue="",e.guideline.IncludeOnSowByDefault&&(e.addToTotal("add",e.guideline),h(!0))}M(),ye(()=>e.impleSearchID,()=>{h(!1),e.guideline.IncludeOnSowByDefault&&h(!0),setTimeout(()=>{M()},750)},{immediate:!0}),ye(()=>s.isNeeded,()=>{s.isNeeded?e.addToTotal("add",e.guideline):e.addToTotal("remove",e.guideline)});function k($,q,c){(s.isAlreadyImplemented||s.isOptional)&&(s.totalPrice=0),console.log($,q,c)}return{state:s,changeGuidelineProperties:k,setIsNeeded:h,darkmode:w}}}),mr={key:0,class:"ml-3 italic"},cr={style:{display:"flex"}};function pr(e,t,v,w,i,s){return l(),g(Oe,null,[ut((l(),R(Mt,{clickable:"",class:F(["flex items-center",{"text-white":e.darkmode,"text-black":!e.darkmode,"dark:border-b dark:border-slate-600":e.state.isNeeded}]),dark:e.darkmode,onClick:t[1]||(t[1]=a=>e.setIsNeeded(!e.state.isNeeded))},{default:T(()=>[u(dt,{"model-value":e.state.isNeeded,label:e.guideline.Question===null?e.guideline.Name:e.guideline.Question,dense:"",dark:e.darkmode,onClick:t[0]||(t[0]=a=>e.setIsNeeded(!e.state.isNeeded))},null,8,["model-value","label","dark"]),e.guideline.BillingUnitType==="NonLaborOnly"?(l(),g("p",mr,V(e.guideline.BillingUnitType.split(/(?=[A-Z])/).join(" ")),1)):y("",!0)]),_:1},8,["class","dark"])),[[Ta]]),e.state.isNeeded?(l(),R(Mt,{key:0,class:"flex flex-col sm:flex-row",dark:e.darkmode},{default:T(()=>[n("div",cr,[u(lt,{modelValue:e.state.name,"onUpdate:modelValue":t[2]||(t[2]=a=>e.state.name=a),dense:"",class:F(["name-input",e.guideline.Name.includes("One-Time Discount")?"w-40":"w-60"]),placeholder:"Name",filled:"",label:"Name","cy-data":"guideline-name",dark:e.darkmode},{default:T(()=>[u(Me,{class:"text-black border shadow-md bg-white text-sm",delay:500},{default:T(()=>[J(V(e.guideline.Name),1)]),_:1})]),_:1},8,["modelValue","class","dark"]),u(lt,{modelValue:e.state.quantityValue,"onUpdate:modelValue":t[3]||(t[3]=a=>e.state.quantityValue=a),modelModifiers:{number:!0},type:"number",dense:"",class:"q-ml-md w-28 quantity-input",placeholder:"Quantity...",filled:"","cy-data":"guideline-quantity",label:"How Many?",dark:e.darkmode},null,8,["modelValue","dark"]),e.guideline.Name.includes("One-Time Discount")?(l(),R(lt,{key:0,modelValue:e.state.priceOverride,"onUpdate:modelValue":t[4]||(t[4]=a=>e.state.priceOverride=a),modelModifiers:{number:!0},type:"number",dense:"",class:"q-ml-md w-28 quantity-input",filled:"","cy-data":"guideline-discount",label:"Discount",dark:e.darkmode},null,8,["modelValue","dark"])):y("",!0)]),n("div",{style:{display:"flex"},class:F(["mt-3 sm:mt-0",e.darkmode?"text-white":"text-black"])},[u(At,{modelValue:e.state.isAlreadyImplemented,"onUpdate:modelValue":t[5]||(t[5]=a=>e.state.isAlreadyImplemented=a),label:"Already Implemented",class:"implemented-checkbox ml-3",dense:"","cy-data":"guideline-alr-implemented","checked-icon":"check","unchecked-icon":"close",onClick:t[6]||(t[6]=a=>e.changeGuidelineProperties(e.state.isAlreadyImplemented,"IsAlreadyImplemented",e.id))},null,8,["modelValue"]),u(At,{modelValue:e.state.isOptional,"onUpdate:modelValue":t[7]||(t[7]=a=>e.state.isOptional=a),label:"Optional",class:"implemented-checkbox ml-3",dense:"","checked-icon":"check","unchecked-icon":"close",onClick:t[8]||(t[8]=a=>e.changeGuidelineProperties(e.state.isAlreadyImplemented,"IsAlreadyImplemented",e.id))},null,8,["modelValue"])],2)]),_:1},8,["dark"])):y("",!0)],64)}const ua=Ze(ur,[["render",pr]]),fr=Ke({components:{AssociatedGuidelines:ua,ListQTable:ro},props:{impleSearch:{type:String,default:""},addMode:{type:Boolean,default:!1},impleSearchID:{type:Number,default:null},setShowImpleModal:{type:Function,required:!0},pushNewResponseData:{type:Function,default:()=>{}},refetchComponentType:{type:Function,default:()=>{}},isBuilderMode:{type:Boolean,default:!1},isBuilderCreatingImplementation:{type:Boolean,default:!1},setSowImplementationID:{type:Function,default:()=>{}}},setup(e){const t=ft(),v=K(()=>t.params.id),w=ct(),i=K(()=>w.darkMode),s=$e({guidelines:[],readyGuidelineCreate:!1,totalPrice:0,isImpleMore:!1,customName:"",optionalInt:0,isOptional:!1,impleId:null,showAssociatedGuidelines:!0,shouldShowTabs:!1,loading:!0,showComponentType:"Guidelines",showComponentModal:"",search:""}),a=f([]);function o(D,de){a.value.some(Ce=>Ce._id===D._id)?a.value.forEach(Ce=>{Ce._id===D._id&&(Ce.isNeeded=de,Ce.isSelected=de)}):a.value.push(D)}const r=mt("formatTotal"),m=async()=>{const{result:D,error:de}=Le(ko,()=>({implementation_type_id:s.impleId,first:20}));ge(()=>{de.value&&console.error(de.value),D.value&&(a.value=D.value.ImplementationGuidelines.data.map(Ce=>({...Ce,isNeeded:!1,isSelected:!1,Quantity:1})),s.showAssociatedGuidelines=!0,s.loading=!1)})};ye(()=>e.impleSearchID,()=>{s.impleId=e.impleSearchID,e.impleSearchID!==null&&(s.showAssociatedGuidelines=!1,m())},{immediate:!0});function C(D,de){D==="add"?s.totalPrice+=de.UnitPrice:D==="remove"&&(s.totalPrice-=de.UnitPrice)}const h=Wt(),M=f({});async function k(){try{const{mutate:D}=Ne(Ho,()=>({variables:{implementation_type_idNew:e.impleSearchID,sow_idNew:v.value,sow_detail:s.customName,IsOptional:!1}})),Ce=(await D()).data.CreateSowImplementationTypeMutation;M.value=Ce,setTimeout(()=>{e.setSowImplementationID(Ce._id,Ce,a.value),h.fetchSowImplementations(),s.shouldShowTabs=!1,s.showComponentType="Guidelines"},1500),e.pushNewResponseData("implementation","create",Ce),s.readyGuidelineCreate=!s.readyGuidelineCreate,Ve.notify({message:"Implementation Type Added: "+e.impleSearch.substring(0,40)+(e.impleSearch.substring(0,40).length>=40?"...":""),timeout:2e3,icon:"done",color:"indigo"})}catch(D){console.error(D)}}async function $(D){try{console.log(D,M.value,"createSowProduct");const de={product_id:D.autotask_id,sow_idNew:v.value,PriceOverride:D.PriceOverride,Quantity:D.Quantity,IsOptional:D.IsOptional,IsAlreadyImplemented:D.IsAlreadyImplemented,sow_implementation_type_idNew:M.value._id},{mutate:Ce}=Ne(ho),{data:tt}=await Ce(de),at=tt.CreateSowProductMutation;e.pushNewResponseData(at.BillingFrequency==="One-Time"?"product":"service","create",at,M.value._id)}catch(de){console.error(de)}}async function q(D){try{const de={service_id:D.autotask_id,sow_idNew:v.value,PriceOverride:D.PriceOverride,Quantity:D.Quantity,IsOptional:D.IsOptional,sow_implementation_type_idNew:M.value._id},{mutate:Ce,error:tt}=Ne(go),{data:at}=await Ce(de);console.log(tt.value,"error",at,"data");const He=at.CreateSowServiceMutation;e.pushNewResponseData("service","create",He,M.value._id)}catch(de){console.error(de)}}async function c(D){try{const de={service_bundle_id:D.autotask_id,sow_idNew:v.value,PriceOverride:D.PriceOverride,Quantity:D.Quantity,sow_implementation_type_idNew:M.value._id},{mutate:Ce}=Ne(yo),{data:tt}=await Ce(de),at=tt.CreateSowServiceBundleMutation;e.pushNewResponseData("service","create",at,M.value._id)}catch(de){console.error(de)}}const E=f([]),I=f([]),O=f([]),H=f([]),_=f(null);ye(()=>_.value,()=>{console.log(_.value,"firstSowGuidelineId",E.value,"sProducts",I.value,"sServices",O.value,"sServiceBundles",M.value,"newSowImplementationType"),E.value.map(D=>{$(D)}),I.value.map(D=>{q(D)}),O.value.map(D=>{c(D)}),setTimeout(()=>{E.value=[],I.value=[],O.value=[]},3e3)});const Ve=kt();function me(){k(),setTimeout(()=>{e.setShowImpleModal(!1)},1e3)}ye(()=>e.isBuilderCreatingImplementation,()=>{console.log(e.isBuilderCreatingImplementation,"isBuilderCreatingImplementation"),me()});const Se=f([]),Ae=f([]),De=f([]),ke=f(0),qe=f(0),{result:oe}=Le(Co,()=>({first:15,page:s.page,name:s.search,sow_idNew:v.value,filterOutAllSowProducts:!0})),{result:pe}=Le(Do,()=>({first:15,page:s.page,name:s.search,sow_idNew:v.value,filterOutAllSowServices:!0})),{result:ve}=Le(Io,()=>({first:15,page:s.page,name:s.search,sow_idNew:v.value,filterOutAllSowServiceBundles:!0}));ge(()=>{oe.value&&(console.log(oe.value.Products.data,"products on RESULT"),Se.value=oe.value.Products.data.map(D=>{const de=E.value.find(Ce=>Ce.autotask_id===D.autotask_id);return de?{...D,isSelected:f(!0),Quantity:de.Quantity,PriceOverride:de.PriceOverride}:{...D,isSelected:f(!1),Quantity:f(1),PriceOverride:f(D.unitPrice)}}),ke.value=oe.value.Products.paginatorInfo.lastPage)}),ge(()=>{pe.value&&(Ae.value=pe.value.Services.data.map(D=>{const de=I.value.find(Ce=>Ce.autotask_id===D.autotask_id);return de?{...D,isSelected:f(!0),Quantity:de.Quantity,PriceOverride:de.PriceOverride}:{...D,isSelected:f(!1),Quantity:f(1),PriceOverride:f(D.unitPrice)}}),qe.value=pe.value.Services.paginatorInfo.lastPage)}),ge(()=>{ve.value&&(De.value=ve.value.ServiceBundles.data.map(D=>{const de=O.value.find(Ce=>Ce.autotask_id===D.autotask_id);return de?{...D,isSelected:f(!0),Quantity:de.Quantity,PriceOverride:de.PriceOverride}:{...D,isSelected:f(!1),Quantity:f(1),PriceOverride:f(D.unitPrice)}}))});const P={name:"isAlreadyImplemented",required:!0,label:"Already Implemented",align:"center",field:D=>D.IsAlreadyImplemented?"Yes":"No"},x={name:"isOptional",required:!0,label:"Optional",align:"center",field:D=>D.IsOptional?"Yes":"No"};ye(()=>s.showComponentType,()=>{s.showComponentType==="Guidelines"?(s.page=1,Y.some(D=>D.name==="isAlreadyImplemented")||Y.splice(1,0,P),Y.some(D=>D.name==="isOptional")||Y.splice(2,0,x),Y.some(D=>D.name==="priceOverride")&&Y.splice(3,1),Y.some(D=>D.name==="periodType")&&Y.splice(4,1)):(Y.some(D=>D.name==="priceOverride")||Y.splice(2,0,ae),Y.some(D=>D.name==="isAlreadyImplemented")&&Y.splice(1,1),Y.some(D=>D.name==="isOptional")&&Y.splice(2,1),Y.some(D=>D.name==="periodType")||Y.splice(3,1,fe),s.showComponentType==="Products"||s.showComponentType==="Services"||s.showComponentType)});const L=K(()=>s.showComponentType==="Guidelines"?a.value:s.showComponentType==="Products"?(console.log(Se.value,oe.value,"COMPONENT ROWS"),Se.value):s.showComponentType==="Services"?(console.log(Ae.value,"COMPONENT ROWS"),Ae.value):s.showComponentType==="Service Bundles"?(console.log(De.value,"COMPONENT ROWS"),De.value):[]);function G(){s.shouldShowTabs=!s.shouldShowTabs,s.shouldShowTabs?s.showComponentType="Products":s.showComponentType="Guidelines"}const ae={name:"priceOverride",required:!0,label:"Unit Price",align:"left",field:D=>r(D.PriceOverride),format:D=>`${D}`,sortable:!0},fe={name:"periodType",required:!0,label:"Period Type",align:"left",field:D=>D.PeriodType==="m"?"Monthly":D.PeriodType==="y"?"Yearly":D.PeriodType==="o"?"One-Time":D.PeriodType??D.PeriodTypeName,format:D=>`${D}`,sortable:!0},Y=$e([{name:"builderName",align:"left",label:"Name",field:D=>D.Name||D.name?D.Name??D.name:D.SkillName,format:D=>`${D}`,sortable:!0},ae,{name:"quantity",required:!0,label:"Quantity",align:"left",field:D=>D.Quantity?D.quantity??1:D.Quantity??1,format:D=>`${D}`},fe]);function Ie(D){console.log(D,"setSelectedRow"),D.isSelected===!0?(D.isSelected=!1,ie(D)):(D.isSelected=!0,j(D))}function j(D){D.__typename==="Product"?E.value.push(D):D.__typename==="Service"?I.value.push(D):D.__typename==="ServiceBundle"?O.value.push(D):H.value.push(D)}function ie(D){D.__typename==="Product"?E.value.splice(E.value.findIndex(de=>de.autotask_id===D.autotask_id),1):D.__typename==="Service"?I.value.splice(I.value.findIndex(de=>de.autotask_id===D.autotask_id),1):D.__typename==="ServiceBundle"?O.value.splice(O.value.findIndex(de=>de.autotask_id===D.autotask_id),1):H.value.splice(H.value.findIndex(de=>de._id===D._id),1)}const re=f(1),Ee=f(1),Xe=f(1);function je(D){s.page=D,console.log(D,"setPage"),s.showComponentType==="Products"?re.value=D:s.showComponentType==="Services"?Ee.value=D:s.showComponentType==="Service Bundles"&&(Xe.value=D)}function pt(D){console.log(D,"updateAttachedComponent"),D.__typename==="Product"?E.value.map(de=>{de.autotask_id===D.autotask_id&&(de.Quantity=D.Quantity,de.PriceOverride=D.PriceOverride)}):D.__typename==="Service"?I.value.map(de=>{de.autotask_id===D.autotask_id&&(de.Quantity=D.Quantity,de.PriceOverride=D.PriceOverride)}):D.__typename==="ServiceBundle"&&O.value.map(de=>{de.autotask_id===D.autotask_id&&(de.Quantity=D.Quantity,de.PriceOverride=D.PriceOverride)})}function Fe(D,de){console.log(D,de,"setShowComponentModal"),s.showComponentModal="",setTimeout(()=>{s.showComponentModal=D},200)}function We(D,de){console.log(D,de,"updateFields")}function St(D){console.log(D,"setFirstSowGuidelineId"),_.value=D}return{state:s,guidelines:a,createCard:me,formatTotal:r,addToTotal:C,darkmode:i,setNeededGuideline:o,computedComponentRows:L,setShowOtherTabs:G,updateAttachedComponent:pt,setShowComponentModal:Fe,componentColumns:Y,setPage:je,setSelectedRow:Ie,updateFields:We,selectedGuidelines:H,selectedProducts:E,selectedServices:I,selectedServiceBundles:O,setFirstSowGuidelineId:St}}}),wr={class:"px-2 sm:px-5"},vr={key:0,style:{display:"flex","flex-direction":"column","align-items":"center"}},yr={class:"flex items-center relative sm:absolute top-2 right-6"},gr={style:{display:"flex"}},hr={style:{"text-align":"center","font-size":"1.1rem",color:"#1976d2"},class:"q-mt-sm"},Sr={key:0,style:{display:"flex","margin-top":"1rem"}},br={key:2},Tr={key:3,class:"w-full flex items-center pb-3"},kr={class:"flex mb-3"},Cr={class:"ml-10 mt-1 mb-1"},Dr={class:"text-primary text-lg"},Ir={key:0,class:"flex mt-2"},Pr={key:0,class:"bg-slate-500 hover:bg-blue-500 px-3 rounded-full text-white my-2 ml-10 h-6 z-10 relative"},Nr={key:0},Mr={key:1,class:"bg-slate-500 hover:bg-blue-500 px-3 rounded-full text-white my-2 ml-10 h-6 mt-2 z-10 relative"},$r={key:0},Or={key:2,class:"bg-slate-500 hover:bg-blue-500 px-3 rounded-full text-white my-2 ml-10 h-6 mt-2 z-10 relative"},Ar={key:0},Rr={key:3,class:"bg-slate-500 hover:bg-blue-500 px-3 rounded-full text-white my-2 ml-10 h-6 mt-2 z-10 relative"},Lr={key:0},qr={key:1,class:"flex justify-center w-full sm:justify-end sm:absolute sm:right-5 add-button"};function Er(e,t,v,w,i,s){const a=we("AssociatedGuidelines"),o=we("ListQTable");return l(),g("div",{style:$t(e.addMode?"display: block":"display: none"),class:F(["q-mt-md rounded-lg flex flex-col items-end responsive-table-container animate__animated",{"mt-8":!e.isBuilderMode,"mt-0":e.isBuilderMode,animate_fadeIn:!e.isBuilderMode}])},[u(ht,{class:F(["rounded-md",{"shadow-md":!e.isBuilderMode,"shadow-none pl-3":e.isBuilderMode,"bg-[#28334E]":e.darkmode,border:!e.darkmode}]),dark:e.darkmode},{default:T(()=>[n("div",wr,[e.isBuilderMode?y("",!0):(l(),g("div",vr,[n("div",yr,[e.isBuilderMode?y("",!0):(l(),R(W,{key:0,color:e.state.shouldShowTabs?"teal":"primary",icon:e.state.shouldShowTabs?"remove":"add",flat:"","no-caps":"",label:e.state.shouldShowTabs?"Attach Only Guidelines":"Attach Products/Services",onClick:e.setShowOtherTabs},null,8,["color","icon","label","onClick"])),u(Qe,{size:"sm",name:"close",color:"red-5",class:"cursor-pointer ml-4",onClick:t[0]||(t[0]=r=>e.setShowImpleModal(!1))})]),n("div",gr,[n("h5",hr,V(e.impleSearch),1)]),e.state.isImpleMore?(l(),g("div",Sr,[u(dt,{modelValue:e.state.isOptional,"onUpdate:modelValue":t[1]||(t[1]=r=>e.state.isOptional=r),class:"mx-2 sm:mx-5",label:"Optional"},null,8,["modelValue"])])):y("",!0)])),!e.isBuilderMode&&e.state.shouldShowTabs?(l(),R(fo,{key:1,modelValue:e.state.showComponentType,"onUpdate:modelValue":t[3]||(t[3]=r=>e.state.showComponentType=r),dense:"",class:F([e.darkmode?"text-grey-4":"text-grey","border-b dark:border-slate-500 -ml-6 -mr-6"]),"active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":"","no-caps":"","mobile-arrows":""},{default:T(()=>[e.state.showHelp?(l(),R(Me,{key:0,modelValue:e.state.showHelp,"onUpdate:modelValue":t[2]||(t[2]=r=>e.state.showHelp=r),class:"text-sm bg-white shadow-md border text-slate-600 hover:text-blue-400"},{default:T(()=>[...t[6]||(t[6]=[J("Select the type of Component you want to Search",-1)])]),_:1},8,["modelValue"])):y("",!0),u(Lt,{name:"Guidelines",label:"Attach Guidelines"}),u(Lt,{name:"Products",label:"Attach Products"}),u(Lt,{name:"Services",label:"Attach Services"}),u(Lt,{name:"Service Bundles",label:"Attach Service Bundles"})]),_:1},8,["modelValue","class"])):y("",!0),n("div",{style:{padding:"2rem","padding-left":"0.5rem","padding-top":"1rem","padding-bottom":"0px"},class:F(["relative z-10",{"text-white":e.darkmode,"text-slate-700":!e.darkmode,"mb-6":e.state.shouldShowTabs&&e.state.showComponentType==="Guidelines","-mb-10":e.state.shouldShowTabs&&e.state.showComponentType!=="Guidelines","mb-5":!e.state.shouldShowTabs}])},[t[7]||(t[7]=n("p",{style:{"font-weight":"500","font-size":"17.6px","margin-bottom":"0.5rem"}}," What can we do for you? ",-1)),t[8]||(t[8]=n("p",null," Help our Team better understand where we can help fulfill your security needs. ",-1)),e.state.shouldShowTabs&&e.state.showComponentType!=="Guidelines"?(l(),R(lt,{key:0,modelValue:e.state.search,"onUpdate:modelValue":t[4]||(t[4]=r=>e.state.search=r),filled:"",dense:"",class:"w-80 relative sm:absolute top-5 right-3",dark:e.darkmode,label:"Search "+e.state.showComponentType},{append:T(()=>[u(Qe,{name:"search"})]),_:1},8,["modelValue","dark","label"])):y("",!0)],2),n("div",{style:$t(e.state.showAssociatedGuidelines&&e.state.showComponentType==="Guidelines"?"display: block":"display: none")},[(l(!0),g(Oe,null,Ge(e.guidelines,(r,m)=>(l(),R(bo,{key:m,separator:""},{default:T(()=>[u(a,{guideline:r,readyGuidelineCreate:e.state.readyGuidelineCreate,pushNewResponseData:e.pushNewResponseData,impleSearchID:e.impleSearchID,refetchComponentType:e.refetchComponentType,addToTotal:e.addToTotal,setNeededGuideline:e.setNeededGuideline,setFirstSowGuidelineId:e.setFirstSowGuidelineId},null,8,["guideline","readyGuidelineCreate","pushNewResponseData","impleSearchID","refetchComponentType","addToTotal","setNeededGuideline","setFirstSowGuidelineId"])]),_:2},1024))),128))],4),e.state.shouldShowTabs&&e.state.showComponentType!=="Guidelines"?(l(),g("div",br,[u(o,{style:{"border-top-right-radius":"0px","border-top-left-radius":"0px","box-shadow":"none"},title:"",rows:e.computedComponentRows,columns:e.componentColumns,stateValue:e.state,loading:e.state.loading,handleRowClick:e.setSelectedRow,setPage:e.setPage,updateFields:e.updateFields,customNoDataText:"Searching for "+e.state.showComponentType+"...",dense:"",superdense:"",searchinput:"",setShowComponentModal:e.setShowComponentModal,setSelectedRow:e.setSelectedRow,updateComponent:e.updateAttachedComponent,fadeInAnimation:!1,showComponentType:e.state.showComponentType},null,8,["rows","columns","stateValue","loading","handleRowClick","setPage","updateFields","customNoDataText","setShowComponentModal","setSelectedRow","updateComponent","showComponentType"])])):y("",!0),e.state.loading?(l(),g("div",Tr,[u(vo,{color:"primary",size:"40px",class:"ml-3 mr-5"}),J(" Loading "+V(e.state.showComponentType)+"... ",1)])):y("",!0)]),t[16]||(t[16]=n("hr",{class:"mx-5 dark:border-slate-600"},null,-1)),n("div",kr,[n("div",Cr,[t[9]||(t[9]=n("p",{class:"text-slate-500"},"Estimated Total",-1)),n("p",Dr,V(e.formatTotal(e.state.totalPrice)),1)]),e.state.shouldShowTabs?(l(),g("div",Ir,[e.guidelines.length>0?(l(),g("div",Pr,[J(V(e.guidelines.filter(r=>r.isSelected).length)+" Guidelines ",1),u(Qe,{name:"layers",clas:"ml-2"}),u(Me,{style:{"font-size":"0.9rem"},class:"bg-white border shadow-md text-black"},{default:T(()=>[t[10]||(t[10]=n("b",null,"Guidelines:",-1)),e.guidelines.filter(r=>r.isNeeded||r.isSelected).length===0?(l(),g("div",Nr," N/A ")):y("",!0),(l(!0),g(Oe,null,Ge(e.guidelines.filter(r=>r.isNeeded||r.isSelected),(r,m)=>(l(),g("div",{key:m},[n("li",null,V(r.Name),1)]))),128))]),_:1})])):y("",!0),e.selectedProducts.length>0?(l(),g("div",Mr,[J(V(e.selectedProducts.length)+" Products ",1),u(Qe,{name:"layers",clas:"ml-2"}),u(Me,{style:{"font-size":"0.9rem"},class:"bg-white border shadow-md text-black"},{default:T(()=>[t[11]||(t[11]=n("b",null,"Products:",-1)),e.selectedProducts.length===0?(l(),g("div",$r,"N/A")):y("",!0),(l(!0),g(Oe,null,Ge(e.selectedProducts,(r,m)=>(l(),g("div",{key:m},[n("li",null,V(r.Name),1)]))),128))]),_:1})])):y("",!0),e.selectedServices.length>0?(l(),g("div",Or,[J(V(e.selectedServices.length)+" Services ",1),u(Qe,{name:"layers",clas:"ml-2"}),u(Me,{style:{"font-size":"0.9rem"},class:"bg-white border shadow-md text-black"},{default:T(()=>[t[12]||(t[12]=n("b",null,"Services:",-1)),e.selectedServices.length===0?(l(),g("div",Ar,"N/A")):y("",!0),(l(!0),g(Oe,null,Ge(e.selectedServices,(r,m)=>(l(),g("div",{key:m},[n("li",null,V(r.Name),1)]))),128))]),_:1})])):y("",!0),e.selectedServiceBundles.length>0?(l(),g("div",Rr,[J(V(e.selectedServiceBundles.length)+" Service Bundles ",1),u(Qe,{name:"layers",clas:"ml-2"}),u(Me,{style:{"font-size":"0.9rem"},class:"bg-white border shadow-md text-black"},{default:T(()=>[t[13]||(t[13]=n("b",null,"Service Bundles:",-1)),e.selectedServiceBundles.length===0?(l(),g("div",Lr,"N/A")):y("",!0),(l(!0),g(Oe,null,Ge(e.selectedServiceBundles,(r,m)=>(l(),g("div",{key:m},[n("li",null,V(r.Name),1)]))),128))]),_:1})])):y("",!0)])):y("",!0),e.isBuilderMode?y("",!0):(l(),g("div",qr,[u(W,{color:"red-5",flat:"","no-caps":"",class:"mr-4","cy-data":"cancel-implementation",onClick:t[5]||(t[5]=r=>e.setShowImpleModal(!1))},{default:T(()=>[u(Qe,{name:"close"}),t[14]||(t[14]=n("p",{class:"ml-2"},"Cancel",-1))]),_:1}),u(W,{color:"primary","no-caps":"",class:F(!e.state.shouldShowTabs||e.state.shouldShowTabs&&e.guidelines.filter(r=>r.isSelected||r.isNeeded).length>0?"":"cursor-not-allowed"),label:"Attach Implementation",onClick:e.createCard},{default:T(()=>[!e.state.shouldShowTabs||e.state.shouldShowTabs&&e.guidelines.filter(r=>r.isSelected||r.isNeeded).length>0?y("",!0):(l(),R(Me,{key:0},{default:T(()=>[...t[15]||(t[15]=[n("p",null,"At least one Implementation Guideine is required",-1)])]),_:1}))]),_:1},8,["class","onClick"])]))])]),_:1},8,["class","dark"])],6)}const Br=Ze(fr,[["render",Er]]),Vr=Ke({name:"ComponentQTable",components:{draggable:xo},props:{rows:{type:Array,required:!0},title:{type:String,required:!0},updateComponent:{type:Function,required:!0},componentType:{type:String,default:"Product"},setShowComponentModal:{type:Function,default:()=>{}},readonly:{type:Boolean,default:!1},item:{type:Object,default:()=>{}},deleteImplementation:{type:Function,default:()=>{}},updateImplementation:{type:Function,default:()=>{}},id:{type:Number,default:0},setShowProdServ:{type:Function,default:()=>{}},sow:{type:Object,default:()=>{}},breakdownByPeriodType:{type:Boolean,default:!1},setHoverDraggingTag:{type:Function,default:()=>{}},customNoDataText:{type:String,default:"No Guidelines associated with this Implementation"},showSetupFeesColumns:{type:Function,default:()=>{}},loading:{type:Boolean,default:!0},isInitLoading:{type:Boolean,default:!1},isImplementationReordering:{type:Boolean,default:!1}},setup(e){const t=mt("formatTotal"),v=mt("windowWidth"),w=$e({showProdServ:e.item?e.item.showProdServ??!1:!1,isProdServices:e.item?e.item.isProdServices:!1,impleName:e.item?e.item.Name:"",impleIsEditing:e.item?e.item.isEditing:!1,deletedImpleID:null,showImplementationDropdown:!1,IsOptional:e.item?e.item.IsOptional:!1,showSetupFees:!1,showEditPopup:!1,editPopupInput:"",allowDrag:!1,isOpenOneTime:!1,isOpenMonthly:!1,isOpenYearly:!1}),i=ct(),s=K(()=>i.darkMode);ye(()=>e.breakdownByPeriodType,()=>{w.showProdServ=e.breakdownByPeriodType?e.breakdownByPeriodType:!1,e.setShowProdServ(e.item,w.showProdServ)});let a="",o=null;function r(j){let ie=o;setTimeout(()=>{(!w.dontAllowClose||o!==ie)&&(j.editingValue="",j.showDropdownEdit=!1,a=""),w.dontAllowClose=!1},500)}function m(j,ie,re,Ee){console.log(j,ie,re,Ee,"setEditMode"),M(ie),e.readonly||Ee==="dropdown"||(a===""?a=re:a!==re&&(w.dontAllowClose=!0,a=re),o=j.index,j.UnitPrice!=="Price"&&(j.editingValue=re,M(ie)))}const C=f([]),h=f([]),M=j=>{e.componentType==="Product"?setTimeout(()=>{h.value[j].focus()},500):(e.componentType==="Guideline"||e.componentType==="Exclusion"||e.componentType==="Assumption")&&setTimeout(()=>{C.value[j].focus()},500)},k=j=>ie=>{e.componentType==="Product"?h.value[j]=ie:(e.componentType==="Guideline"||e.componentType==="Exclusion"||e.componentType==="Assumption")&&(C.value[j]=ie)},$=f([]),q=j=>ie=>{$[j]=ie};function c(j){w.impleIsEditing=!0,setTimeout(()=>{$[j].focus()},300)}function E(j,ie,re){e.readonly||(j.editingValue=re,a===""?(a=re,setTimeout(()=>{j.__typename==="SowService"&&r(j)},2e3)):a!==re&&(w.dontAllowClose=!0,a=re,setTimeout(()=>{j.__typename==="SowService"&&r(j)},2e3)))}function I(j){switch(j){case"Tier1":return"Tier 1";case"Tier2":return"Tier 2";case"Tier3":return"Tier 3";case"ProjectManager":return"Project Manager";case"AfterHours":return"After Hours";default:return j}}function O(j){let ie=j;j.includes("One Time")||j.includes("One-Time")?ie="One-Time":j.includes("Monthly")?ie="Monthly":j.includes("Yearly")&&(ie="Yearly");let re=De.value.filter(Ee=>ie==="One-Time"?Ee.BillingFrequency===ie&&Ee.__typename!=="SowGuideline":Ee.BillingFrequency===ie).reduce((Ee,Xe)=>Ee+(e.breakdownByPeriodType?Xe.LineTotalCost:Xe.LineTotal),0);return t(re)}const H=K(()=>{const j=e.item?.guidelines;return e.componentType==="Guideline"?j:j.sort((ie,re)=>ie.sow_order-re.sow_order)});function _(){e.showSetupFeesColumns(w.showSetupFees)}function Ve(j){window.open(j,"_blank")}const me=kt(),Se=f(!1);function Ae(j){me.notify({message:j,color:"primary",position:"bottom",timeout:3e3,actions:[{label:"Learn More",color:"green-2",bold:!0,handler:()=>Ve("https://aislabs.atlassian.net/wiki/spaces/DT/pages/589332491/09+03+24+Guideline+Discount+Changes+Quote+Update")}]})}const De=f(e.item?.guidelines),ke=f(0),qe=f([]),oe=f(e.title);ye(()=>e.title,()=>{console.log(e.title,"props.title THIS SHOULD BE CHANGING"),oe.value=e.title,w.impleName=e.item.Name}),ye(()=>e.rows,()=>{setTimeout(()=>{De.value&&e.rows&&De.value.length!==e.rows.length?e.componentType==="Guideline"&&(De.value=e.item?.guidelines.filter(j=>j.BillingFrequency==="One-Time"&&j.__typename==="SowGuideline"&&j.ImplementationTypeID===e.item.implementation_type_id),qe.value=e.rows):De.value=e.rows},10)},{immediate:!0}),ye(()=>e.isInitLoading,()=>{De.value=e.item?.guidelines});let pe=null;function ve(j){console.log(j,"onUpdateOrder event"),pe&&clearTimeout(pe),console.log("update this row",j.moved.element.Name,"toNewIndex: ",j.moved.newIndex+1),ke.value++,console.log(ke.value,"sowOrderUpdatedAmount"),pe=setTimeout(()=>{console.log(De.value,"componentRows.value"),De.value.map((ie,re)=>{ie.sow_order!==re&&e.updateComponent({row:{...ie,sow_order:re},field:"sow_order",operation:"update"})}),pe=null},1e3)}function P(j){console.log(j,"setAllowDrag"),w.allowDrag=j}const x=f(!1);function L(j){w.showProdServ&&(w.showProdServ=!1,e.setShowProdServ(e.item,!1)),x.value=j}function G(j){console.log(j,"item toggleRecurringAccordian()"),j.type==="TotalHeader"&&ae.map(ie=>{ie.type===j.BillingFrequency&&(ie.isOpen=!ie.isOpen,console.log(ie.isOpen,"type.isOpen()"))})}const ae=[{type:"One-Time"},{type:"Monthly"},{type:"Yearly"}],fe=$e([]),Y=f(!1);ye(()=>e.breakdownByPeriodType,()=>{e.breakdownByPeriodType&&(Y.value=!0)});const Ie=K(()=>e.rows.filter((re,Ee,Xe)=>Ee===Xe.findIndex(je=>je.Name===re.Name)));return{setDrag:L,state:w,formatTotal:t,inputRef:k,showDelete:E,handleFocusOut:r,setEditMode:m,implementationRef:q,editImpleName:c,windowWidth:v,computedSkillTier:I,computedTotalCost:O,computedRows:H,darkmode:s,setShowSetupFees:_,showTooltip:Ae,showPriceTooltip:Se,onUpdateOrder:ve,componentRows:De,setAllowDrag:P,toggleRecurringAccordian:G,accordianComponentRows:qe,billingFrequencyTypes:ae,whichExpanded:fe,hasBreakdownByPeriodTypeBeenSet:Y,headerTitle:oe,computedAccordianRows:Ie}}}),jr={key:1,class:"w-full flex justify-center -ml-16 pl-32 my-0 py-1 mb-2"},Fr={key:1},Ur={key:0,class:"relative flex justify-center w-full items-center sm:absolute sm:justify-end right-0 -top-1"},Qr={key:1,class:"relative flex justify-center w-full items-center sm:absolute sm:justify-end right-0"},Gr={key:0,class:"relative flex justify-end items-center"},Wr={class:"text-center"},Hr={class:"text-center"},Yr={key:0,class:"text-center"},zr={class:"text-center"},Zr={key:0},Kr={class:"w-full"},Jr={key:0,class:"absolute left-0 top-0 rounded-full"},Xr={key:1,class:"absolute top-0 left-4"},_r={key:2,class:"absolute right-1 top-1 z-10"},xr={class:"flex flex-row w-full"},ed={key:2,class:"flex mt-2 -mb-1 w-[20rem]"},td=["onClick"],od={class:"w-full mr-5 mt-2"},ad={key:0,class:"flex ml-3 items-center"},ld={key:1,class:"mb-2"},nd={key:0},sd={key:1,class:"w-[20rem]"},id={class:"absolute right-1 top-3 z-10 flex flex-col sm:flex-row"},rd={key:2},dd={class:"text-slate-900 dark:text-white"},ud={class:"text-slate-900 dark:text-white"},md={class:"text-slate-900 dark:text-white"},cd={key:3,class:"text-slate-900 dark:text-white"},pd={key:0,class:""},fd=["onClick"],wd={class:"w-10"},vd={key:0},yd=["onClick"],gd=["onClick"],hd={class:"w-full"},Sd={key:1},bd={class:"h-full relative"},Td={key:0,class:"w-full flex justify-end mr-5 items-center my-2"},kd={key:0,class:"mr-5 text-sm"},Cd={key:1};function Dd(e,t,v,w,i,s){const a=we("draggable");return l(),g("div",null,[u(vl,{class:F(["shadow-md h-full",e.darkmode?"bg-[#28334E] q-table-bordered text-slate-200":"q-table-bordered"]),dark:e.darkmode,separator:"cell",flat:"",bordered:!e.darkmode},{default:T(()=>[e.headerTitle.includes("Hardware/Software/Licensing")?(l(),g("p",{key:0,class:F(["p-0 pt-2 m-0 text-xl text-center w-full",e.componentType==="Product"||e.componentType==="Service"?e.darkmode?"text-green-6":"text-green-600":"text-blue-500"])},V(e.headerTitle),3)):(l(),g("div",jr,[ut(n("p",{class:F(["p-0 m-0 text-xl -mb-4 truncate text-center sm:text-left md:text-center w-full sm:w-full pt-1",e.windowWidth<430?e.state.IsOptional?" italic":"":e.state.IsOptional?"italic":""])},[n("span",{class:F(["p-1 relative z-10 items-center",e.darkmode?"text-blue-500":"text-primary"])},[e.windowWidth>700?(l(),R(W,{key:0,rounded:"",flat:"",class:"m-0 p-0 px-2.5 -ml-[2.4rem] -mt-1 cursor-move",onMouseover:t[0]||(t[0]=o=>e.setHoverDraggingTag(!0)),onMouseleave:t[1]||(t[1]=o=>e.setHoverDraggingTag(!1))},{default:T(()=>[u(Qe,{name:"drag_indicator",size:"xs",color:"blue-grey"})]),_:1})):y("",!0),e.loading?y("",!0):(l(),g("span",Fr,V(e.state.impleName),1)),e.loading?(l(),R(he,{key:2,class:"h-3 -mb-1 inline-block w-40"})):y("",!0)],2),u(W,{color:"blue-grey",icon:"arrow_drop_down",flat:"",dense:"",rounded:"",class:"z-10",onClick:t[5]||(t[5]=o=>e.state.showImplementationDropdown=!e.state.showImplementationDropdown)},{default:T(()=>[u(wl,{modelValue:e.state.showImplementationDropdown,"onUpdate:modelValue":t[4]||(t[4]=o=>e.state.showImplementationDropdown=o),class:"flex flex-col edit-popup",anchor:"top right",dense:""},{default:T(()=>[u(At,{modelValue:e.state.IsOptional,"onUpdate:modelValue":t[2]||(t[2]=o=>e.state.IsOptional=o),"checked-icon":"check",color:"primary",label:"Is Optional","unchecked-icon":"clear",onClick:t[3]||(t[3]=o=>e.updateImplementation(e.item,e.state.IsOptional))},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})],2),[[Zt,!e.state.impleIsEditing]]),e.componentType==="Guideline"?(l(),g("div",Ur,[e.item.isProdServices?(l(),R(dt,{key:0,modelValue:e.state.showProdServ,"onUpdate:modelValue":t[6]||(t[6]=o=>e.state.showProdServ=o),class:"mt-2 w-28 ps-checkbox",label:"Show P/S",dark:e.darkmode,onClick:t[7]||(t[7]=o=>e.setShowProdServ(e.item,e.state.showProdServ))},{default:T(()=>[u(Me,{class:"bg-white text-black text-sm border shadow-md"},{default:T(()=>[J(V(e.state.showProdServ?"Hide":"Show")+" Products and Services",1)]),_:1})]),_:1},8,["modelValue","dark"])):y("",!0),u(W,{class:"rounded-full p-2 mt-2",round:"",flat:"",icon:"add",dense:"",size:"md",dark:e.darkmode,"data-testid":"add-button"},{default:T(()=>[u(ka,{cover:"","auto-close":"",class:F(e.darkmode?"bg-[#354161] text-slate-200":"")},{default:T(()=>[u(bo,null,{default:T(()=>[u(Mt,{clickable:"",onClick:t[8]||(t[8]=o=>e.setShowComponentModal("Guideline",e.item))},{default:T(()=>[u(Xt,null,{default:T(()=>[...t[22]||(t[22]=[J("Add Guideline",-1)])]),_:1})]),_:1}),u(Mt,{clickable:"",onClick:t[9]||(t[9]=o=>e.setShowComponentModal("Product",e.item))},{default:T(()=>[u(Xt,null,{default:T(()=>[...t[23]||(t[23]=[J("Add Product",-1)])]),_:1})]),_:1}),u(Mt,{clickable:"",onClick:t[10]||(t[10]=o=>e.setShowComponentModal("Service",e.item))},{default:T(()=>[u(Xt,null,{default:T(()=>[...t[24]||(t[24]=[J("Add Service",-1)])]),_:1})]),_:1}),u(Mt,{clickable:"",onClick:t[11]||(t[11]=o=>e.setShowComponentModal("Service Bundle",e.item))},{default:T(()=>[u(Xt,null,{default:T(()=>[...t[25]||(t[25]=[J("Add Service Bundle",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])]),_:1},8,["dark"]),u(W,{class:"rounded-full p-2 mt-2 mr-3","text-color":"red-5",dense:"",flat:"",icon:"delete",onClick:t[12]||(t[12]=()=>{e.state.confirm=!0,e.state.deletedImpleID=e.item.id})}),e.componentType==="Guideline"?(l(),g("div",Qr,[u(Ot,{modelValue:e.state.confirm,"onUpdate:modelValue":t[14]||(t[14]=o=>e.state.confirm=o)},{default:T(()=>[u(ht,{class:F(e.darkmode?"bg-[#26324C]":"bg-white"),dark:e.darkmode},{default:T(()=>[u(gt,{class:"flex justify-center text-xl"},{default:T(()=>[...t[26]||(t[26]=[J(" Are you sure? ",-1)])]),_:1}),u(gt,{class:"row items-center w-full sm:w-96"},{default:T(()=>[...t[27]||(t[27]=[n("p",{class:"q-ml-sm text-center"}," This Implementation and associated Guidelines, Products, and Services will be deleted ",-1)])]),_:1}),u(zt,{align:"right"},{default:T(()=>[ut(u(W,{style:{"font-weight":"400"},"no-caps":"",flat:"",label:"Cancel"},null,512),[[Dt]]),ut(u(W,{style:{"font-weight":"500"},"no-caps":"",class:"mr-5",label:"Delete",color:"red-5",onClick:t[13]||(t[13]=o=>e.deleteImplementation(e.state.deletedImpleID))},null,512),[[Dt]])]),_:1})]),_:1},8,["class","dark"])]),_:1},8,["modelValue"]),e.componentType==="Assumption"||e.componentType==="Exclusion"?(l(),g("div",Gr,[e.readonly?y("",!0):(l(),R(W,{key:0,class:"absolute right-0 rounded-full p-2 mr-3 mt-2 add-btn",round:"",flat:"",icon:"add",dense:"",size:"md",onClick:t[15]||(t[15]=o=>e.setShowComponentModal(!0))}))])):y("",!0)])):y("",!0)])):y("",!0)])),e.title==="Monthly Hardware/Software/Licensing"||e.title==="Yearly Hardware/Software/Licensing"?(l(),R(dt,{key:2,modelValue:e.state.showSetupFees,"onUpdate:modelValue":t[16]||(t[16]=o=>e.state.showSetupFees=o),class:"w-full flex justify-end pr-5 md:mb-0 md:absolute md:right-5 top-0",label:"Show Setup Fees",dark:e.darkmode,onClick:e.setShowSetupFees},null,8,["modelValue","dark","onClick"])):y("",!0),n("thead",{class:F(["grid mr-0 pr-0 w-full",{"grid-cols-8":e.windowWidth>700,"grid-cols-6":e.windowWidth<700}])},[n("th",{class:F(["text-left border",{"col-span-4":e.componentType==="Guideline"&&e.windowWidth>700,"col-span-2":e.componentType==="Guideline"&&e.windowWidth<700,"col-span-5":e.componentType!=="Guideline"&&e.windowWidth>700,"col-span-3":e.componentType!=="Guideline"&&e.windowWidth<700}])}," Name ",2),n("th",Wr,V(e.state.showSetupFees?"Setup Fee":e.breakdownByPeriodType?"Cost":"Price"),1),n("th",Hr,V(e.windowWidth>700?"Quantity":"QTY"),1),e.title.includes("Hardware/Software/Licensing")?y("",!0):(l(),g("th",Yr,V(e.windowWidth>700?"Est. ":"")+"Hours ",1)),n("th",zr,[t[28]||(t[28]=J(" Total ",-1)),e.windowWidth>700?(l(),g("span",Zr,V(e.state.showSetupFees?"Fees":e.breakdownByPeriodType?"Cost":"Price"),1)):y("",!0)])],2),n("tbody",Kr,[t[39]||(t[39]=n("hr",{class:"border-[#0000001f] dark:border-[#ffffff47]"},null,-1)),n("div",null,[u(a,{modelValue:e.componentRows,"onUpdate:modelValue":t[19]||(t[19]=o=>e.componentRows=o),group:"people","item-key":"id",class:"h-full relative",disabled:e.windowWidth<700?!0:!e.state.allowDrag,onStart:t[20]||(t[20]=o=>e.setDrag(!0)),onEnd:t[21]||(t[21]=o=>e.setDrag(!1)),onChange:e.onUpdateOrder},{item:T(({element:o,index:r})=>[n("tr",{class:F(["grid w-full relative -pr-20 hover:bg-[#fafafa] dark:hover:bg-[#2c3855]",{"grid-cols-8":e.windowWidth>700,"grid-cols-6":e.windowWidth<700}])},[n("td",{class:F(["text-left flex no-wrap items-center cursor-pointer",{"col-span-3":o.type==="TotalFooter"&&e.windowWidth<700,"col-span-3":o.type==="TotalFooter"&&e.windowWidth>700,"col-span-5":e.componentType!=="Guideline"&&e.windowWidth>700,"col-span-3":e.componentType!=="Guideline"&&e.windowWidth<700,"col-span-2":e.componentType==="Guideline"&&e.windowWidth<700,"col-span-4":e.componentType==="Guideline"&&e.windowWidth>700,"bg-blue-12":o.type.includes("Total")&&e.darkmode,"bg-blue-11":o.type.includes("Total")&&!e.darkmode}])},[n("div",{class:F(["flex items-center w-full",{"text-xs text-weight-medium":o.UnitPrice==="Price","w-30 whitespace-break-spaces":e.componentType!=="Assumption"&&e.componentType!=="Exclusion"}])},[o.UnitPrice!=="Price"&&!o.type.includes("Total")&&o.SkillTier!==null&&e.componentType!=="Assumption"&&e.componentType!=="Exclusion"?(l(),g("div",Jr,[u(W,{icon:o.show?"arrow_drop_up":"arrow_drop_down",flat:"",dense:"",rounded:"",color:o.IsProductActive===!1||o.IsServiceActive===!1||o.IsServiceBundleActive===!1?"red":o.IsAlreadyImplemented?"yellow-9":"primary",class:"z-20 relative",onClick:m=>o.show=!o.show},null,8,["icon","color","onClick"]),e.windowWidth>700&&(e.componentType==="Guideline"&&o.type==="Guideline"||e.componentType!=="Guideline")?(l(),R(W,{key:0,icon:"drag_indicator",flat:"",size:"xs",color:"blue-grey",rounded:"",dense:"",class:"-ml-2 mt-1 cursor-move relative z-10",onMouseover:t[17]||(t[17]=m=>e.setAllowDrag(!0)),onMouseleave:t[18]||(t[18]=m=>e.setAllowDrag(!1))})):y("",!0)])):y("",!0),o.type==="TotalHeader"?(l(),g("div",Xr,[u(W,{icon:o.show?"arrow_drop_up":"arrow_drop_down",flat:"",dense:"",rounded:"",color:"white",onClick:m=>e.toggleRecurringAccordian(o)},null,8,["icon","onClick"])])):y("",!0),!o.type.includes("Total")&&o.UnitPrice!=="Price"&&o.SkillTier!==null&&e.componentType!=="Assumption"&&e.componentType!=="Exclusion"&&(e.componentType==="Guideline"||o.__typename==="SowGuideline"||o.type==="Guideline"||o.type==="Product"||o.type==="Service"||o.type==="ServiceBundle")?(l(),g("div",_r,[e.windowWidth>700?(l(),R(W,{key:0,flat:"",icon:"edit",size:"11px",rounded:"",dense:"",class:"mt-0",color:o.showDropdownEdit?"red-5":"primary",onClick:()=>{o.showDropdownEdit=!o.showDropdownEdit,e.setEditMode(o,r,o.showDropdownEdit===!0?"Name":"notEditingNow")}},null,8,["color","onClick"])):y("",!0),e.windowWidth>500?(l(),R(W,{key:1,flat:"",icon:"delete",size:"11px",rounded:"",dense:"",color:"blue-grey-5",onClick:m=>e.updateComponent({row:o,operation:"delete"})},null,8,["onClick"])):y("",!0)])):y("",!0),ut(n("div",xr,[o.type==="Service"&&o.type!=="Guideline"?(l(),g("span",{key:0,style:$t(e.readonly?"":"cursor: pointer"),class:"w-5/6 ml-8"},V(o.Name),5)):(l(),R(lt,{key:1,ref:e.inputRef(r),modelValue:o.Name,"onUpdate:modelValue":m=>o.Name=m,class:"ml-8 -mt-[9px] w-full mr-10 component-input",type:"text",dense:"",dark:e.darkmode,onFocusout:m=>e.handleFocusOut(o,r),onKeyup:eo(m=>e.handleFocusOut(o,r),["enter"]),onChange:m=>e.updateComponent({row:o,field:"Name"})},null,8,["modelValue","onUpdate:modelValue","dark","onFocusout","onKeyup","onChange"])),o.showDropdownEdit?(l(),g("div",ed,[u(At,{modelValue:o.IsOptional,"onUpdate:modelValue":m=>o.IsOptional=m,"checked-icon":"check",color:"primary",label:"Optional","unchecked-icon":"clear",class:F(o.type==="Service"?"-mt-3":""),onClick:m=>e.updateComponent({row:o,field:"IsOptional"})},null,8,["modelValue","onUpdate:modelValue","class","onClick"]),o.__typename!=="SowServiceBundle"&&o.__typename!=="SowService"?(l(),R(At,{key:0,modelValue:o.IsAlreadyImplemented,"onUpdate:modelValue":m=>o.IsAlreadyImplemented=m,"true-value":1,"false-value":0,"checked-icon":"check",color:"primary",label:"Already Implemented",class:"whitespace-nowrap","unchecked-icon":"clear",onClick:m=>e.updateComponent({row:o,field:"IsAlreadyImplemented"})},null,8,["modelValue","onUpdate:modelValue","onClick"])):y("",!0)])):y("",!0)],512),[[Zt,o.editingValue==="Name"]]),o.editingValue!=="Name"&&!e.loading?(l(),g("p",{key:3,class:F([{"text-xs text-weight-medium ml-0":o.type.includes("Total"),"w-full sm:w-60 ml-10":o.editingValue==="Name","w-full pr-0 sm:pr-8":o.editingValue!=="Name","pl-0":e.windowWidth<700,"pl-5":e.windowWidth>700,"-ml-3":e.componentType==="Guideline"&&o.type!=="Guideline"},"mr-1 sm:mr-0"]),onClick:m=>o.UnitPrice!=="Price"&&(o.__typename==="SowGuideline"||o.__typename==="SowProduct")&&e.setEditMode(o,r,"Name")},[n("span",{class:F(o.IsOptional||o.IsAlreadyImplemented?"text-slate-500 pl-3":"pl-3")},[J(V(o.Name)+" ",1),n("i",null,V(o.IsOptional?" (Optional)":""),1)],2)],10,td)):y("",!0),e.loading?(l(),R(he,{key:4,class:"w-40 h-2.5 ml-10"})):y("",!0),ut(u(yl,{modelValue:o.show,"onUpdate:modelValue":m=>o.show=m,dense:"","dense-toggle":"","header-class":"","header-style":"height: 1px !important; margin-top: -1.7rem; z-index: -1","expand-icon-toggle":"","expand-seperator":!1,"hide-expand-icon":"",popup:"","label-lines":0,"caption-lines":0,dark:e.darkmode},{default:T(()=>[u(ht,{class:"w-full min-w-full -mt-2 p-0",style:{border:"0px solid white"},dark:"",dense:""},{default:T(()=>[u(gt,{dense:"",class:"py-0 px-2"},{default:T(()=>[n("div",od,[o.IsProductActive===!1||o.IsServiceActive===!1||o.IsServiceBundleActive===!1?(l(),g("div",ad,[...t[29]||(t[29]=[n("div",{class:"bg-red-400 h-2.5 w-2.5 rounded-full"},null,-1),n("p",null,[n("span",{class:"text-slate-500 italic ml-2"},[n("b",null,"Inactive Line Item")])],-1)])])):y("",!0),o.IsAlreadyImplemented||o.IsOptional?(l(),g("div",ld,[o.IsAlreadyImplemented?(l(),g("p",nd,[...t[30]||(t[30]=[n("span",{class:"text-slate-500 ml-3 italic w-[20rem]"},[J("- "),n("b",null,"Already Implemented"),J(" by the Customer")],-1)])])):y("",!0),o.IsOptional?(l(),g("p",sd,[...t[31]||(t[31]=[n("span",{class:"text-slate-500 ml-3 italic"},"- Optional Items are not included with the Total",-1)])])):y("",!0)])):y("",!0),n("div",id,[e.windowWidth<700?(l(),R(W,{key:0,flat:"",icon:"edit",size:"11px",rounded:"",dense:"",class:"mt-8 absolute sm:relative sm:mt-4 right-0",color:o.showDropdownEdit?"red-5":"primary",onClick:()=>{e.setEditMode(o,r,"Name"),o.showDropdownEdit=!o.showDropdownEdit}},null,8,["color","onClick"])):y("",!0),e.windowWidth<500?(l(),R(W,{key:1,flat:"",icon:"delete",size:"11px",rounded:"",dense:"",class:"mt-0",color:"blue-grey-5",onClick:m=>e.updateComponent({row:o,operation:"delete"})},null,8,["onClick"])):y("",!0)]),e.componentType!=="Guideline"&&o.__typename!=="SowGuideline"||o.type!=="Guideline"?(l(),g("div",rd,[n("p",dd,[t[32]||(t[32]=n("span",{class:"text-slate-500 ml-3"},"- Implementation Type:",-1)),J(" "+V(o.SowImplementationTypeName??"N/A"),1)]),n("p",ud,[t[33]||(t[33]=n("span",{class:"text-slate-500 ml-3"},"- Related Guideline:",-1)),J(" "+V(o.SowGuidelineName??"N/A"),1)]),n("p",md,[t[34]||(t[34]=n("span",{class:"text-slate-500 ml-3"},"- Type: ",-1)),J(" "+V(o.__typename==="SowServiceBundle"?"Service Bundle":o.type),1)])])):(l(),g("div",cd,[n("p",null,[t[35]||(t[35]=n("span",{class:"text-slate-500 ml-3"},"- Related Skill Tier:",-1)),J(" "+V(e.computedSkillTier(o.SkillTier)??"N/A"),1)]),o.type==="Guideline"?(l(),g("p",pd,[t[36]||(t[36]=n("span",{class:"text-slate-500 ml-3"},"- Type: ",-1)),J(" "+V(o.type??"N/A"),1)])):y("",!0)]))])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","dark"]),[[Zt,o.editingValue!=="Name"]])],2)],2),o.type!=="TotalFooter"?(l(),g("td",{key:0,class:F(["flex items-center",o.Name?.includes("Hardware/Software/Licensing")?e.darkmode?"bg-blue-12":"bg-blue-11":""])},[n("div",{style:$t(e.readonly||e.breakdownByPeriodType?"":o.type==="Guideline"&&o.Name==="One-Time Discount"||o.type!=="Guideline"?"cursor: pointer":""),onClick:()=>{e.breakdownByPeriodType||(o.type==="Guideline"&&o.Name==="One-Time Discount"?e.setEditMode(o,r,"PriceOverride"):o.type==="Guideline"?e.showTooltip("Unable to edit Guideline Price. Use a One-Time Discount instead"):e.setEditMode(o,r,"PriceOverride"))}},[n("div",wd,[o.editingValue!=="PriceOverride"&&!e.loading?(l(),g("p",{key:0,class:F(["whitespace-nowrap text-center -ml-3 sm:ml-0",o.UnitPrice==="Price"&&"text-xs text-weight-medium"])},[o.UnitPrice==="Price"?(l(),g("span",vd,V(e.breakdownByPeriodType?"Cost":"Price"),1)):(l(),g("span",{key:1,class:F(o.IsOptional||o.IsAlreadyImplemented?"text-slate-500":"")},V(e.formatTotal(e.state.showSetupFees?o.UnitSetupFee:e.breakdownByPeriodType?o.UnitCost:o.UnitPrice)),3))],2)):y("",!0),e.loading?(l(),R(he,{key:1,class:"w-14 h-2.5 ml-1"})):y("",!0),ut(u(lt,{ref:e.inputRef(r),modelValue:o.UnitPrice,"onUpdate:modelValue":m=>o.UnitPrice=m,modelModifiers:{number:!0},placeholder:o.UnitPrice,class:"pl-0 w-12 md:ml-[-.5rem] md:w-16 lg:w-20 md:pl-3 component-input",type:"number",dark:e.darkmode,dense:"",onFocusout:m=>e.handleFocusOut(o,r),onKeyup:eo(m=>e.handleFocusOut(o,r),["enter"]),onChange:m=>e.updateComponent({row:o,field:"PriceOverride"})},null,8,["modelValue","onUpdate:modelValue","placeholder","dark","onFocusout","onKeyup","onChange"]),[[Zt,o.editingValue==="PriceOverride"]])])],12,fd)],2)):y("",!0),o.type!=="TotalFooter"?(l(),g("td",{key:1,class:F(["flex items-center cursor-pointer",o.Name?.includes("Hardware/Software/Licensing")?e.darkmode?"bg-blue-12 justify-start":"bg-blue-11 justify-start":"justify-start"]),onClick:m=>e.setEditMode(o,r,"Quantity")},[n("div",{style:$t(e.readonly?"":o.id!==null?"cursor: pointer":""),onClick:m=>o.id!==null&&e.setEditMode(o,r,"Quantity")},[n("div",hd,[ut(n("p",{class:F({"text-xs text-weight-medium":o.UnitPrice==="Price","text-slate-500":o.IsOptional||o.IsAlreadyImplemented})},[n("span",null,V(o.type==="Guideline"?o.Quantity??0:o.Quantity==="Quantity"?e.windowWidth<=700?"":"Quantity":o.Quantity??0),1)],2),[[Zt,o.editingValue!=="Quantity"&&!e.loading]]),e.loading?(l(),R(he,{key:0,class:"w-14 h-2.5"})):y("",!0),ut(u(lt,{ref:e.inputRef(r),modelValue:o.Quantity,"onUpdate:modelValue":m=>o.Quantity=m,modelModifiers:{number:!0},placeholder:o.Quantity,class:"w-full md:ml-0 component-input -mt-[10px]",type:"number",dark:e.darkmode,dense:"",onFocusout:m=>e.handleFocusOut(o,r),onKeyup:eo(m=>e.handleFocusOut(o,r),["enter"]),onChange:m=>e.updateComponent({row:o,field:"Quantity"})},null,8,["modelValue","onUpdate:modelValue","placeholder","dark","onFocusout","onKeyup","onChange"]),[[Zt,o.editingValue==="Quantity"]])])],12,gd)],10,yd)):y("",!0),o.type!=="TotalFooter"&&!e.title.includes("Hardware/Software/Licensing")?(l(),g("td",{key:2,class:F([o.Name?.includes("Hardware/Software/Licensing")?e.darkmode?"bg-blue-12":"bg-blue-11":"","flex items-center justify-end"])},[o.type==="Guideline"&&!e.loading?(l(),g("span",{key:0,class:F(o.IsOptional||o.IsAlreadyImplemented?"text-slate-500":"")},V(o.EstimatedHoursSubtotal??0)+" hr. ",3)):e.loading?y("",!0):(l(),g("span",Sd," ___ ")),e.loading?(l(),R(he,{key:2,class:"w-14 h-2.5"})):y("",!0)],2)):y("",!0),n("td",{class:F([o.type.includes("Total")?e.darkmode?"bg-blue-12":"bg-blue-11":"","flex items-center justify-center sm:justify-end"])},[!e.state.showSetupFees&&!e.loading?(l(),g("div",{key:0,class:F(["whitespace-nowrap",{"text-xs text-weight-medium":o.UnitPrice==="Price","text-slate-500":o.IsOptional||o.IsAlreadyImplemented}])},V(o.type==="TotalHeader"?e.breakdownByPeriodType?"Total Cost":o.LineTotal:o.type==="TotalFooter"?e.computedTotalCost(o.Name):e.formatTotal(e.breakdownByPeriodType?o.LineTotalCost:o.LineTotal)),3)):y("",!0),e.loading?(l(),R(he,{key:1,class:"w-14 h-2.5"})):e.state.showSetupFees?(l(),g("div",{key:2,class:F(["whitespace-nowrap",{"text-xs text-weight-medium":o.UnitPrice==="Price","text-slate-500":o.IsOptional||o.IsAlreadyImplemented}])},V(e.formatTotal(o.LineSetupFee?o.LineSetupFee:0)),3)):y("",!0)],2)],2)]),_:1},8,["modelValue","disabled","onChange"])]),n("div",bd,[e.componentType==="Guideline"?(l(),g("div",{key:0,style:{transition:"all 0.3s ease-in-out"},class:F(e.hasBreakdownByPeriodTypeBeenSet||e.state.showProdServ?"animation-slide-up":"animation-slide-down")},[(l(!0),g(Oe,null,Ge(e.billingFrequencyTypes,(o,r)=>(l(),g("div",{key:r,class:F(["animate__animated transition-all ease-in-out duration-500",e.hasBreakdownByPeriodTypeBeenSet||e.state.showProdServ?"opacity-1":"animate__fadeOut"])},null,2))),128))],2)):y("",!0)]),t[40]||(t[40]=n("hr",{class:"border-[#0000001f] dark:border-[#ffffff47]"},null,-1)),e.componentType!=="Assumption"||e.componentType==="Exclusion"?(l(),g("div",Td,[e.breakdownByPeriodType?(l(),g("p",kd,[t[37]||(t[37]=n("span",{class:"text-slate-500"},"AIS Costs:",-1)),J(" "+V(e.formatTotal(e.rows.reduce((o,r)=>o+(typeof r.LineTotalCost=="number"?r.LineTotalCost:0),0))),1)])):y("",!0),e.loading?y("",!0):(l(),g("p",{key:1,style:{"font-size":"1rem"},class:F(["p-0 mr-5",e.componentType!=="Guideline"?"text-green-5":(e.darkmode,"text-primary")])},[J(V(e.componentType!=="Guideline"?e.formatTotal(e.rows.reduce((o,r)=>o+(r.IsOptional?0:r.LineTotal),0)):e.formatTotal(e.item.SowLaborTotal))+" ",1),e.componentType==="Guideline"&&e.sow&&e.sow.LaborContractType==="BlockHours"?(l(),R(Me,{key:0,class:"text-sm border bg-white shadow-md text-black"},{default:T(()=>[...t[38]||(t[38]=[J("Pricing may vary due to Block Hour Labor",-1)])]),_:1})):y("",!0)],2)),e.loading?(l(),R(he,{key:2,class:"w-28 mr-5 bg-blue-9 h-2.5 mt-2 mb-2"})):y("",!0)])):(l(),g("div",Cd,"No "+V(e.componentType)+" found in this SOW",1))])]),_:1},8,["dark","class","bordered"])])}const No=Ze(Vr,[["render",Dd],["__scopeId","data-v-860114d2"]]),Id=Ke({components:{ComponentQTable:No},props:{sowProducts:{type:Object,required:!0},pushNewResponseData:{type:Function,required:!0},readonly:{type:Boolean,default:!1},showDetailedPricing:{type:Boolean,default:!1},componentType:{type:Object,required:!0},selectedComponentTypeRef:{type:Object,default:null}},setup(e){const t=Wt(),v=K(()=>e.sowProducts);function w(m){console.log(m,"ðŸ«ðŸ«ðŸ«",m.field,m.row,"ðŸ«ðŸ«ðŸ«"),m.operation==="delete"?t.deleteSowProduct(m.row):t.updateSowProduct({row:m.row,field:m.field})}ye(()=>e.selectedComponentTypeRef,()=>{e.selectedComponentTypeRef&&e.selectedComponentTypeRef!==null&&e.selectedComponentTypeRef!==void 0&&Object.keys(e.selectedComponentTypeRef).length!==0&&e.selectedComponentTypeRef.__typename==="SowProduct"&&(e.selectedComponentTypeRef.operation!=="delete"?t.updateSowProduct({row:e.selectedComponentTypeRef,field:e.selectedComponentTypeRef.field}):t.deleteSowProduct(e.selectedComponentTypeRef))});const i=$e([{name:"name",required:!0,label:"Name",align:"left",field:m=>m.Name,format:m=>`${m}`,sortable:!0,sort:(m,C,h,M)=>r(m,C,h,M,"name")},{name:"price",required:!0,label:"Price",align:"left",field:m=>m.UnitPrice!==null?m.UnitPrice:0,format:m=>`${m}`,sortable:!0,sort:(m,C,h,M)=>r(m,C,h,M,"price")},{name:"quantity",required:!0,label:"Quantity",align:"left",field:m=>m.quantity?m.quantity:m.Quantity,format:m=>`${m}`,sortable:!0,sort:(m,C,h,M)=>r(m,C,h,M,"quantity")},{name:"total",required:!0,label:"Total Price",align:"left",field:m=>m.LineTotal,format:m=>`${m}`,sortable:!0,sort:(m,C,h,M)=>r(m,C,h,M,"total")}]),s=f({sowProducts:[]});let a=null,o=1;function r(m,C,h,M,k){function $(c){if(!s.value.sowProducts.some(E=>E.Name===c.Name))s.value.sowProducts.push({...c,sow_order:s.value.sowProducts.length});else{const E=s.value.sowProducts.findIndex(I=>I.Name===c.Name);s.value.sowProducts[E].sow_order=s.value.sowProducts.length}}$(h),$(M),console.log(m,"ðŸ«ðŸ«ðŸ«",C);let q=0;return q++,a&&clearTimeout(a),a=setTimeout(()=>{s.value.sowProducts.forEach(c=>{c.__typename==="SowProduct"?t.updateSowProduct({row:c,field:"sow_order"}):c.__typename==="SowService"?t.updateSowService({row:c,field:"sow_order"}):c.__typename==="SowGuideline"?t.updateSowGuideline({row:c,field:"sow_order"}):c.__typename==="SowServiceBundle"&&t.updateSowServiceBundle({row:c,field:"sow_order"})}),a=null},5e3),k==="name"?(s.value.sowProducts.sort((c,E)=>(c.sow_order-E.sow_order)*o),s.value.sowProducts.map((c,E)=>{c.sow_order=E})):k==="price"?(s.value.sowProducts.sort((c,E)=>(c.UnitPrice-E.UnitPrice)*o),s.value.sowProducts.map((c,E)=>{c.sow_order=E})):k==="quantity"?(s.value.sowProducts.sort((c,E)=>(c.Quantity-E.Quantity)*o),s.value.sowProducts.map((c,E)=>{c.sow_order=E})):k==="total"&&(s.value.sowProducts.sort((c,E)=>(c.LineTotal-E.LineTotal)*o),s.value.sowProducts.map((c,E)=>{c.sow_order=E})),o*=-1,m<C?-q:m>C?+q:0}return ye(()=>e.showDetailedPricing,()=>{e.showDetailedPricing?(i.splice(3,1),i.splice(3,0,{name:"unitCost",required:!0,label:"Total Costs",align:"left",field:m=>m.LineTotalCost!==null?m.LineTotalCost:0,format:m=>`${m}`}),i.splice(1,1),i.splice(1,0,{name:"cost",required:!0,label:"Cost",align:"left",field:m=>m.UnitCost!==null?m.UnitCost:0,format:m=>`${m}`})):(i.splice(3,1),i.splice(3,0,{name:"total",required:!0,label:"Total Price",align:"left",field:m=>m.LineTotal,format:m=>`${m}`}),i.splice(1,1),i.splice(1,0,{name:"price",required:!0,label:"Price",align:"left",field:m=>m.UnitPrice!==null?m.UnitPrice:0,format:m=>`${m}`}))}),{columns:i,updateProduct:w,sowProductsRef:v}}}),Pd={class:"mt-10"};function Nd(e,t,v,w,i,s){const a=we("ComponentQTable");return l(),g("div",Pd,[e.sowProductsRef.length>0||e.componentType.isProducts?(l(),R(a,{key:0,rows:e.sowProductsRef.sort((o,r)=>o.sow_order-r.sow_order),columns:e.columns,title:"One-Time Hardware/Software/Licensing",updateComponent:e.updateProduct,readonly:e.readonly,breakdownByPeriodType:e.showDetailedPricing,"binary-state-sort":!0,customNoDataText:"No One-Time Products Found",loading:!1},null,8,["rows","columns","updateComponent","readonly","breakdownByPeriodType"])):y("",!0)])}const Md=Ze(Id,[["render",Nd]]),$d=Ke({components:{ComponentQTable:No},props:{sowServices:{type:Object,required:!0},pushNewResponseData:{type:Function,required:!0},componentType:{type:Object,required:!0},readonly:{type:Boolean,default:!1},showDetailedPricing:{type:Boolean,default:!1},selectedComponentTypeRef:{type:Object,default:()=>{}},updateComponentType:{type:Function,default:()=>{}},tableType:{type:String,default:"Monthly"}},setup(e){const t=Wt(),v=K(()=>e.sowServices.filter(k=>k.BillingFrequency===e.tableType).filter((k,$,q)=>$===q.findIndex(c=>c.Name===k.Name)).sort((k,$)=>k.sow_order-$.sow_order));function w({row:h,field:M,operation:k}){k==="delete"?h.__typename==="SowServiceBundle"?t.deleteSowServiceBundle(h):h.__typename==="SowService"?t.deleteSowService(h):h.__typename==="SowProduct"?t.deleteSowProduct(h):h.__typename==="SowGuideline"&&e.updateComponentType({row:h,operation:"delete"}):h.__typename==="SowServiceBundle"?t.updateSowServiceBundle({row:h,field:M}):h.__typename==="SowService"?t.updateSowService({row:h,field:M}):h.__typename==="SowProduct"?t.updateSowProduct(h,M):h.__typename==="SowGuideline"&&e.updateComponentType({row:h,field:M})}ye(()=>e.selectedComponentTypeRef,()=>{Object.keys(e.selectedComponentTypeRef).length!==0&&w({row:e.selectedComponentTypeRef,field:e.selectedComponentTypeRef.field,operation:e.selectedComponentTypeRef.operation})});const i=f({sowServices:[]});let s=null,a=1;function o(h,M,k,$,q){function c(I){if(!i.value.sowServices.some(O=>O.Name===I.Name))i.value.sowServices.push({...I,sow_order:i.value.sowServices.length});else{const O=i.value.sowServices.findIndex(H=>H.Name===I.Name);i.value.sowServices[O].sow_order=i.value.sowServices.length}}c(k),c($),console.log(h,"ðŸ«ðŸ«ðŸ«",M,i.value.sowServices.length,"length");let E=0;return E++,s&&clearTimeout(s),s=setTimeout(()=>{i.value.sowServices.forEach(I=>{I.__typename==="SowService"?t.updateSowService({row:I,field:"sow_order"}):I.__typename==="SowProduct"?t.updateSowProduct({row:I,field:"sow_order"}):I.__typename==="SowGuideline"?t.updateSowGuideline({row:I,field:"sow_order"}):I.__typename==="SowServiceBundle"&&t.updateSowServiceBundle({row:I,field:"sow_order"})}),s=null},3e3),q==="name"?(i.value.sowServices.sort((I,O)=>(I.sow_order-O.sow_order)*a),i.value.sowServices.map((I,O)=>{I.sow_order=O})):q==="price"?(i.value.sowServices.sort((I,O)=>(I.UnitPrice-O.UnitPrice)*a),i.value.sowServices.map((I,O)=>{I.sow_order=O})):q==="quantity"?(i.value.sowServices.sort((I,O)=>(I.Quantity-O.Quantity)*a),i.value.sowServices.map((I,O)=>{I.sow_order=O})):q==="total"&&(i.value.sowServices.sort((I,O)=>(I.LineTotal-O.LineTotal)*a),i.value.sowServices.map((I,O)=>{I.sow_order=O})),a*=-1,h<M?-E:h>M?+E:0}const r=$e([{name:"name",required:!0,label:"Name",align:"left",field:h=>h.Name,format:h=>`${h}`,click:"handleRowClick",sortable:!0,sort:(h,M,k,$)=>o(h,M,k,$,"name")},{name:"price",required:!0,label:"Price",align:"left",field:h=>h.UnitPrice!==null?h.UnitPrice:0,format:h=>`${h}`,sortable:!0,sort:(h,M,k,$)=>o(h,M,k,$,"price")},{name:"quantity",required:!0,label:"Quantity",align:"left",field:h=>h.quantity?h.quantity:h.Quantity,format:h=>`${h}`,sortable:!0,sort:(h,M,k,$)=>o(h,M,k,$,"quantity")},{name:"total",required:!0,label:"Total Price",align:"left",field:h=>h.LineTotal,format:h=>`${h}`,sortable:!0,sort:(h,M,k,$)=>o(h,M,k,$,"total")}]);function m(h){h?(r.splice(1,1),r.splice(1,0,{name:"setupFees",required:!0,label:"Setup Fee",align:"left",field:M=>M.UnitSetupFee?M.UnitSetupFee:0,format:M=>`${M}`}),r.splice(3,1),r.splice(3,0,{name:"totalSetupFees",required:!0,label:"Total Setup Fees",align:"left",field:M=>M.LineSetupFee?M.LineSetupFee:0,format:M=>`${M}`})):(r.splice(3,1),r.splice(3,0,{name:"total",required:!0,label:"Total Price",align:"left",field:M=>M.LineTotal,format:M=>`${M}`}),r.splice(1,1),r.splice(1,0,{name:"price",required:!0,label:"Price",align:"left",field:M=>M.UnitPrice!==null?M.UnitPrice:0,format:M=>`${M}`}))}ye(()=>e.showDetailedPricing,()=>{e.showDetailedPricing?(r.splice(3,1),r.splice(3,0,{name:"unitCost",required:!0,label:"Total Costs",align:"left",field:h=>h.LineTotalCost!==null?h.LineTotalCost:0,format:h=>`${h}`}),r.splice(1,1),r.splice(1,0,{name:"cost",required:!0,label:"Cost",align:"left",field:h=>h.UnitCost!==null?h.UnitCost:0,format:h=>`${h}`})):(r.splice(3,1),r.splice(3,0,{name:"total",required:!0,label:"Total Price",align:"left",field:h=>h.LineTotal,format:h=>`${h}`}),r.splice(1,1),r.splice(1,0,{name:"price",required:!0,label:"Price",align:"left",field:h=>h.UnitPrice!==null?h.UnitPrice:0,format:h=>`${h}`}))});function C(h,M){if(M==="Monthly")return h.filter(k=>k.BillingFrequency===M);if(M==="Yearly")return h.filter(k=>k.BillingFrequency===M)}return{columns:r,updateService:w,matchServiceTable:C,showSetupFeesColumns:m,computedServiceRows:v}}}),Od={class:"mt-10"};function Ad(e,t,v,w,i,s){const a=we("ComponentQTable");return l(),g("div",Od,[e.tableType==="Monthly"&&e.componentType.isMonthly||e.tableType==="Yearly"&&e.componentType.isYearly?(l(),R(a,{key:0,class:"mt-10",rows:e.computedServiceRows,columns:e.columns,title:e.tableType+" Hardware/Software/Licensing",updateComponent:e.updateService,readonly:e.readonly,breakdownByPeriodType:e.showDetailedPricing,customNoDataText:"No Recurring Services Found","binary-state-sort":!0,showSetupFeesColumns:e.showSetupFeesColumns,loading:!1},null,8,["rows","columns","title","updateComponent","readonly","breakdownByPeriodType","showSetupFeesColumns"])):y("",!0)])}const Rd=Ze($d,[["render",Ad]]),Ld=Ke({props:{sow:{type:Object,required:!0},componentType:{type:Object,required:!0}},setup(e){const t=mt("formatTotal"),v=mt("windowWidth"),w=[{name:"type",required:!0,label:"One Time",align:"left",classes:"w-10",field:C=>C.type?C.type:"",format:C=>`${C}`},{name:"name",required:!0,label:"Total Type",align:"left",field:C=>C.name,format:C=>`${C}`},{name:"price",required:!0,label:"Total",align:"right",field:C=>t(C.price?C.price:0),format:C=>`${C}`}],i=ct(),s=K(()=>i.darkMode),a=[{name:"name",required:!0,label:"Total Type",align:"left",field:C=>C.name,format:C=>`${C}`},{name:"price",required:!0,label:"Total",align:"right",field:C=>C.price==="Total"?"Total":t(C.price?C.price:0),format:C=>`${C}`}],o=$e({engagementTotalBrokedown:[{name:"Products",price:e.sow.SowProductOneTimeTotalPrice},{name:"Implementation Type (Labor)",price:e.sow.NonOptionalOneTimeSowLaborTotal},{name:"Services",price:e.sow.SowServiceOneTimeTotal},{name:"Service Setup Fee",price:e.sow.SowServiceSetupFeeTotal},{type:"Total",name:"One Time Total (Labor)",price:e.sow.NonOptionalOneTimeSowLaborTotal,bold:!0},{type:"Total",name:"One Time Total (Non Labor)",price:e.sow.SowNonLaborOneTimeTotal,bold:!0},{type:"Monthly",name:"Total Type",price:"Total",bold:!0},{name:"Products",price:e.sow.SowProductMonthlyTotalPrice},{name:"Implementation Type (Labor)",price:e.sow.NonOptionalMonthlySowLaborTotal},{name:"Services",price:e.sow.SowServiceMonthlyTotal},{type:"Total",name:"Monthly Total (Non Labor)",price:e.sow.SowNonLaborMonthlyTotal,bold:!0},{type:"Yearly",name:"Total Type",price:"Total",bold:!0},{name:"Products",price:e.sow.SowProductYearlyTotalPrice},{name:"Implementation Type (Labor)",price:e.sow.NonOptionalYearlySowLaborTotal},{name:"Services",price:e.sow.SowServiceYearlyTotal},{type:"Total",name:"Yearly Total (Non Labor)",price:e.sow.SowNonLaborYearlyTotal,bold:!0},{type:"Summary",name:"Total Type",price:"Total",bold:!0},{type:"Products",name:"Sow Product Total",price:e.sow.SowProductTotalPrice,bold:!0},{type:"Services",name:"Sow Service Total",price:e.sow.SowServiceTotal,bold:!0},{type:"Labor",name:"Sow Implementation (Labor) Total",price:e.sow.SowLaborTotal,bold:!0},{type:"Costs",name:"Estimated Total Costs (Non Labor)",price:e.sow.SowProductTotalCost,bold:!0},{type:"Costs",name:"Estimated Total Costs (Labor)",price:e.sow.SowLaborTotalCost,bold:!0},{type:"Annual",name:"Annual Total",price:e.sow.AnnualTotal,bold:!0}],engagementTotals:[{name:"One Time Total",price:e.sow.NonOptionalOneTimeSowTotal},{name:"Monthly Recurring Total",price:e.sow.NonOptionalMonthlySowTotal},{name:"Yearly Recurring Total",price:e.sow.NonOptionalYearlySowTotal},{name:"Estimated Total Costs",price:e.sow.SowProductTotalCost+e.sow.SowLaborTotalCost}]});nt(()=>{e.sow.NonOptionalMonthlySowLaborTotal!==0&&o.engagementTotalBrokedown.splice(9,0,{type:"Total",name:"Monthly Total (Labor)",price:e.sow.NonOptionalMonthlySowLaborTotal,bold:!0}),e.sow.NonOptionalYearlySowLaborTotal!==0&&o.engagementTotalBrokedown.splice(15,0,{type:"Total",name:"Yearly Total (Labor)",price:e.sow.NonOptionalYearlySowLaborTotal,bold:!0})}),ye(()=>e.sow,()=>{o.engagementTotals=[{name:"One Time Total",price:e.sow.NonOptionalOneTimeSowTotal},{name:"Monthly Recurring Total",price:e.sow.NonOptionalMonthlySowTotal},{name:"Yearly Recurring Total",price:e.sow.NonOptionalYearlySowTotal}],o.engagementTotalBrokedown=[{name:"Products",price:e.sow.SowProductOneTimeTotalPrice},{name:"Implementation Type (Labor)",price:e.sow.NonOptionalOneTimeSowLaborTotal},{name:"Services",price:e.sow.SowServiceOneTimeTotal},{type:"Total",name:"One Time Total (Labor)",price:e.sow.NonOptionalOneTimeSowLaborTotal,bold:!0},{type:"Total",name:"One Time Total (Non Labor)",price:e.sow.NonOptionalOneTimeSowTotal,bold:!0},{type:"Monthly",name:"Total Type",price:"Total",bold:!0},{name:"Products",price:e.sow.SowProductMonthlyTotalPrice},{name:"Implementation Type (Labor)",price:e.sow.NonOptionalMonthlySowLaborTotal},{name:"Services",price:e.sow.SowServiceMonthlyTotal},{type:"Total",name:"Monthly Total (Non Labor)",price:e.sow.NonOptionalMonthlySowTotal,bold:!0},{type:"Yearly",name:"Total Type",price:"Total",bold:!0},{name:"Products",price:e.sow.SowProductYearlyTotalPrice},{name:"Implementation Type (Labor)",price:e.sow.NonOptionalYearlySowLaborTotal},{name:"Services",price:e.sow.SowServiceYearlyTotal},{type:"Total",name:"Yearly Total (Non Labor)",price:e.sow.NonOptionalMonthlySowTotal,bold:!0},{type:"Summary",name:"Total Type",price:"Total",bold:!0},{type:"Products",name:"Sow Product Total",price:e.sow.SowProductTotalPrice,bold:!0},{type:"Services",name:"Sow Service Total",price:e.sow.SowServiceTotal,bold:!0},{type:"Labor",name:"Sow Implementation (Labor) Total",price:e.sow.SowLaborTotal,bold:!0},{type:"Costs",name:"Estimated Total Costs (Non Labor)",price:e.sow.SowProductTotalCost,bold:!0},{type:"Costs",name:"Estimated Total Costs (Labor)",price:e.sow.SowLaborTotalCost,bold:!0},{type:"Annual",name:"Annual Total",price:e.sow.AnnualTotal,bold:!0}]});const r=f(!1);function m(C){r.value=C}return{state:o,formatTotal:t,columns:a,showPeriodTypeBreakdown:r,setShowPeriodTypeBreakdown:m,breakdownColumns:w,windowWidth:v,darkmode:s}}});function qd(e,t,v,w,i,s){return l(),R(To,{class:F([e.darkmode?"bg-[#28334E]":"q-table-bordered","shadow-md mt-10 w-full"]),dark:e.darkmode,"table-header-class":e.showPeriodTypeBreakdown?e.darkmode?"bg-[#2f3a57] text-weight-bolder":"bg-grey-2 text-weight-bolder":"text-bold",flat:"",bordered:!e.darkmode,dense:e.showPeriodTypeBreakdown,rows:e.showPeriodTypeBreakdown?e.state.engagementTotalBrokedown:e.state.engagementTotals,data:e.showPeriodTypeBreakdown?e.state.engagementTotalBrokedown:e.state.engagementTotals,columns:e.showPeriodTypeBreakdown?e.breakdownColumns:e.columns,"row-key":"sow_guideline_id","hide-bottom":"","rows-per-page-options":[50]},{top:T(()=>[n("div",{class:F(["w-full flex justify-start sm:justify-center",e.showPeriodTypeBreakdown?"py-[.38rem]":"p-3"])},[...t[2]||(t[2]=[n("p",{class:"p-0 m-0 text-xl text-primary"},"Engagement Summary",-1)])],2),u(At,{modelValue:e.showPeriodTypeBreakdown,"onUpdate:modelValue":t[0]||(t[0]=a=>e.showPeriodTypeBreakdown=a),label:e.windowWidth<400?"Pricing":"Show Detailed Pricing",class:F(e.windowWidth<350?"flex justify-end w-full mr-5 -mt-4":"absolute right-5"),onClick:t[1]||(t[1]=a=>e.setShowPeriodTypeBreakdown(e.showPeriodTypeBreakdown))},null,8,["modelValue","label","class"])]),body:T(a=>[a.row.Name==="seperator"?(l(),R(lo,{key:0,style:{"pointer-events":"none"}},{default:T(()=>[u(no,{colspan:"5",class:"text-weight-medium text-left italic"},{default:T(()=>[...t[3]||(t[3]=[J("Associated Products & Services ",-1)])]),_:1})]),_:1})):y("",!0),a.row.Name!=="seperator"?(l(),R(lo,{key:1,props:a},{default:T(()=>[(l(!0),g(Oe,null,Ge(a.cols,o=>(l(),R(no,{key:o.name,props:a,class:"p-0 pt-0",style:$t(a.row.bold&&(a.row.type==="Monthly"||a.row.type==="Yearly"||a.row.type==="Summary")||a.row.type==="Products"||a.row.type==="Services"||a.row.type==="Labor"||a.row.type==="Annual"||a.row.type==="Total"?e.darkmode?"background: #2f3a57":"background: #F5F5F5;":"")},{default:T(()=>[o.name==="name"?(l(),g("div",{key:0,class:F(a.row.bold?a.row.type==="Monthly"||a.row.type==="Yearly"||a.row.type==="Summary"?"text-weight-medium text-xs":"text-weight-medium":"")},V(a.row[o.name]),3)):o.name==="type"?(l(),g("div",{key:1,class:F(["text-left",a.row.bold?a.row.type==="Monthly"||a.row.type==="Yearly"||a.row.type==="Summary"?"text-weight-medium text-xs":"text-weight-medium italic":""])},V(a.row[o.name]),3)):(l(),g("div",{key:2,class:F(["text-right",a.row.bold?a.row.type==="Monthly"||a.row.type==="Yearly"||a.row.type==="Summary"?"text-weight-medium text-xs":"text-bold":""])},V(a.row.price==="Total"?"Total":e.formatTotal(a.row[o.name])),3))]),_:2},1032,["props","style"]))),128))]),_:2},1032,["props"])):y("",!0)]),_:1},8,["class","dark","table-header-class","bordered","dense","rows","data","columns"])}const Ed=Ze(Ld,[["render",qd],["__scopeId","data-v-4d2564f2"]]),Bd=Ke({name:"BasicQTable",props:{columns:{type:Array,required:!0},rows:{type:Array,required:!0},title:{type:String,required:!0}},setup(){const e=K(()=>ct().darkmode);return{formatTotal:mt("formatTotal"),darkmode:e}}}),Vd={class:"w-full flex justify-center py-3"},jd={class:"p-0 m-0 text-xl text-primary"},Fd={key:0,class:"flex items-center"},Ud={style:{"white-space":"pre-line"}};function Qd(e,t,v,w,i,s){return l(),R(To,{class:F(["shadow-md mt-10 w-full",e.darkmode?"":"q-table-bordered"]),flat:"",bordered:!e.darkmode,rows:e.rows,data:e.rows,columns:e.columns,"row-key":"sow_guideline_id","hide-bottom":"","rows-per-page-options":[50]},{top:T(()=>[n("div",Vd,[n("p",jd,V(e.title),1)])]),body:T(a=>[a.row.Name!=="One Time Total"&&a.row.Name!=="Monthly Total"&&a.row.Name!=="Yearly Total"?(l(),R(lo,{key:0,props:a,class:F(a.row.UnitPrice==="Price"?"bg-gray-50":"")},{default:T(()=>[(l(!0),g(Oe,null,Ge(a.cols,o=>(l(),R(no,{key:o.name,props:a,class:"p-0 pt-0"},{default:T(()=>[n("div",null,[o.name==="name"?(l(),g("div",Fd,[n("p",null,V(o.field(a.row)),1),a.row.ToolTip?(l(),R(Qe,{key:0,name:"help",class:"ml-4 text-slate-500 hover:text-blue-400 transition-all duration-500",size:"xs"},{default:T(()=>[u(Me,{class:"text-sm bg-white shadow-md border rounded-sm text-slate-700"},{default:T(()=>[n("p",Ud,V(a.row.ToolTip),1)]),_:2},1024)]),_:2},1024)):y("",!0)])):(l(),g(Oe,{key:1},[J(V(o.field(a.row)),1)],64))])]),_:2},1032,["props"]))),128))]),_:2},1032,["props","class"])):y("",!0)]),_:1},8,["class","bordered","rows","data","columns"])}const Gd=Ze(Bd,[["render",Qd]]),Wd=Ke({components:{BasicQTable:Gd},props:{sow:{type:Object,required:!0},componentType:{type:Object,required:!0}},setup(e){function t(o){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o).replace("$","$ ")}const v=K(()=>ct().darkmode),{result:w,error:i}=Le(gl,{name:"SowRecord"});ge(()=>{i.value&&console.log(i.value),w.value&&console.log(w.value)});const s=[{name:"name",required:!0,label:"Total Type",align:"left",field:o=>o.MilestoneName,format:o=>`${o}`,sortable:!0},{name:"price",required:!0,label:"Total",align:"left",field:o=>t(o.MilestonePayment),format:o=>`${o}`,sortable:!0}],a=K(()=>e.sow.SowMilestones?[...e.sow.SowMilestones,{MilestoneName:"Estimated Project Milestones Total",MilestonePayment:e.sow.SowMilestoneGrandTotal}]:[]);return{formatTotal:t,columns:s,darkmode:v,computedSowMilestones:a}}});function Hd(e,t,v,w,i,s){const a=we("BasicQTable");return l(),R(a,{rows:e.computedSowMilestones,columns:e.columns,title:"Project Milestones",dark:e.darkmode,class:F(e.darkmode&&"bg-[#28334E]")},null,8,["rows","columns","dark","class"])}const Yd=Ze(Wd,[["render",Hd],["__scopeId","data-v-e50e530f"]]),zd=Ke({components:{CreateComponentModal:dr,AttachImplementation:Br,ProductTable:Md,ServiceTable:Rd,EngagementSummary:Ed,ProjectMilestone:Yd,ComponentQTable:No,SearchModel:Ht,draggable:xo,AccordianQTableDeep:So},props:{noEdit:{type:Boolean,default:!1},sow:{type:Object,required:!0},sowTotals:{type:Object,default:()=>{}},refetchSowTotals:{type:Function,default:()=>{}},hasImplementationsLoaded:{type:Boolean,default:!1},retoggleSection:{type:Function,default:()=>{}}},setup(e){const t=f([{HasOptionalGuidelines:null,IsOptional:!1,LineTotalCost:void 0,Name:"Loading Implementation Test",NonOptionalMonthlySowLaborTotal:0,NonOptionalOneTimeSowLaborTotal:3029,NonOptionalYearlySowLaborTotal:0,SowLaborTotal:3029,SupportType:null,id:28352,implementation_type_id:46,index:0,isEditing:!1,isProdServices:!1,notes:null,showProdServ:!1,sow_detail:null,sow_id:12492,sow_order:null,__typename:"SowImplementationType",recurring:[],guidelines:[{BillingFrequency:"One-Time",implementation_guideline_id:276,id:58084,EstimatedHours:1,EstimatedHoursSubtotal:4,Exclusions:null,HasSowProducts:!1,HasSowServices:!1,ImplementationTypeID:46,IsAlreadyImplemented:0,IsOptional:!1,LineTotal:680,LineTotalCost:360,Name:"Loading Guideline Test 1",PriceOverride:null,Quantity:4,SkillTier:"ProjectManager",UnitCost:90,UnitPrice:170,index:0,quantity:4,sow_detail:null,sow_id:12492,sow_order:null,type:"Guideline",__typename:"SowGuideline"},{BillingFrequency:"One-Time",id:58083,implementation_guideline_id:275,EstimatedHours:1,EstimatedHoursSubtotal:4,Exclusions:null,HasSowProducts:!1,HasSowServices:!1,ImplementationTypeID:46,IsAlreadyImplemented:0,IsOptional:!1,LineTotal:680,LineTotalCost:360,Name:"Loading Guideline Test 2",PriceOverride:null,Quantity:4,SkillTier:"ProjectManager",UnitCost:90,UnitPrice:170,index:0,quantity:4,sow_detail:null,sow_id:12492,sow_order:null,type:"Guideline",__typename:"SowGuideline"}]}]),v=f({BillingFrequency:"One-Time",implementation_guideline_id:276,id:58084,EstimatedHours:1,EstimatedHoursSubtotal:4,Exclusions:null,HasSowProducts:!1,HasSowServices:!1,ImplementationTypeID:46,IsAlreadyImplemented:0,IsOptional:!1,LineTotal:680,LineTotalCost:360,Name:"Loading Guideline Test 1",PriceOverride:null,Quantity:4,SkillTier:"ProjectManager",UnitCost:90,UnitPrice:170,index:0,quantity:4,sow_detail:null,sow_id:12492,sow_order:null,type:"Guideline",__typename:"SowGuideline"}),w=f([]);nt(()=>{console.log("mounted show SOW",e.sow),e.sow?e.sow.relatedImplementationTypes?.map((N,z)=>{w.value.push({...N,guidelines:f([])});for(var d=0;d<N.SowGuidelineAmount;d++)w.value[z].guidelines.push({...v.value,ImplementationTypeID:N.implementation_type_idNew})}):w.value=t.value});const i=f([]),s=f([]),a=f([]),o=f([]),r=f([]),m=f([]),C=ft(),h=K(()=>parseInt(C.params.id)),M=ct(),k=K(()=>M.darkMode),$=f(window.innerWidth),q=()=>{$.value=window.innerWidth,E()},c=Wt();nt(async()=>{He.onSetValueCallback(Xe),window.addEventListener("resize",q),E(),(_.value.length===0||h.value!==c.sowID)&&(c.fetchSowServices(),c.fetchSowServiceBundles(),c.fetchSowProducts(),setTimeout(async()=>{c.fetchSowImplementations(),c.fetchSowGuidelines()},1e3),setTimeout(()=>{o.value.some(N=>N.type==="ServiceBundle")||(c.fetchSowServiceBundles(),console.log("fetching service bundles"))},7e3)),c.setSowID(h.value),c.onSetValueCallback(We)}),to(()=>{window.removeEventListener("resize",q)});const E=()=>{if($.value<=550){const N=L.findIndex(z=>z.name==="hours");N!==-1&&L.splice(N,1)}else L.find(z=>z.name==="hours")||L.splice(3,0,{name:"hours",required:!0,label:"Est. Hours",align:"left",field:z=>z.EstimatedHours,format:z=>`${z}`})},I=kt(),O=$e({isDragging:!1,showAdd:!1,addType:"",associatedImplementation:{name:"",_id:null,sow_implementation_type_idNew:null},editMode:!1,showComponentModal:!1,showAddImplementation:!1,isEditing:!1,impleSearch:"",impleSearchID:null,confirm:!1,deletedImpleID:null,resetImplementationSearch:!1,searchFilterOutExisting:!1,componentType:{isProducts:!1,isMonthly:!1,isYearly:!1,isLoaded:!1}});function H(){_.value.map(z=>{z.recurring.length>0?z.isProdServices=!0:z.isProdServices=!1,z.recurring.map(d=>{d.BillingFrequency==="One-Time"&&(O.componentType.isProducts=!0),d.BillingFrequency==="Monthly"&&(O.componentType.isMonthly=!0),d.BillingFrequency==="Yearly"&&(O.componentType.isYearly=!0)}),o.value.map(d=>{d.BillingFrequency==="Monthly"&&(O.componentType.isMonthly=!0),d.BillingFrequency==="Yearly"&&(O.componentType.isYearly=!0)})});function N(z){return!o.value.some(d=>d.BillingFrequency===z)}N("Monthly")&&(O.componentType.isMonthly=!1),N("Yearly"),N("One-Time")}const _=f([]),Ve=f([]),me=f(!e.hasImplementationsLoaded),Se=f(!1);function Ae(){if(console.log("pushComponentArray","sowImplementations ref",i.value,"sowGuidelines ref",s.value),!Se.value){Se.value=!0;for(var N=0;i.value.length>N;N++){console.log(N);const U=i.value.map(S=>({...S,guidelines:f([]),recurring:f([]),isProdServices:!1,isEditing:!1,index:N,Name:S.Name}));console.log(i.value[N].Name,"sowImplementations value",ce.value),_.value=U,me.value?ce.value=w.value:ce.value=_.value.sort((S,X)=>S.sow_order-X.sow_order)}setTimeout(()=>{i.value.length>0&&(O.componentType.isLoaded=!0)},500);for(var z=0;i.value.length>N;N++){const U=f([]),S=f([]),X=f([]);console.log(z);for(var d=0;s.value.length>d;d++)if(s.value[d].ImplementationTypeID===i.value[N].implementation_type_id){let se=function(ee){for(var Z=0;ee.length>Z;Z++)if(ee[Z].sow_guideline_idNew===s.value[d].id||ee[Z].SowGuidelineName==="Multiple"||ee[Z].__typename==="SowGuideline"&&ee[Z].BillingFrequency!=="One-Time"&&ee[Z].ImplementationTypeID===_.value[N].implementation_type_id)switch(ee[Z].BillingFrequency){case"One-Time":!_.value[N].recurring.some(p=>p.id===ee[Z].id)&&!U.value.some(p=>p.id===ee[Z].id)&&U.value.push(ee[Z]);break;case"Monthly":!_.value[N].recurring.some(p=>p.id===ee[Z].id)&&!S.value.some(p=>p.id===ee[Z].id)&&S.value.push(ee[Z]);break;case"Yearly":!_.value[N].recurring.some(p=>p.id===ee[Z].id)&&!S.value.some(p=>p.id===ee[Z].id)&&X.value.push(ee[Z]);break}};s.value[d].BillingFrequency==="Monthly"?o.value.some(ee=>ee.id===s.value[d].id)||o.value.push(s.value[d]):s.value[d].BillingFrequency==="Yearly"?o.value.some(ee=>ee.id===s.value[d].id)||o.value.push(s.value[d]):_.value[N].guidelines.push(s.value[d]),se(r.value),se(m.value),se(s.value),setTimeout(()=>{r.value.map(ee=>{a.value.some(Z=>Z.id===ee.id)||a.value.push(ee)}),m.value.map(ee=>{o.value.some(Z=>Z.id===ee.id&&Z.Name===ee.Name)||o.value.push(ee)}),P.value.map(ee=>{o.value.some(Z=>Z.id===ee.id&&Z.Name===ee.Name)||o.value.push(ee)})},5e3)}U.value.length>0&&_.value[N].recurring.push(...U.value),S.value.length>0&&_.value[N].recurring.push(...S.value),X.value.length>0&&_.value[N].recurring.push(...X.value)}setTimeout(()=>{e.sow&&!_.value.some(U=>U.sow_idNew===e.sow._id)&&(e.retoggleSection("implementations"),console.log(_.value.length,e.sow.relatedImplementationTypes.length,"implementationTypes watchEffect"),I.notify({message:"Reloading SOW Implementation Types...",color:"primary",position:"bottom",spinner:!0,timeout:1500}))},7e3)}setTimeout(()=>{me.value=!1},200),console.log(_.value,"componentArray")}const De=f(0);ge(()=>{c.sowImplementations&&(De.value<1||i.value.length===0||i.value.length!==c.sowImplementations.length||i.value.map(N=>N.SowLaborTotal!==c.sowImplementations.map(z=>z.SowLaborTotal)))&&(i.value=c.sowImplementations,i.value.map(N=>{_.value.map(z=>{z._id===N._id&&(z.SowLaborTotal=N.SowLaborTotal)})}),(_.value.length===0||De.value<1)&&s.value.length>0?(De.value+=1,Se.value=!1,Ae()):_.value.map(N=>{i.value.map(z=>{N._id===z._id&&(N.LineTotalCost=z.LineTotalCost)})}))});const ke=f(0);ge(()=>{if(c.sowGuidelines&&ke.value<5){s.value=c.sowGuidelines;const U=s.value.filter(X=>X.BillingFrequency==="Monthly"),S=s.value.filter(X=>X.BillingFrequency==="Yearly");if(U.length>0&&S.length>0)U.length>0&&(s.value=[...s.value,...U]),S.length>0&&(s.value=[...s.value,...S]);else{ke.value<5&&(ke.value++,_.value.map(X=>{s.value.map(se=>{!X.guidelines.some(ee=>ee._id===se._id)&&se.ImplementationTypeID===X.implementation_type_id&&(se.BillingFrequency==="One-Time"?X.guidelines.push(se):(se.BillingFrequency==="Monthly"||se.BillingFrequency==="Yearly")&&!X.recurring.some(ee=>ee._id===se._id)&&X.recurring.push(se))})}));for(var N=0;i.value.length>N;N++){for(var z=!1,d=0;s.value.length>d;d++)if(s.value[d].ImplementationTypeID===i.value[N].implementation_type_id&&s.value[d].BillingFrequency==="Yearly"){z=!0;break}z?s.value=[...s.value,...c.sowGuidelines]:s.value=c.sowGuidelines}}}});const qe=f(0),oe=f(null);ge(()=>{if(c.sowProducts&&r.value.length===0){oe.value=r.value.length,r.value=c.sowProducts;const N=r.value.filter(Z=>Z.BillingFrequency==="One-Time").filter(Z=>!a.value.some(p=>Z._id===p._id)),z=m.value.filter(Z=>Z.BillingFrequency==="One-Time").filter(Z=>!o.value.some(p=>Z._id===p._id)),d=f([...N,...z]),U=f(r.value.filter(Z=>Z.BillingFrequency==="Monthly").filter(Z=>!a.value.some(p=>p._id===Z._id))),S=f(r.value.filter(Z=>Z.BillingFrequency==="Yearly").filter(Z=>!a.value.some(p=>p._id===Z._id)));r.value=[...d.value,...U.value,...S.value];const X=d.value.filter(Z=>Z.IsOptional===!0),se=d.value.filter(Z=>Z.IsOptional===!1);setTimeout(()=>{(U.value.length>0||S.value.length>0)&&(o.value=[...o.value,...U.value,...S.value])},1e3),_.value.map(Z=>{let p=!1;r.value.map(b=>{Z.recurring.map(B=>B._id).includes(b._id)&&(p=!0)}),p||r.value.map(b=>{Z._id===b.SowImplementationTypeID&&(Z.isProdServices=!0,Z.recurring.some(B=>B._id===b._id)||We("product","create",b,Z.implementation_type_id))})}),qe.value<1&&r.value.length>0&&(qe.value+=1,a.value=[...se,...X]),r.value.map(Z=>{(Z.BillingFrequency==="Monthly"||Z.BillingFrequency==="Yearly")&&(o.value.some(p=>p._id===Z._id)||o.value.push(Z))});const ee=f(!1);setTimeout(()=>{ee.value||(ee.value=!0)},500)}});const pe=f(null);ge(()=>{if(c.sowServices){pe.value=m.value.length,m.value=c.sowServices,_.value.map(S=>{let X=!1;m.value.map(se=>{S.recurring.map(ee=>ee.Name).includes(se.Name)&&(X=!0)}),X||m.value.map(se=>{S.Name===se.SowImplementationTypeName&&(S.isProdServices=!0,o.value.some(ee=>ee.Name===se.Name)||We("product","create",se,S.implementation_type_id))})});const N=m.value.filter(S=>S.IsOptional===!0),z=m.value.filter(S=>S.IsOptional===!1),d=r.value.filter(S=>S.BillingFrequency!=="One-Time"&&o.value.some(X=>X.Name!==S.Name));o.value=[...z,...N,...d],console.log(c.sowServices,m.value,o.value,"THE WATCHEFEECT OF SERVICES");const U=f(!1);setTimeout(()=>{H(),U.value||(U.value=!0)},500)}});const ve=f(0),P=f([]);ge(()=>{if(c.sowServiceBundles){P.value=c.sowServiceBundles,ve.value<1&&P.value.length>0&&(P.value.map(z=>{m.value.some(d=>d._id===z._id)||m.value.push(z)}),ve.value+=1),_.value.map(z=>{let d=!1;P.value.map(U=>{z.recurring.map(S=>S._id).includes(U._id)&&(d=!0)}),d||P.value.map(U=>{z.Name===U.SowImplementationTypeName&&(z.isProdServices=!0,o.value.some(S=>S.Name===U.Name)||We("service","create",U,z.implementation_type_id))})});const N=f(!1);setTimeout(()=>{H(),N.value||(N.value=!0)},2e3)}});function x(N,z,d){return{name:N,required:!0,label:z,align:"left",field:d,format:U=>`${U}`,sortable:N!=="hours",sort:(U,S,X,se)=>Ie(U,S,X,se,N)}}const L=$e([x("name","Name",N=>N.Name),x("price","Price",N=>N.UnitPrice!==null?N.UnitPrice:0),x("quantity","Quantity",N=>N.quantity?N.quantity:N.Quantity),x("hours","Est. Hours",N=>N.EstimatedHours),x("total","Total Price",N=>N.LineTotal)]),G=f([]);let ae=null,fe=1;const Y=f(!1);function Ie(N,z,d,U,S){Y.value=!0;function X(ee){if(ee.__typename==="SowGuideline")if(!G.value.some(Z=>Z.Name===ee.Name))G.value.push(ee);else{const Z=G.value.findIndex(p=>p.Name===ee.Name);G.value[Z].sow_order=G.value.length}}X(d),X(U);let se=0;if(se++,ae&&clearTimeout(ae),ae=setTimeout(()=>{G.value.forEach(ee=>{ee&&c.updateSowGuideline({row:ee,field:"sow_order"})}),ae=null},5e3),d.type==="Guideline"&&U.type==="Guideline")return S==="name"?(G.value.sort((ee,Z)=>(ee.sow_order-Z.sow_order)*fe),G.value.map((ee,Z)=>{ee.sow_order=Z})):S==="price"?(G.value.sort((ee,Z)=>(ee.UnitPrice-Z.UnitPrice)*fe),G.value.map((ee,Z)=>{ee.sow_order=Z})):S==="quantity"?(G.value.sort((ee,Z)=>(ee.Quantity-Z.Quantity)*fe),G.value.map((ee,Z)=>{ee.sow_order=Z})):S==="total"&&(G.value.sort((ee,Z)=>(ee.LineTotal-Z.LineTotal)*fe),G.value.map((ee,Z)=>{ee.sow_order=Z})),fe*=-1,N<z?-se:N>z?+se:0}const j=f(!1),ie=f({}),re=f({});function Ee({row:N,field:z,operation:d}){console.log(N,z,d,"updateComponentType"),N.__typename==="SowGuideline"?d!=="delete"?c.updateSowGuideline({row:N,field:z}):(N.BillingFrequency==="Monthly"||N.BillingFrequency,c.deleteSowGuideline(N)):N.__typename==="SowProduct"?ie.value={...N,field:z,operation:d}:re.value={...N,field:z,operation:d}}function Xe(N){N!=="close"&&(je(!0),O.impleSearchID=N._id,O.impleSearch=N.Name)}function je(N){O.showAddImplementation=N,N===!1&&(O.resetImplementationSearch=!0)}function pt(N,z){z&&(O.associatedImplementation.name=z.Name,O.associatedImplementation._id=z.implementation_type_id,O.associatedImplementation.sow_implementation_type_id=z._id),O.showComponentModal="",setTimeout(()=>{O.showComponentModal=N},200)}const Fe=f({guidelines:[],products:[],services:[],serviceBundles:[]});function We(N,z,d,U){switch(console.log(N,z,d,U,"pushNewResponseData"),setTimeout(()=>{ie.value={},re.value={}},1e3),N){case"implementation":z==="create"?(_.value.push({...d,guidelines:f([]),recurring:f([]),isProdServices:!1,isEditing:!1,index:i.value.length,showProdServ:f(!1)}),O.searchFilterOutExisting=d.implementation_type_id,O.resetImplementationSearch=!O.resetImplementationSearch):z==="delete"&&(_.value.splice(_.value.findIndex(S=>S._id===d._id),1),i.value.splice(i.value.findIndex(S=>S._id===d._id),1),a.value=a.value.filter(S=>S.SowImplementationTypeID!==d._id),o.value=o.value.filter(S=>S.SowImplementationTypeID!==d._id||S.SowImplementationTypeName!==d.Name||S.ImplementationTypeID!==d._id),s.value=s.value.filter(S=>S.ImplementationTypeID!==d.implementation_type_id)),setTimeout(()=>{c.fetchSowGuidelines(),c.fetchSowProducts(),c.fetchSowServices(),c.fetchSowServiceBundles(),H()},2e3);break;case"product":case"service":case"guideline":if(z==="create"){const S=d.BillingFrequency;Fe.value.products.push(d.product_id);const X=N.charAt(0).toUpperCase()+N.slice(1);_.value.map(se=>{(se.Name===d.SowImplementationTypeName||se.implementation_type_id===U||se.Name===U)&&se.__typename!=="SowGuideline"&&(se.recurring.some(ee=>ee.Name===d.Name)||se.recurring.splice(0,0,{...d,type:X,index:r.value.length}))}),X==="Guideline"&&S!=="Monthly"&&S!=="Yearly"?(_.value.filter(se=>{se.implementation_type_id===d.ImplementationTypeID&&se.guidelines.push({...d,type:"Guideline",index:s.value.length,Quantity:d.quantity})}),Fe.value.guidelines.push(d.implementation_guideline_id)):(S==="Monthly"||S==="Yearly")&&(_.value.map(se=>{se.Name===d.SowImplementationTypeName&&!se.recurring.some(ee=>ee.Name===d.Name)&&se.recurring.push({...d,type:X,index:r.value.length})}),m.value.some(se=>se.Name===d.Name)||m.value.push({...d,FixedPrice:d.UnitPrice,Quantity:d.Quantity,type:X,index:m.value.length}),o.value.some(se=>se.Name===d.Name)||o.value.push({...d,type:X,index:r.value.length})),X==="Product"?(r.value.some(se=>se.Name===d.Name)||r.value.push({...d,FixedPrice:d.UnitPrice,type:"Product",index:r.value.length}),S==="One-Time"?a.value.some(se=>se.Name===d.Name)||a.value.push({...d,FixedPrice:d.UnitPrice,type:"Product",index:r.value.length}):(S==="Monthly"||S==="Yearly")&&(o.value.some(se=>se.Name===d.Name)||o.value.push({...d,FixedPrice:d.UnitPrice,Quantity:d.Quantity,type:"Product",index:r.value.length}))):X==="Service"?(m.value.some(se=>se.Name===d.Name)||m.value.push({...d,FixedPrice:d.UnitPrice,Quantity:d.Quantity,type:d.__typename==="SowService"?"Service":"Product",index:m.value.length}),o.value.some(se=>se.Name===d.Name)||o.value.push({...d,Quantity:d.Quantity,FixedPrice:d.UnitPrice,type:d.__typename==="SowService"?"Service":"Product",index:m.value.length})):X==="Guideline"&&(S==="Monthly"||S==="Yearly")&&(o.value.some(se=>se.Name===d.Name)||o.value.push({...d,FixedPrice:d.UnitPrice,Quantity:d.Quantity,type:"Guideline",index:m.value.length}),m.value.some(se=>se.Name===d.Name)||m.value.push({...d,FixedPrice:d.UnitPrice,Quantity:d.Quantity,type:"Guideline",index:m.value.length}))}else z==="update"?(_.value.map(S=>{S.recurring.filter(X=>{X._id===d._id&&(X.LineTotal=d.LineTotal,X.PriceOverride=d.PriceOverride,X.LineTotalCost=d.LineTotalCost)})}),N==="product"?(r.value=r.value.map(S=>((S._id===d._id||S.product_id===d.product_id)&&(S.LineTotal=d.LineTotal,S.PriceOverride=d.PriceOverride,S.LineTotalCost=d.LineTotalCost),S)),d.BillingFrequency==="One-Time"?a.value.map(S=>{S._id===d._id&&(S.LineTotal=d.LineTotal,S.PriceOverride=d.PriceOverride,S.LineTotalCost=d.LineTotalCost)}):(d.BillingFrequency==="Monthly"||d.BillingFrequency==="Yearly")&&o.value.map(S=>{S._id===d._id&&(S.LineTotal=d.LineTotal,S.PriceOverride=d.PriceOverride,S.LineTotalCost=d.LineTotalCost)})):N==="service"?(m.value=m.value.map(S=>(S.Name===d.Name&&(S.LineTotal=d.LineTotal,S.PriceOverride=d.PriceOverride,S.LineTotalCost=d.LineTotalCost,S.LineSetupFee=d.LineSetupFee),S)),o.value.map(S=>{S.Name===d.Name&&(S.LineTotal=d.LineTotal,S.PriceOverride=d.PriceOverride,S.LineTotalCost=d.LineTotalCost)})):N==="guideline"&&(_.value.map(S=>{S.guidelines.filter(X=>{X._id===d._id&&(X.EstimatedHoursSubtotal=d.EstimatedHoursSubtotal,X.LineTotal=d.LineTotal,X.PriceOverride=d.PriceOverride,X.LineTotalCost=d.LineTotalCost,X.quantity=d.quantity)})}),s.value=s.value.map(S=>(S._id===d._id&&(S.EstimatedHoursSubtotal=d.EstimatedHoursSubtotal,S.LineTotal=d.LineTotal,S.PriceOverride=d.PriceOverride,S.LineTotalCost=d.LineTotalCost),S)),(d.BillingFrequency==="Monthly"||d.BillingFrequency==="Yearly")&&(o.value.map(S=>{S._id===d._id&&(S.EstimatedHoursSubtotal=d.EstimatedHoursSubtotal,S.LineTotal=d.LineTotal,S.PriceOverride=d.PriceOverride,S.LineTotalCost=d.LineTotalCost)}),m.value.map(S=>{S._id===d._id&&(S.EstimatedHoursSubtotal=d.EstimatedHoursSubtotal,S.LineTotal=d.LineTotal,S.PriceOverride=d.PriceOverride,S.LineTotalCost=d.LineTotalCost)})))):z==="delete"&&(_.value.map(S=>{const X=f([]);S.recurring.map(Z=>{Z.BillingFrequency===d.BillingFrequency&&Z._id!==d._id&&X.value.push(Z)});const se=d.BillingFrequency;function ee(Z){const p=f(null);se==="One-Time"?Z==="header"?p.value="One Time Hardware/Software/Licensing":p.value="One Time Total":se==="Monthly"?Z==="header"?p.value="Monthly Hardware/Software/Licensing":p.value="Monthly Total":se==="Yearly"&&(Z==="header"?p.value="Yearly Hardware/Software/Licensing":p.value="Yearly Total"),S.recurring.splice(S.recurring.findIndex(b=>Z==="header"||Z==="footer"?b.Name===p.value:(b.__typename==="SowServiceBundle",b._id===d._id)),1)}X.value.length!==0?ee():(ee(),ee("header"),ee("footer"))}),_.value.map(S=>{S.recurring.map(X=>{X._id===d._id&&S.recurring.splice(S.recurring.findIndex(se=>se._id===d._id||se._id===d._id),1)})}),N==="product"?(r.value.splice(r.value.findIndex(S=>S._id===d._id),1),d.BillingFrequency==="One-Time"?a.value.splice(a.value.findIndex(S=>S._id===d._id),1):(d.BillingFrequency==="Monthly"||d.BillingFrequency==="Yearly")&&o.value.splice(o.value.findIndex(S=>S._id===d._id),1)):N==="service"&&(m.value.splice(m.value.findIndex(S=>S._id===d._id),1),o.value.splice(o.value.findIndex(S=>S._id===d._id),1)),N==="guideline"&&(_.value.map(S=>{S.implementation_type_id===d.ImplementationTypeID&&S.guidelines.splice(S.guidelines.findIndex(X=>X._id===d._id),1)}),s.value.splice(s.value.findIndex(S=>S._id===d._id),1),(d.BillingFrequency==="Monthly"||d.BillingFrequency==="Yearly")&&o.value.splice(o.value.findIndex(S=>S._id===d._id),1)));setTimeout(()=>{z!=="update"&&(N==="guideline"||N==="implementation")&&(c.fetchSowImplementations(),c.fetchSowProducts(),c.fetchSowServices(),c.fetchSowServiceBundles())},1e3),setTimeout(()=>{(N==="guideline"||N==="implementation")&&_.value.map(S=>{i.value.map(X=>{X._id===S._id&&(S.SowLaborTotal=X.SowLaborTotal)})})},2e3);break}setTimeout(()=>{e.refetchSowTotals(),c.fetchSowImplementations()},1e3)}const St=f([]),D=N=>z=>{St[N]=z},de=mt("formatTotal");function Ce(N,z){console.log(N,z,"matchImplementation");const d=[],U=[],S=[];let X=f([]);me.value?X.value=w.value[0].guidelines:X.value=s.value,X.value.map(te=>{te.ImplementationTypeID===N.implementation_type_id&&d.push(te)});function se(te,Te){te.map(_e=>{let Ft=!1;d.map(ca=>{ca._id===_e.sow_guideline_idNew&&(Ft=!0)}),Ft&&Te.push(_e)})}se(r.value,U),se(m.value,S),se(P.value,S),H();let ee=f([]);me.value?ee.value=w.value:ee.value=_.value;const Z=ee.value[z].guidelines,p=Z.filter(te=>te.IsAlreadyImplemented===1&&te.IsOptional===!1),b=Z.filter(te=>te.IsOptional===!0&&te.IsAlreadyImplemented===0),B=Z.filter(te=>te.IsOptional===!0&&te.IsAlreadyImplemented===1),Pe=[...Z.filter(te=>te.IsOptional===!1&&te.IsAlreadyImplemented===0),...p,...B,...b].filter(te=>te.ImplementationTypeID===N.implementation_type_id).sort((te,Te)=>te.sow_order-Te.sow_order);return console.log(N,m.value,o.value,"imple from matchImplementation",ee.value[z].recurring),N.showProdServ?[...Pe,...ee.value.find(te=>te.Name===N.Name).recurring.filter(te=>te.SowImplementationTypeName===N.Name)]:Pe}function tt(N,z){N.showProdServ=z}function at(N,z){setTimeout(()=>{N&&c.fetchSowProducts(),z&&(c.fetchSowServices(),c.fetchSowServiceBundles())},1e3)}const He=zo(),{result:bt,loading:Ct}=Le(hl,()=>({first:30,sow_idNew:h.value,Name:He.search,page:He.page,filterOutSowImplementationTypes:!0})),wt=f(!1),Ye=f([]),vt=f(null);ge(()=>{if(Ct.value&&(wt.value=!0),vt.value!==He.search&&(wt.value=!0,Ye.value=[],vt.value=He.search),bt.value){wt.value=!1;const N=Ye.value,z=bt.value.ImplementationTypes.data.filter(d=>!Ye.value.some(U=>U._id===d._id));He.page>1?Ye.value=[...Ye.value,...z]:Ye.value=[...z,...Ye.value],He.setSpinner(Ye.value,N)}});const A=f(!1);setTimeout(()=>{A.value=!0},7500);const Q=f(!0);setTimeout(()=>{Q.value=!1},3e3);const ce=f([]),ze=f(!1);let rt=null;function st(){rt&&clearTimeout(rt),rt=setTimeout(()=>{console.log("Updating Sow Implementation Order",ce.value),ce.value.forEach((N,z)=>{c.updateSowImplementation(N,"order",z),_.value.find(d=>{d._id===N._id&&(d.sow_order=z)})}),ze.value=!1,rt=null,s.value.forEach(N=>{ce.value.map((z,d)=>{!z.guidelines.some(U=>U._id===N._id)&&z.implementation_type_id===N.ImplementationTypeID&&ce.value[d].guidelines.push(N)})})},2e3)}function jt(N){N?(O.isDragging=N,O.isImplementationReordering=!0):setTimeout(()=>{O.isDragging=N},2e3)}function qt(){st()}const It=f(!0);ye(()=>me.value,()=>{me.value?ce.value=w.value:ce.value=_.value.sort((N,z)=>N.sow_order-z.sow_order)},{immediate:!0});function le(){console.log("refetchProducts"),c.fetchSowProducts()}const Re=f(!1),{result:Be,load:Ue,error:it}=Nt(Jo,()=>({sow_idNew:h.value,first:100}));function yt(N){console.log(N,"setShowTasksTable"),Re.value=N,j.value&&(j.value=!1),Ue()}const Pt=f([]);ge(()=>{if(it.value&&console.log(it.value,"error"),Be.value){const N=Be.value.SowGuidelineRequirements.data.map((d,U)=>({...d,index:U,textInput:d.text_Response,fileInput:d.fileUploadResponse,editMode:!1}));Pt.value=N;let z=[];Pt.value.map(d=>d.ImplementationTaskNames.map(U=>{z.push({Name:U,TaskName:U,SowImplementationTypeName:d.SowImplementationTypeName,SowGuidelineName:d.SowGuidelineName,ImplementationTaskRequirements:Pt.value.filter(S=>S.ImplementationTaskNames.includes(U))})})),Ve.value=_.value.map(d=>({...d,guidelines:s.value.filter(U=>U.ImplementationTypeID===d.implementation_type_id).map(U=>({...U,SowGuidelineName:U.Name,relatedItems:z.filter((S,X,se)=>X===se.findIndex(ee=>ee.TaskName===S.TaskName)).map(S=>({...S,Name:S.TaskName})),ImplementationTaskRequirements:Pt.value.filter(S=>S.ImplementationTaskNames.includes(U.Name))}))}))}});function Rt(N){console.log(N,"goToImplementationGuideline")}const Yt=$e([{name:"name",align:"left",label:"Name",field:N=>N.RequirementName,format:N=>`${N}`},{name:"description",align:"center",label:"Description",field:N=>N.RequirementDescription?N.RequirementDescription:"N/A",format:N=>`${N}`},{name:"actions",align:"right",label:"Actions"}]);return{state:O,sowImplementations:i,sowGuidelines:s,sowProducts:r,tableSowProducts:a,tableSowServices:o,sowServices:m,columns:L,matchImplementation:Ce,updateComponentType:Ee,setImplementationType:Xe,setShowImpleModal:je,setShowComponentModal:pt,deleteImplementation:c.deleteImplementation,updateImplementation:c.updateSowImplementation,pushNewResponseData:We,implementationRef:D,formatTotal:de,windowWidth:$,setShowProdServ:tt,breakdownByPeriodType:j,componentArray:_,refetchComponentType:at,excludedItems:Fe,selectedComponentProduct:ie,selectedComponentService:re,isLoadingImplementationTypes:wt,implementationTypes:Ye,implementationStore:c,hasNoSowImplementationTypes:A,searchOptions:He,sowServiceBundles:P,isInitial:Q,trackSowImplementationOrder:st,setHoverDraggingTag:jt,onUpdate:qt,darkmode:k,rearrangeImplementationItems:It,loading:me,refetchProducts:le,showTasksTable:Re,setShowTasksTable:yt,goToImplementationGuideline:Rt,sowImplementationRelations:Ve,taskViewColumns:Yt,componentArrayDraggableRef:ce,isImplementationReordering:ze}}}),Zd={class:"responsive-table-container"},Kd={class:"grid grid-cols-5 sm:flex justify-end mt-5 mb-[-1rem] animate__animated animate__fadeIn"},Jd={key:0,class:"mt-10"},Xd={key:1,class:"flex justify-center items-center mt-10"},_d={key:1,class:"responsive-table-container"};function xd(e,t,v,w,i,s){const a=we("SearchModel"),o=we("CreateComponentModal"),r=we("AttachImplementation"),m=we("ComponentQTable"),C=we("draggable"),h=we("AccordianQTableDeep"),M=we("ProductTable"),k=we("ServiceTable"),$=we("EngagementSummary"),q=we("ProjectMilestone");return l(),g("div",Zd,[n("div",Kd,[u(W,{color:e.darkmode?e.showTasksTable?"primary":"blue-12":e.showTasksTable?"blue-1":"blue-grey-1",icon:"wysiwyg",class:F(["ml-5 mr-2 sm:ml-0 sm:mr-5 w-10",e.darkmode?"text-grey-3 ":"text-grey-7"]),dark:"",glossy:"",dense:"",rounded:"",onClick:t[0]||(t[0]=c=>e.setShowTasksTable(!e.showTasksTable))},{default:T(()=>[u(Me,{class:"bg-white text-black shadow-md text-sm border"},{default:T(()=>[J(V(e.showTasksTable?"Hide":"Show")+" Implementation Guideline Relationships ",1)]),_:1})]),_:1},8,["color","class"]),u(W,{color:e.darkmode?e.breakdownByPeriodType?"primary":"blue-12":e.breakdownByPeriodType?"blue-1":"blue-grey-1",icon:"tune",class:F(["ml-5 mr-2 sm:ml-0 sm:mr-5 w-10",e.darkmode?"text-grey-3 ":"text-grey-7"]),glossy:"",dark:"",dense:"",rounded:"",disable:e.showTasksTable,onClick:t[1]||(t[1]=c=>e.breakdownByPeriodType=!e.breakdownByPeriodType)},{default:T(()=>[u(Me,{class:"bg-white text-black shadow-md text-sm border"},{default:T(()=>[J(V(e.breakdownByPeriodType?"Hide":"Show")+" Detailed Implementation Pricing ",1)]),_:1})]),_:1},8,["color","class","disable"]),!e.noEdit&&e.sow?(l(),R(a,{key:0,label:"Implementation Types",filled:"",dense:"","no-focus":"",rows:e.implementationTypes,loading:e.isLoadingImplementationTypes,store:e.searchOptions,class:"col-span-4 mr-5 ml-5 mt-5 sm:mt-0 sm:ml-0 sm:mr-0","cy-data":"implementation-search",style:$t(e.windowWidth<400?"min-width: 90%":"min-width: 300px"),sow:e.sow,resetSearch:e.state.resetImplementationSearch},null,8,["rows","loading","store","style","sow","resetSearch"])):y("",!0)]),e.state.showComponentModal?(l(),R(o,{key:0,associatedImplementation:e.state.associatedImplementation,showComponentModal:e.state.showComponentModal,setShowComponentModal:e.setShowComponentModal,pushNewResponseData:e.pushNewResponseData,refetchComponentType:e.refetchComponentType,excludedItems:e.excludedItems},null,8,["associatedImplementation","showComponentModal","setShowComponentModal","pushNewResponseData","refetchComponentType","excludedItems"])):y("",!0),u(r,{impleSearchID:e.state.impleSearchID,impleSearch:e.state.impleSearch,addMode:e.state.showAddImplementation,setShowImpleModal:e.setShowImpleModal,pushNewResponseData:e.pushNewResponseData,refetchComponentType:e.refetchComponentType},null,8,["impleSearchID","impleSearch","addMode","setShowImpleModal","pushNewResponseData","refetchComponentType"]),n("div",null,[n("div",null,[e.sow?(l(),g("div",Jd,[e.showTasksTable?e.showTasksTable&&e.sowImplementationRelations.length===0?(l(),g("div",Xd,[u(vo,{size:"lg",color:"primary"}),t[5]||(t[5]=n("p",{class:"text-blue-500 text-weight-medium ml-10",style:{"letter-spacing":"1px"}}," Loading Implementation Guideline Relations... ",-1))])):(l(!0),g(Oe,{key:2},Ge(e.sowImplementationRelations,(c,E)=>(l(),g("div",{key:c.id},[u(h,{rows:c.guidelines,idx:E,implementationItem:c,sow:e.sow,columns:e.taskViewColumns,stateValue:e.state,title:c.sow_detail??c.Name,handleRowClick:e.goToImplementationGuideline,customLoadingDataText:"Searching for SOW Guidelines...",loading:e.state.isLoading,class:"shadow-md mt-5 mb-5 animate__animated animate__fadeInUp responsive-table-container",style:{"animation-duration":"0.5s"},href:"implementation-type/requirement/",filterByRowName:"Name",rowName:"Name",expansionHeaderName:"Guideline",expansionHeaderType:"ImplementationTask",filterByRowNameSecondary:"title",relatedHeaderTitle:"Tasks",relatedHeaderTitleSecondary:"Requirements",setShowTasksTable:e.setShowTasksTable,"show-more-relationships":"",dense:""},null,8,["rows","idx","implementationItem","sow","columns","stateValue","title","handleRowClick","loading","setShowTasksTable"])]))),128)):(l(),R(C,{key:0,modelValue:e.componentArrayDraggableRef,"onUpdate:modelValue":t[2]||(t[2]=c=>e.componentArrayDraggableRef=c),"item-key":"id",group:"sowImplementationTypes",disabled:!e.state.isDragging,onStart:t[3]||(t[3]=c=>e.drag=!0),onEnd:t[4]||(t[4]=c=>e.drag=!1),onUpdate:e.onUpdate},{item:T(({element:c,index:E})=>[n("div",null,[u(m,{id:E,class:F(["mt-10",e.isInitial?"animate__fadeInUp":""]),style:{"animation-duration":"0.5s"},rows:e.matchImplementation(c,E),columns:e.columns,title:c.sow_detail?c.sow_detail:c.Name,pagination:null,updateComponent:e.updateComponentType,componentType:"Guideline",item:c,setShowComponentModal:e.setShowComponentModal,deleteImplementation:e.deleteImplementation,updateImplementation:e.updateImplementation,setShowProdServ:e.setShowProdServ,sow:e.sow,breakdownByPeriodType:e.breakdownByPeriodType,setHoverDraggingTag:e.setHoverDraggingTag,"binary-state-sort":!0,loading:e.loading,isImplementationReordering:e.isImplementationReordering},null,8,["id","class","rows","columns","title","updateComponent","item","setShowComponentModal","deleteImplementation","updateImplementation","setShowProdServ","sow","breakdownByPeriodType","setHoverDraggingTag","loading","isImplementationReordering"])])]),_:1},8,["modelValue","disabled","onUpdate"]))])):y("",!0)]),e.tableSowProducts.length>0||e.tableSowServices.length>0?(l(),g("hr",{key:0,class:F(["w-full border mt-10",e.darkmode?"border-slate-600":""])},null,2)):y("",!0),e.tableSowProducts.length>0||e.tableSowServices.length>0?(l(),g("div",_d,[u(M,{class:"animate__animated animate__fadeIn",sowProducts:e.tableSowProducts,pushNewResponseData:e.pushNewResponseData,showDetailedPricing:e.breakdownByPeriodType,selectedComponentTypeRef:e.selectedComponentProduct,componentType:e.state.componentType},null,8,["sowProducts","pushNewResponseData","showDetailedPricing","selectedComponentTypeRef","componentType"]),(l(),g(Oe,null,Ge(["Monthly","Yearly"],(c,E)=>n("div",{key:E},[u(k,{tableType:c,sowServices:e.tableSowServices,class:"animate__animated animate__fadeIn",pushNewResponseData:e.pushNewResponseData,componentType:e.state.componentType,showDetailedPricing:e.breakdownByPeriodType,selectedComponentTypeRef:e.selectedComponentService,updateComponentType:e.updateComponentType},null,8,["tableType","sowServices","pushNewResponseData","componentType","showDetailedPricing","selectedComponentTypeRef","updateComponentType"])])),64))])):y("",!0),n("hr",{class:F(["w-full border mt-10",e.darkmode?"border-slate-600":""])},null,2),e.sowTotals?(l(),R($,{key:2,class:"animate__animated animate__fadeIn",sow:e.sowTotals,componentType:e.state.componentType},null,8,["sow","componentType"])):y("",!0),e.sowTotals?(l(),R(q,{key:3,class:"animate__animated animate__fadeIn",sow:e.sowTotals,componentType:e.state.componentType},null,8,["sow","componentType"])):y("",!0)])])}const eu=Ze(zd,[["render",xd]]),tu=Je`
  query SowDocuments($sow_id: Int) {
    SowDocuments(sow_id: $sow_id) {
      data {
        _id
        sow_id
        original_name
        disk
        version
        ProposalIntro
        RemoveEngagementSummary
        RemoveProposalOutline
        RemoveServiceFees
        dropboxSignatureRecipient
        isEmail
        isVerkada
        reportType
        url
        s3url
        created_at
        DropboxSignatureRequestStatus
        DropboxSignatureRequestSentDate
        DropboxSignatureRequestSignedAt
        DropboxSignatureRequestID
      }
    }
  }
`;Je`
  mutation GetDropboxSignatureRequestUpdateMutation($_id: String!) {
    GetDropboxSignatureRequestUpdateMutation(_id: $_id) {
      Status
      SentDate
      documentType
    }
  }
`;const ou=Je`
  mutation GetDropboxSignatureRequestS3UrlMutation($_id: String!) {
    GetDropboxSignatureRequestS3UrlMutation(_id: $_id)
  }
`;Je`
  mutation GetDropboxSignatureRequestUpdateByCompanyMutation(
    $companyID: Int!
  ) {
    GetDropboxSignatureRequestUpdateByCompanyMutation(
      companyID: $companyID
    )
  }
`;const au=Je`
  mutation GetDropboxSignatureRequestUpdateBySowMutation(
    $sowID: Int!
  ) {
    GetDropboxSignatureRequestUpdateBySowMutation(
      sowID: $sowID
    )
  }
`;Je`
  mutation SendCompanyContactFormMutation(
    $companyID: Int!
    $arrayOfSigners: [String!]!
  ) {
    SendCompanyContactFormMutation(
      companyID: $companyID
      arrayOfSigners: $arrayOfSigners
    ) {
      _id
      Status
      SentDate
      documentType
    }
  }
`;const lu=Ke({components:{ExportSowModal:da},props:{sow:{type:Object,required:!0},readonly:{type:Boolean,default:!1}},setup(e){const t=ft(),v=K(()=>parseInt(t.params.id)),w=$e({showModal:!1}),i=f(e.sow),s=f(window.innerWidth),a=()=>{s.value=window.innerWidth,r()};nt(()=>{window.addEventListener("resize",a),a()}),to(()=>{window.removeEventListener("resize",a)});const o=K(()=>ct().darkmode),r=()=>{if(s.value<=550){const I=k.findIndex(O=>O.name==="version");I!==-1&&k.splice(I,1)}else k.find(O=>O.name==="version")||k.splice(2,0,{name:"version",required:!0,label:"Version",align:"center",field:O=>O.version,format:O=>`${O}`,sortable:!0})},m=f([]);function C(I){m.value=[...m.value,I]}nt(()=>{h()});const h=async()=>{const{result:I}=Le(tu,()=>({sow_id:v.value}));ge(()=>{I.value&&(m.value=I.value.SowDocuments.data)})},M=mt("formatDate"),k=$e([{name:"name",required:!0,label:"Name",align:"left",field:I=>I.original_name,format:I=>`${I}`,sortable:!0},{name:"version",required:!0,label:"Version",align:"center",field:I=>I.version,format:I=>`${I}`,style:"width: 1px !important; padding: 0px; margin: 0px; margin-left: -10rem",sortable:!0},{name:"date",required:!0,label:"Date",align:"left",field:I=>M(I.created_at),format:I=>`${I}`,sortable:!0},{name:"download",required:!0,label:"Download Original",align:"center",field:()=>"Download",format:I=>`${I}`,sortable:!0},{name:"downloadSigned",required:!0,label:"Download Signed",align:"center",field:()=>"Download",format:I=>`${I}`,sortable:!0}]);function $(I){w.showModal=I}function q(I,O){window.open(O,"_blank")}const{mutate:c,onDone:E}=Ne(ou);return E(I=>{console.log(I.data.GetDropboxSignatureRequestS3UrlMutation),window.open(I.data.GetDropboxSignatureRequestS3UrlMutation,"_blank")}),{sowDocuments:m,columns:k,setShowModal:$,state:w,downloadDocument:q,fetchSowDocuments:h,fetchNewSowDocument:C,sowRef:i,darkmode:o,GetDropboxSignatureRequestS3Url:c}}}),nu={class:"w-full"},su={key:0,class:"q-py-md responsive-table-container"},iu={key:0};function ru(e,t,v,w,i,s){const a=we("ExportSowModal");return l(),g("div",nu,[e.sowDocuments?(l(),g("div",su,[e.readonly?y("",!0):(l(),R(W,{key:0,color:"blue-grey-7",icon:"notes","no-caps":"",glossy:"",class:"q-mb-lg",label:"Create Document",onClick:t[0]||(t[0]=o=>e.state.showModal=!0)})),u(To,{class:F(["shadow-md animate__fadeIn",e.darkmode?"bg-[#28334E]":""]),style:{"animation-duration":"1s"},flat:"",dark:e.darkmode,bordered:!e.darkmode,title:"Sow History","rows-per-page-options":[50],rows:e.sowDocuments,data:e.sowDocuments,columns:e.columns,"row-key":"sow_guideline_id",onRowClick:t[1]||(t[1]=(o,r)=>e.downloadDocument(r.original_name,r.s3url))},{top:T(()=>[...t[2]||(t[2]=[n("p",{class:"p-0 py-3 m-0 text-xl text-center w-full text-primary"}," Sow History ",-1)])]),body:T(o=>[o.row.Name!=="seperator"?(l(),R(lo,{key:0,props:o},{default:T(()=>[(l(!0),g(Oe,null,Ge(o.cols,r=>(l(),R(no,{key:r.name,props:o,class:"p-0 pt-0"},{default:T(()=>[r.name==="download"?(l(),R(W,{key:0,icon:"download",color:"primary",flat:"",dense:"",onClick:m=>e.downloadDocument(o.row.original_name,o.row.s3url)},null,8,["onClick"])):r.name==="downloadSigned"?(l(),g(Oe,{key:1},[o.row.DropboxSignatureRequestID&&o.row.DropboxSignatureRequestSignedAt!==null?(l(),g("div",iu,[u(W,{icon:"download",color:"primary",flat:"",dense:"",onClick:m=>e.GetDropboxSignatureRequestS3Url({_id:o.row.DropboxSignatureRequestID})},null,8,["onClick"])])):y("",!0)],64)):(l(),g(Oe,{key:2},[J(V(r.field(o.row)),1)],64))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])):y("",!0)]),_:1},8,["class","dark","bordered","rows","data","columns"])])):y("",!0),u(a,{showModal:e.state.showModal,setShowModal:e.setShowModal,sowRef:e.sowRef,reportType:e.state.reportType,fetchNewSowDocument:e.fetchNewSowDocument},null,8,["showModal","setShowModal","sowRef","reportType","fetchNewSowDocument"])])}const du=Ze(lu,[["render",ru]]);var jo={};const uu=Ke({name:"SowContracts",components:{ListQTable:ro},props:{sow:{type:Object,default:()=>({})},sowContracts:{type:Array,default:()=>[]},readonly:{type:Boolean,default:!1}},setup(e){const t=ft(),v=K(()=>parseInt(t.params.id)),w=mt("formatDate"),i=$e([{name:"name",required:!0,label:"Contract Name",align:"left",field:q=>q.ContractName,format:q=>`${q}`,sortable:!0},{name:"date",label:"Start / End Dates",align:"left",field:q=>w(q.StartDate)+" - "+w(q.EndDate),format:q=>`${q}`},{name:"statusCol",label:"Status",align:"left",field:q=>q.Status,format:q=>`${q}`},{name:"autotaskLink",label:"Actions",align:"center",field:q=>q.AutotaskLink,format:q=>`${q}`}]),s=mt("windowWidth"),a=()=>{if(s.value<=500){const q=i.findIndex(c=>c.name==="statusCol");q!==-1&&i.splice(q,1)}else i.find(c=>c.name==="statusCol")||i.splice(2,0,{name:"statusCol",label:"Status",field:c=>c.Status,format:c=>`${c}`})};ye(()=>s.value,()=>{a()},{immediate:!0});const o=io(),r=kt();function m(){r.loading.show({message:"Wop Renewed. Redirecting to a new Sow."})}const C=jo.VUE_APP_APIURL?jo.VUE_APP_APIURL+"/graphql":"https://portal.aislabs.com/graphql",h=new bl(C,{headers:{authorization:`Bearer ${localStorage.getItem("AUTH_TOKEN")}`}});async function M(){try{const q={id:v.value},c=await h.request(ml,q),E=c.RenewSowMutation;console.log(E,"renewSow data"),m(),o.push({name:"SowDetails",params:{id:c.RenewSowMutation.id}}).then(()=>{location.reload()}),setTimeout(()=>{r.loading.hide()},4e3)}catch(q){console.error(q)}}function k(){M()}function $(){const q=new Date,E=new Date(e.sowContracts&&e.sowContracts[0].EndDate)-q;return Math.ceil(E/(1e3*60*60*24))}return{columns:i,renewWOP:k,contractExpireDays:$}}}),mu={key:0,class:"responsive-table-container"},cu={key:0,class:"flex items-center mt-2 -mb-5"},pu={class:"ml-10"},fu={key:0,class:"text-lg bold"};function wu(e,t,v,w,i,s){const a=we("ListQTable");return e.sowContracts?(l(),g("div",mu,[e.sow.CanBeRenewed&&!e.readonly?(l(),g("div",cu,[u(W,{"no-caps":"","icon-right":"library_add_check",color:"blue-grey-7",label:"Renew WOP",onClick:e.renewWOP},null,8,["onClick"]),n("p",pu,[e.sowContracts?(l(),g("span",fu,V(e.contractExpireDays())+" days",1)):y("",!0),t[0]||(t[0]=n("span",{class:"italic text-slate-500 ml-1"},"from Contract Expiration",-1))])])):y("",!0),u(a,{rows:e.sowContracts,columns:e.columns,title:"Sow Contracts",showPagination:!1},null,8,["rows","columns"])])):y("",!0)}const vu=Ze(uu,[["render",wu]]),ma=Je`
mutation UpdateProjectMutation(
  $_id: String!
  $startDateTime: String
  $endDateTime: String
) {
  UpdateProjectMutation(
    _id: $_id
    startDateTime: $startDateTime
    endDateTime: $endDateTime
  ) {
    _id
    startDateTime
    endDateTime
  }
}
`,yu=Ke({name:"SowProjects",components:{ListQTable:ro,AccordianQTableDeep:So},props:{sow:{type:Object,default:()=>({})},sowProjects:{type:Array,default:()=>[]},fetchProjects:{type:Function,default:()=>{}}},setup(e){const t=Zo(Ko);function v(P){t.setSowID(P)}const w=mt("formatDate"),i=$e({showCalendar:!1,calendarValue:"",readyToClosePopup:!1,startDate:"",endDate:"",selectedProjectID:null,isLoading:!0}),s=$e([{name:"name",required:!0,label:"Project Name",align:"left",field:P=>P.ProjectName,format:P=>`${P}`,sortable:!0},{name:"dateWithEdit",required:!0,label:"Start / End Dates",align:"left",field:P=>w(P.StartDateTime)+" - "+w(P.EndDateTime),format:P=>`${P}`},{name:"statusCol",label:"Status",align:"left",field:P=>P.Status,format:P=>`${P}`},{name:"poNumber",label:"Purchase Order #",align:"left",field:P=>P.PurchaseOrderNumber,format:P=>`${P}`},{name:"autotaskLink",required:!0,label:"Actions",align:"center",field:P=>P.AutotaskLink,format:P=>`${P}`}]),a=$e([{name:"projectName",required:!0,label:"Project Name",align:"left",field:P=>P.Name,format:P=>`${P}`,sortable:!0},{name:"isRecurring",label:"Is Recurring",align:"left",field:P=>P.IsRecurring,format:P=>`${P}`},{name:"actions",required:!0,label:"Actions",align:"center",field:()=>"View",format:P=>`${P}`}]),o=mt("windowWidth"),r=()=>{if(o.value<=700){const P=s.findIndex(x=>x.name==="poNumber");P!==-1&&s.splice(P,1)}else s.find(x=>x.name==="poNumber")||s.splice(3,0,{name:"poNumber",label:"Purchase Order #",align:"left",field:x=>x.PurchaseOrderNumber,format:x=>`${x}`});if(o.value<=500){const P=s.findIndex(x=>x.name==="statusCol");P!==-1&&s.splice(P,1)}else s.find(x=>x.name==="statusCol")||s.splice(2,0,{name:"statusCol",label:"Status",field:x=>x.Status,format:x=>`${x}`})};ye(()=>o.value,()=>{r()},{immediate:!0});const m=kt(),C=io();function h(P,x,L){v(P.sow_id),L?(console.log("open",P,x,L),L.ctrlKey||L.button===1||L==="openNewTab"?window.open(`project_details/${P}`,"_blank"):L==="openNewWindow"?window.open(`project_details/${P}`,"_blank","width=full,height=full"):L==="openIncognitoWindow"&&window.open(`project_details/${P}`,"_blank","incognito=yes")):(m.loading.show({message:"Redirecting to SOW Project...",spinnerSize:100,spinnerColor:"primary",messageColor:"white",backgroundColor:"primary"}),setTimeout(()=>{m.loading.hide()},950),setTimeout(()=>{C.push({name:"ProjectDetails",params:{_id:P.project_id}})},1e3))}function M(P){console.log("Display Calendar for Project",P),i.calendarValue={from:w(P.StartDateTime),to:w(P.EndDateTime)},i.selectedProjectID=P.project_id,i.showCalendar=!0}function k(){i.readyToClosePopup=!0,setTimeout(()=>{i.readyToClosePopup=!1,i.showCalendar=!1},1e3)}const{mutate:$,onDone:q,onError:c}=Ne(ma,()=>({variables:{_id:i.selectedProjectID,StartDateTime:i.calendarValue.from,EndDateTime:i.calendarValue.to}}));q(P=>{console.log(P,"UPDATE PROJECT"),e.fetchProjects()}),c(P=>{console.log(P)});function E(){$(),k()}const I=f(e.sowProjects[0].project_id),O=f({}),{result:H,error:_,load:Ve}=Nt(Xa,()=>({autotask_id:I.value})),me=f(!0),Se=async()=>{const{result:P,error:x,loading:L}=Le(_a,()=>({autotask_id:I.value}));ge(()=>{L.value&&(me.value=!0),x.value&&console.log(x.value,"error PROJECT ERROR"),P.value&&(console.log(P.value,"PROJECT"),O.value=P.value.Project,me.value=!1,O.value.Phases.map(G=>{ve.value.some(ae=>ae.autotask_id===G.autotask_id)||ve.value.push({...G,PhaseName:G.title,relatedItems:O.value.Tasks?.map(ae=>({...ae,Name:ae.title})),type:"header"})}),Ve(),console.log(ve.value,"PHASES"))})};nt(()=>{Se()});const Ae=f([]);function De(P,x){P.includes(x.TaskName),Ae.value=P}const ke=f([]),qe=f([]),oe=f([]),pe=f([]),ve=f([]);return ge(()=>{if(_.value&&console.log(_.value,"errorProject"),H.value){console.log(H.value,"TASKS AND REQUIREMENTS",H.value.Project.Tasks),ke.value=H.value.Project.Tasks,ve.value.forEach(L=>{L.relatedItems=ke.value.filter(G=>G.phaseID===L.autotask_id)});let P=[];ke.value.forEach(L=>{P.find(G=>G.autotask_id===L.id)||P.push(L)}),ve.value=ve.value.sort((L,G)=>L.phaseID===G.phaseID?L.title<G.title?-1:1:L.phaseID<G.phaseID?-1:1),H.value.Project.Tasks.map(L=>{pe.value=ve.value.map(G=>({title:G.title,phaseID:G.autotask_id})),L.SowGuidelineRequirements&&L.SowGuidelineRequirements.length>0&&L.SowGuidelineRequirements.map(G=>{!qe.value.includes(G.RequirementName)&&!qe.value.find(ae=>ae.RequirementName===G.RequirementName)&&(console.log(L.title,"TASK TITLE"),qe.value.push({...G,index:qe.value.length,textInput:G.text_Response,fileInput:G.fileUploadResponse,editMode:!1,TaskName:L.title,ImplementationTaskNames:[L.title]}))})}),i.isLoading=!1,qe.value.map(L=>{oe.value.includes(L&&L.ImplementationTaskNames&&L.ImplementationTaskNames.join(", "))||oe.value.push(L&&L.ImplementationTaskNames&&L.ImplementationTaskNames.join(", "))}).flat();const x=f([]);oe.value.map(L=>{x.value.includes(L)||x.value.push(L)}),qe.value.map(L=>{x.value.map(G=>{L&&L.ImplementationTaskNames&&L.ImplementationTaskNames.join(", ")===G&&x.value.push(L)})})}}),{state:i,projectCols:s,formatDate:w,goToProject:h,displayCalendar:M,closeDatePopup:k,saveUpdatedDate:E,sowRequirements:qe,taskNames:oe,phases:ve,expandTypePhasesRef:pe,expandTypesRef:Ae,expandOrHidePhases:De,projectViewCols:a}}}),gu={class:"-mt-4 responsive-table-container relative"};function hu(e,t,v,w,i,s){const a=we("ListQTable"),o=we("AccordianQTableDeep");return l(),g("div",gu,[u(a,{rows:e.sowProjects,columns:e.projectCols,title:"Sow Project",class:"-mt-0",handleRowClick:e.goToProject,handleColumnClick:e.displayCalendar,showPagination:!1,showBottomPagination:!1,"header-centered":""},null,8,["rows","columns","handleRowClick","handleColumnClick"]),u(o,{rows:e.phases,columns:e.projectViewCols,stateValue:e.state,title:"Sow Project View",handleRowClick:e.goToTaskDetails,showPagination:!1,customNoDataText:"Searching for Phases and Implementation Tasks...",loading:e.state.isLoading,expandOrHideRows:e.expandOrHidePhases,updateComponent:e.updateRequirement,filterByRowName:"PhaseName",rowName:"title",expansionHeaderType:"Phase",relatedHeaderTitle:"Tasks",expansionHeaderName:"Related Phase",filterByRowNameSecondary:"RequirementName",relatedHeaderTitleSecondary:"Requirements",superdense:"",dense:"",byPassExpansionConditionals:!0,redirectToTask:"/task_details/"},null,8,["rows","columns","stateValue","handleRowClick","loading","expandOrHideRows","updateComponent"]),e.state.showCalendar?(l(),R(so,{key:0,modelValue:e.state.calendarValue,"onUpdate:modelValue":t[0]||(t[0]=r=>e.state.calendarValue=r),class:F(["absolute bottom-0 right-32",e.state.readyToClosePopup?"animate__animated animate__fadeOut":"animate__animated animate__fadeIn"]),mask:"MM/DD/YY",title:"Update Project Dates",range:"",color:"teal"},{default:T(()=>[u(W,{label:"close",flat:"",color:"red",class:"absolute right-20 bottom-2",onClick:e.closeDatePopup},null,8,["onClick"]),u(W,{label:"Save",color:"primary",class:"absolute right-2 bottom-2",onClick:e.saveUpdatedDate},null,8,["onClick"])]),_:1},8,["modelValue","class"])):y("",!0)])}const Su=Ze(yu,[["render",hu]]),bu=Ke({components:{AssociatedGuidelines:ua},props:{impleSearch:{type:String,default:""},addMode:{type:Boolean,default:!1},impleSearchID:{type:Number,default:null},setShowImpleModal:{type:Function,required:!0},pushNewResponseData:{type:Function,default:()=>{}},refetchComponentType:{type:Function,default:()=>{}},isBuilderMode:{type:Boolean,default:!1},isBuilderCreatingImplementation:{type:Boolean,default:!1},setSowImplementationID:{type:Function,default:()=>{}}},setup(e){const t=ft(),v=K(()=>t.params.id),w=ct(),i=K(()=>w.darkMode),s=$e({guidelines:[],readyGuidelineCreate:!1,totalPrice:0,isImpleMore:!1,customName:"",optionalInt:0,isOptional:!1,impleId:null,showAssociatedGuidelines:!0,shouldShowTabs:!1}),a=f([]);function o(q,c){a.value.some(E=>E._id===q._id)?a.value.forEach(E=>{E._id===q._id&&(E.isNeeded=q.isNeeded)}):a.value.push(q,c)}const r=mt("formatTotal"),m=async()=>{const{result:q,error:c}=Le(ko,()=>({implementation_type_id:s.impleId,first:20}));ge(()=>{c.value&&console.error(c.value),q.value&&(a.value=q.value.ImplementationGuidelines.data.map(E=>({...E,isNeeded:!1})),s.showAssociatedGuidelines=!0)})};ye(()=>e.impleSearchID,()=>{s.impleId=e.impleSearchID,e.impleSearchID!==null&&(s.showAssociatedGuidelines=!1,m())},{immediate:!0});function C(q,c){q==="add"?s.totalPrice+=c.UnitPrice:q==="remove"&&(s.totalPrice-=c.UnitPrice)}const h=Wt();async function M(){try{const{mutate:q}=Ne(Ho,()=>({variables:{implementation_type_id:e.impleSearchID,sow_idNew:v.value,sow_detail:s.customName,IsOptional:!1}})),E=(await q()).data.CreateSowImplementationTypeMutation;setTimeout(()=>{e.setSowImplementationID(E._id,E,a.value),h.fetchSowImplementations(),h.fetchSowGuidelines()},1500),e.pushNewResponseData("implementation","create",E),s.readyGuidelineCreate=!s.readyGuidelineCreate,k.notify({message:"Implementation Type Added: "+e.impleSearch.substring(0,40)+(e.impleSearch.substring(0,40).length>=40?"...":""),timeout:2e3,icon:"done",color:"indigo"})}catch(q){console.error(q)}}const k=kt();function $(){M(),setTimeout(()=>{e.setShowImpleModal(!1)},1e3)}return ye(()=>e.isBuilderCreatingImplementation,()=>{console.log(e.isBuilderCreatingImplementation,"isBuilderCreatingImplementation"),$()}),{state:s,guidelines:a,createCard:$,formatTotal:r,addToTotal:C,darkmode:i,setNeededGuideline:o}}}),Tu={class:"px-2 sm:px-5"},ku={key:0,style:{display:"flex","flex-direction":"column","align-items":"center"}},Cu={class:"flex items-center absolute top-2 right-6"},Du={style:{display:"flex"}},Iu={style:{"text-align":"center","font-size":"1.1rem",color:"#1976d2"},class:"q-mt-sm"},Pu={key:0,style:{display:"flex","margin-top":"1rem"}},Nu={key:1,class:"q-ma-sm dark:border-slate-600"},Mu={key:2},$u={key:3,class:"w-full flex items-center pb-3"},Ou={class:"flex mb-3"},Au={class:"ml-10 mt-1 mb-12 sm:mb-1"},Ru={class:"text-primary text-lg"},Lu={key:0,class:"flex justify-center w-full sm:justify-end sm:absolute sm:right-5 add-button"};function qu(e,t,v,w,i,s){const a=we("AssociatedGuidelines");return l(),g("div",{style:$t(e.addMode?"display: block":"display: none"),class:F(["q-mt-md rounded-lg flex flex-col items-end responsive-table-container animate__animated",{"mt-8":!e.isBuilderMode,"mt-0":e.isBuilderMode,animate_fadeIn:!e.isBuilderMode}])},[u(ht,{class:F(["rounded-md",{"shadow-md":!e.isBuilderMode,"shadow-none pl-3":e.isBuilderMode,"bg-[#28334E]":e.darkmode,border:!e.darkmode}]),dark:e.darkmode},{default:T(()=>[n("div",Tu,[e.isBuilderMode?y("",!0):(l(),g("div",ku,[n("div",Cu,[u(Qe,{size:"sm",name:"close",color:"red-5",class:"cursor-pointer ml-4",onClick:t[0]||(t[0]=o=>e.setShowImpleModal(!1))})]),n("div",Du,[n("h5",Iu,V(e.impleSearch),1)]),e.state.isImpleMore?(l(),g("div",Pu,[u(dt,{modelValue:e.state.isOptional,"onUpdate:modelValue":t[1]||(t[1]=o=>e.state.isOptional=o),class:"mx-2 sm:mx-5",label:"Optional"},null,8,["modelValue"])])):y("",!0)])),e.isBuilderMode?y("",!0):(l(),g("hr",Nu)),n("div",{style:{padding:"2rem","padding-left":"0.5rem","padding-top":"1rem"},class:F(e.darkmode?"text-white":"text-slate-700")},[...t[3]||(t[3]=[n("p",{style:{"font-weight":"500","font-size":"17.6px","margin-bottom":"0.5rem"}}," What can we do for you? ",-1),n("p",null," Help our Team better understand where we can help fulfill your security needs. ",-1)])],2),e.state.showAssociatedGuidelines?(l(),g("div",Mu,[(l(!0),g(Oe,null,Ge(e.guidelines,(o,r)=>(l(),R(bo,{key:r,separator:""},{default:T(()=>[u(a,{guideline:o,readyGuidelineCreate:e.state.readyGuidelineCreate,pushNewResponseData:e.pushNewResponseData,impleSearchID:e.impleSearchID,refetchComponentType:e.refetchComponentType,addToTotal:e.addToTotal,setNeededGuideline:e.setNeededGuideline},null,8,["guideline","readyGuidelineCreate","pushNewResponseData","impleSearchID","refetchComponentType","addToTotal","setNeededGuideline"])]),_:2},1024))),128))])):(l(),g("div",$u,[u(vo,{color:"primary",size:"40px",class:"ml-3 mr-5"}),t[4]||(t[4]=J(" Loading Guidelines... ",-1))]))]),t[7]||(t[7]=n("hr",{class:"mx-5 dark:border-slate-600"},null,-1)),n("div",Ou,[n("div",Au,[t[5]||(t[5]=n("p",{class:"text-slate-500"},"Estimated Total",-1)),n("p",Ru,V(e.formatTotal(e.state.totalPrice)),1)]),e.isBuilderMode?y("",!0):(l(),g("div",Lu,[u(W,{color:"red-5",flat:"","no-caps":"",class:"mr-4","cy-data":"cancel-implementation",onClick:t[2]||(t[2]=o=>e.setShowImpleModal(!1))},{default:T(()=>[u(Qe,{name:"close"}),t[6]||(t[6]=n("p",{class:"ml-2"},"Cancel",-1))]),_:1}),u(W,{color:"primary","no-caps":"",label:"Attach Implementation",onClick:e.createCard},null,8,["onClick"])]))])]),_:1},8,["class","dark"])],6)}const Eu=Ze(bu,[["render",qu]]),Bu=Ke({name:"SowBuilder",components:{AttachImplementation:Eu,ListQTable:ro},props:{sow:{type:Object,required:!0},goToSowSection:{type:Function,default:()=>{}}},setup(e){const t=Wt();nt(()=>{console.log(t.pushNewResponseData,"pushNewResponseData")});const v=K(()=>ct().darkmode),w=$e({search:"",page:1,servicePage:1,componentSearch:"",showComponentModal:!1,associatedImplementation:{name:"",_id:null},showAddImplementation:!1,impleSearchID:null,impleSearch:null,resetImplementationSearch:!1,implementationCategory:"",perPage:15,isOpen1:!1,isOpen2:!1,isOpen3:!1,isOpenProducts:!1,isOpenServices:!1,isOpenBundles:!1,addComponentType:"Product",showProductTable:!1,showServiceTable:!1,showServiceBundleTable:!1,showComponentType:"Products",isBuilderCreatingImplementation:!1,sowImplementationID:null,disableAttachingToCreatedImplementation:!1,showAddImplementationButtonText:"Add Implementation Type"}),i=f(window.innerWidth);function s(A,Q){console.log(A,Q,"setShowComponentModal"),Q&&(w.associatedImplementation.name=Q.Name,w.associatedImplementation._id=Q._id),w.showComponentModal="",setTimeout(()=>{w.showComponentModal=A},200)}function a(A){w.showAddImplementation=A,A===!1&&(w.resetImplementationSearch=!0)}const o=f(1),r=f(null);function m(A,Q){if(console.log(A,Q,"setImplementationType"),Q!=="close"&&A!=="close"&&A!=="select"){a(!0),w.impleSearchID=Q._id;let ce=1;for(let ze of Q.Name)ze>="A"&&ze<="Z"&&(ce=.9);(Q.Name.includes("DEPRECATED")||Q.Name.includes("DRAFT"))&&(ce=.8),Q.Name.length>20?w.impleSearch=Q.Name.slice(0,20*ce)+"...":w.impleSearch=Q.Name,r.value=Q,o.value=3}else A==="select"&&(r.value=Q)}nt(()=>{C.onSetValueCallback(m)});const C=zo(),h=ft(),M=K(()=>h.params.id),k=f(1),{result:$,loading:q}=Le(Sl,()=>({first:20,Name:w.search,page:k.value,ImplementationCategory:w.implementationCategory,sow_idNew:M.value,filterOutSowImplementationTypes:!0})),c=f([]),E=f([]),I=f([]),O=f(!1),H=f([]),_=f(null),Ve=f(!1);ge(()=>{if(q.value&&(O.value=!0),_.value!==C.search&&(O.value=!0,H.value=[],_.value=C.search),$.value){console.log($.value,"implementationTypesData"),O.value=!1;const A=H.value;H.value=$.value.ImplementationTypes.data,w.totalPages=$.value.ImplementationTypes.paginatorInfo.lastPage,Ve.value||(Ve.value=!0,c.value=H.value.filter(Q=>Q.ImplementationCategory==="Managed Services"&&!c.value.includes(Q.Name)).slice(0,3).map(Q=>({...Q,Name:Q.Name.length>20?Q.Name.slice(0,20)+"...":Q.Name})),E.value=H.value.filter(Q=>Q.ImplementationCategory==="Consulting"&&!E.value.includes(Q.Name)).slice(0,3).map(Q=>({...Q,Name:Q.Name.length>20?Q.Name.slice(0,20)+"...":Q.Name})),I.value=H.value.filter(Q=>Q.ImplementationCategory==="AIS Labs"&&!I.value.includes(Q.Name)).slice(0,3).map(Q=>({...Q,Name:Q.Name.length>20?Q.Name.slice(0,20)+"...":Q.Name}))),C.setSpinner(H.value,A)}});function me(A,Q){console.log(A,Q,"updateFields"),w.implementationCategory=Q}const Se=[{name:"name",required:!0,label:"Name",align:"left",field:A=>A.Name,format:A=>`${A}`},{name:"builderActions",required:!0,label:"Actions",align:"center",format:A=>`${A}`}];function Ae(A,Q,ce){console.log(A,Q,ce,"implementation Created")}async function De(A,Q){try{console.log(A,"createSowProduct");const ce={product_id:A.autotask_id,sow_idNew:M.value,sow_implementation_type_idNew:w.sowImplementationID??e.sow.relatedImplementationTypes[0]._id,sow_guideline_idNew:Q?Q._id:null,PriceOverride:A.PriceOverride,Quantity:A.Quantity},{mutate:ze}=Ne(ho),{data:rt}=await ze(ce),st=rt.CreateSowProductMutation;setTimeout(()=>{t.fetchSowProducts()},3e3),typeof t.pushNewResponseData=="function"&&t.pushNewResponseData(st.BillingFrequency==="One-Time"?"product":"service","create",st),console.log(st,"newProduct")}catch(ce){console.error(ce)}}async function ke(A,Q){try{const ce={service_id:A.autotask_id,sow_idNew:M.value,sow_implementation_type_idNew:w.sowImplementationID??e.sow.relatedImplementationTypes[0]._id,sow_guideline_idNew:Q?Q._id:null,PriceOverride:A.PriceOverride,Quantity:A.Quantity},{mutate:ze}=Ne(go),{data:rt}=await ze(ce),st=rt.CreateSowServiceMutation;setTimeout(()=>{t.fetchSowServices()},3e3),typeof t.pushNewResponseData=="function"&&t.pushNewResponseData("service","create",st),console.log(st,"newService")}catch(ce){console.error(ce)}}async function qe(A,Q){try{const ce={service_bundle_id:A.autotask_id,sow_idNew:M.value,sow_implementation_type_idNew:w.sowImplementationID??e.sow.relatedImplementationTypes[0]._id,sow_guideline_idNew:Q?Q._id:null,PriceOverride:A.PriceOverride,Quantity:A.Quantity},{mutate:ze}=Ne(yo),{data:rt}=await ze(ce),st=rt.CreateSowServiceBundleMutation;setTimeout(()=>{t.fetchSowServiceBundles()},3e3),typeof t.pushNewResponseData=="function"&&t.pushNewResponseData("service","create",st),console.log(st,"newBundleService")}catch(ce){console.error(ce)}}const oe=kt(),pe=f({guidelines:[],products:[],services:[],serviceBundles:[]}),ve=f(1),P=f(1),x=f(1);function L(A){console.log(A,"setPage"),o.value===2?k.value=A:w.showComponentType==="Products"?ve.value=A:w.showComponentType==="Services"?P.value=A:w.showComponentType==="Service Bundles"&&(x.value=A)}ye(()=>w.componentSearch,()=>{ve.value=1,P.value=1,x.value=1}),ye(()=>w.search,()=>{k.value=1});const G=f([]),ae=f([]),fe=f([]),{result:Y}=Le(Co,()=>({first:15,name:w.componentSearch,page:ve.value,sow_idNew:M.value,filterOutAllSowProducts:!0,orderBy:[{column:"SOW_COUNT",order:"DESC"}]})),Ie=f(0),j=f([]);ge(()=>{Y.value&&(console.log(Y.value.Products.data,"productsData"),j.value=Y.value.Products.data.map(A=>{const Q=G.value.find(ce=>ce.autotask_id===A.autotask_id);return Q?{...A,isSelected:f(!0),Quantity:Q.Quantity,PriceOverride:Q.PriceOverride}:{...A,isSelected:f(!1),Quantity:f(1),PriceOverride:f(A.unitPrice)}}),Ie.value=Y.value.Products.paginatorInfo.lastPage)});const{result:ie}=Le(Do,()=>({first:15,name:w.componentSearch,page:P.value,sow_idNew:M.value,filterOutAllSowServices:!0,orderBy:[{column:"SOW_COUNT",order:"DESC"}]})),re=f([]),Ee=f(0);ge(()=>{ie.value&&(re.value=ie.value.Services.data.map(A=>{const Q=ae.value.find(ce=>ce.autotask_id===A.autotask_id);return Q?{...A,isSelected:f(!0),Quantity:Q.Quantity,PriceOverride:Q.PriceOverride}:{...A,isSelected:f(!1),Quantity:f(1),PriceOverride:f(A.unitPrice)}}),Ee.value=ie.value.Services.paginatorInfo.lastPage)});const{result:Xe}=Le(Io,()=>({first:15,name:w.componentSearch,page:x.value,sow_idNew:M.value,filterOutAllSowServiceBundles:!0,orderBy:[{column:"SOW_COUNT",order:"DESC"}]})),je=f([]),pt=f(0);ge(()=>{Xe.value&&(je.value=Xe.value.ServiceBundles.data.map(A=>{const Q=fe.value.find(ce=>ce.autotask_id===A.autotask_id);return Q?{...A,isSelected:f(!0),Quantity:Q.Quantity,PriceOverride:Q.PriceOverride}:{...A,isSelected:f(!1),Quantity:f(1),PriceOverride:f(A.unitPrice)}}),pt.value=Xe.value.ServiceBundles.paginatorInfo.lastPage)});const Fe=mt("formatTotal"),We=$e([{name:"builderName",align:"left",label:"Name",field:A=>A.Name||A.name?A.Name??A.name:A.SkillName,format:A=>`${A}`,sortable:!0},{name:"priceOverride",required:!0,label:"Unit Price",align:"left",field:A=>Fe(A.PriceOverride),format:A=>`${A}`,sortable:!0},{name:"quantity",required:!0,label:"Quantity",align:"left",field:A=>A.Quantity??A.quantity,format:A=>`${A}`},{name:"periodType",required:!0,label:"Period Type",align:"left",field:A=>A.PeriodType==="m"?"Monthly":A.PeriodType==="y"?"Yearly":A.PeriodType==="o"?"One-Time":A.PeriodType??A.PeriodTypeName,format:A=>`${A}`,sortable:!0}]),St=K(()=>w.showComponentType==="Products"?(console.log(j.value,"COMPONENT ROWS"),j.value):w.showComponentType==="Services"?(console.log(re.value,"COMPONENT ROWS"),re.value):w.showComponentType==="Service Bundles"?(console.log(je.value,"COMPONENT ROWS"),je.value):[]),D=f(null);function de(A,Q){console.log(A,"createImplementationType"),Q?(Ce(r.value!==null?r.value._id:e.sow&&e.sow.relatedImplementationTypes[0]._id),setTimeout(()=>{e.goToSowSection("implementations")},2e3)):(w.isBuilderCreatingImplementation=!w.isBuilderCreatingImplementation,r.value._id!==w.impleSearchID&&(Ce(r.value._id),w.disableAttachingToCreatedImplementation=!0,setTimeout(()=>{w.disableAttachingToCreatedImplementation=!1},5e3))),console.log(G.value,ae.value,fe.value,"createImplementationType prod,serv,bundle",A),A==="another"?(D.value="another",o.value=5):A==="redirect"&&(D.value="redirect",o.value=5),setTimeout(()=>{G.value=[],ae.value=[],fe.value=[]},4e3)}function Ce(A,Q,ce){console.log(A,"setSowImplementationID",Q,ce,"ASSOCIATED GUIDELINES"),w.sowImplementationID=A,(ce&&ce.filter(ze=>ze.isSelected).length===0||Q===void 0&&ce===void 0)&&vt(!1,!1,null),D.value==="redirect"?setTimeout(()=>{e.goToSowSection("implementations")},2e3):D.value==="another"&&setTimeout(()=>{o.value=1},2e3)}function tt(A){console.log(A,"setSelectedRow"),A.isSelected===!0?(A.isSelected=!1,He(A)):(A.isSelected=!0,at(A))}function at(A){A.__typename==="Product"?G.value.push(A):A.__typename==="Service"?ae.value.push(A):fe.value.push(A)}function He(A){A.__typename==="Product"?G.value.splice(G.value.findIndex(Q=>Q.autotask_id===A.autotask_id),1):A.__typename==="Service"?ae.value.splice(ae.value.findIndex(Q=>Q.autotask_id===A.autotask_id),1):fe.value.splice(fe.value.findIndex(Q=>Q.autotask_id===A.autotask_id),1)}function bt(A){console.log(A,"updateAttachedComponent"),A.__typename==="Product"?G.value.map(Q=>{Q.autotask_id===A.autotask_id&&(Q.Quantity=A.Quantity,Q.PriceOverride=A.PriceOverride)}):A.__typename==="Service"?ae.value.map(Q=>{Q.autotask_id===A.autotask_id&&(Q.Quantity=A.Quantity,Q.PriceOverride=A.PriceOverride)}):A.__typename==="ServiceBundle"&&fe.value.map(Q=>{Q.autotask_id===A.autotask_id&&(Q.Quantity=A.Quantity,Q.PriceOverride=A.PriceOverride)})}function Ct(A){console.log(A,"skipImplementationStep"),w.showAddImplementationButtonText="Add Hardware/Services",A==="Hardware"?w.showComponentType="Products":A==="Service"&&(w.showComponentType="Services"),o.value=4}function wt(A,Q){oe.notify({message:A,color:Q,position:"bottom",icon:"done",timeout:2e3})}const Ye=f(!0);function vt(A,Q,ce){G.value.map(ze=>{De(ze,ce)}),ae.value.map(ze=>{ke(ze,ce)}),fe.value.map(ze=>{qe(ze,ce)}),Ye.value&&(Ye.value=!1,G.value.length>0&&wt(G.value.length+" Products were Added","green-9"),ae.value.length>0&&wt(ae.value.length+" Services were Added","amber-10"),fe.value.length>0&&wt(fe.value.length+" Service Bundles were Added","deep-orange-10")),setTimeout(()=>{Ye.value=!0},4e3),setTimeout(()=>{(G.value.length>0||A)&&t.fetchSowProducts(),(ae.value.length>0||Q)&&t.fetchSowServices(),(fe.value.length>0||Q)&&t.fetchSowServiceBundles()},1e3)}return{state:w,setShowComponentModal:s,setShowImpleModal:a,searchOptions:C,implementationTypes:H,isLoadingImplementationTypes:O,updateFields:me,columns:Se,darkmode:v,setImplementationType:m,pushNewResponseData:Ae,excludedItems:pe,setPage:L,products:j,services:re,serviceBundles:je,componentColumns:We,step:o,computedComponentRows:St,createImplementationType:de,setSelectedRow:tt,setSowImplementationID:Ce,updateAttachedComponent:bt,windowWidth:i,managedServicesImplementations:c,consultingImplementations:E,aisLabsImplementations:I,skipImplementationStep:Ct,selectedImplementation:r,refetchComponentType:vt}}}),Vu={key:0,class:"responsive-table-container mb-10"},ju={class:"icon-circle"},Fu={key:0},Uu={class:"icon-circle ml-10"},Qu={key:0},Gu={key:0},Wu={class:"grid grid-cols-2 mr-20 gap-10 mt-5 relative"},Hu={key:0,class:"flex justify-end mb-5 -mt-8"},Yu={class:"relative sm:absolute left-5"},zu={key:1,class:"flex justify-start mb-0 -mt-8"},Zu={class:""},Ku={class:"flex justify-end mb-3"},Ju={class:""},Xu={class:"-mt-[3.75rem]"},_u={key:0,class:"flex justify-end mr-5 mt-0 sm:-mt-[3.5rem]"},xu={key:0,class:"relative z-0"},em={key:1,class:"-mt-14 mb-5",style:{position:"relative","z-index":"0"}};function tm(e,t,v,w,i,s){const a=we("AttachImplementation"),o=we("ListQTable");return e.sow?(l(),g("div",Vu,[u($a,{modelValue:e.step,"onUpdate:modelValue":t[18]||(t[18]=r=>e.step=r),"header-nav":"",ref:"stepper",color:"primary",animated:"",class:F(["dark:bg-[#28334E] mt-5 relative z-20",{"shadow-none":e.step===2||e.step===3||e.step===4,"shadow-md":e.step===1||e.step===5}]),dark:e.darkmode,dense:"",contracted:e.windowWidth<800},{default:T(()=>[u(xt,{name:1,title:e.step>1?e.step>2?"":"Category":"Select Category",icon:"settings",done:e.step>1,"header-nav":e.step>1},{default:T(()=>[u(fo,{class:"w-[106.25%] -ml-6 -mt-6"},{default:T(()=>[u(Lt,{class:"shadow-md py-2 border-r dark:border-slate-500 w-full sm:w-1/3","no-caps":"",onClick:t[0]||(t[0]=()=>{e.state.implementationCategory="Managed Services",e.done1=!0,e.step=2,e.state.page=1})},{default:T(()=>[n("div",ju,[u(Qe,{name:"hub",color:"primary",size:"xl"})]),t[22]||(t[22]=n("p",{class:"ml-5 text-weight-medium mb-2 mt-2",style:{"font-size":"1rem"}}," Managed Services ",-1)),e.managedServicesImplementations.length===0?(l(),g("div",Fu,[(l(),g(Oe,null,Ge(3,(r,m)=>u(he,{key:m,class:"w-32 h-3 my-4","animation-speed":(m+1)*500,animation:"pulse"},null,8,["animation-speed"])),64))])):(l(!0),g(Oe,{key:1},Ge(e.managedServicesImplementations,(r,m)=>(l(),R(W,{key:m,color:"primary",flat:"",icon:"add",dense:"","no-caps":"",label:r.Name,onClick:C=>e.setImplementationType("next",r)},null,8,["label","onClick"]))),128))]),_:1}),u(Lt,{class:"flex-col w-full sm:w-1/3","no-caps":"",onClick:t[1]||(t[1]=()=>{e.state.implementationCategory="Consulting",e.done1=!0,e.step=2,e.state.page=1})},{default:T(()=>[n("div",Uu,[u(Qe,{name:"engineering",color:"primary",size:"xl"})]),t[23]||(t[23]=n("p",{class:"ml-5 text-weight-medium mb-2 mt-2",style:{"font-size":"1rem"}}," Consulting ",-1)),e.consultingImplementations.length===0?(l(),g("div",Qu,[(l(),g(Oe,null,Ge(3,(r,m)=>u(he,{key:m,class:"w-32 h-3 my-4","animation-speed":(m+1)*500,animation:"pulse"},null,8,["animation-speed"])),64))])):(l(!0),g(Oe,{key:1},Ge(e.consultingImplementations,(r,m)=>(l(),R(W,{key:m,color:"primary",flat:"",icon:"add",dense:"","no-caps":"",label:r.Name,onClick:C=>e.setImplementationType("next",r)},null,8,["label","onClick"]))),128))]),_:1}),u(Lt,{"no-caps":"",class:"flex flex-col border-l dark:border-slate-500 w-full sm:w-1/3",onClick:t[2]||(t[2]=()=>{e.state.implementationCategory="AIS Labs",e.done1=!0,e.step=2,e.state.page=1})},{default:T(()=>[t[24]||(t[24]=n("div",{class:"h-[50px] w-[30px] p-0"},[n("svg",{xmlns:"http://www.w3.org/2000/svg",height:"50px",viewBox:"0 -960 960 960",width:"50px",fill:"#1976D2"},[n("path",{d:"M200-120q-51 0-72.5-45.5T138-250l222-270v-240h-40q-17 0-28.5-11.5T280-800q0-17 11.5-28.5T320-840h320q17 0 28.5 11.5T680-800q0 17-11.5 28.5T640-760h-40v240l222 270q32 39 10.5 84.5T760-120H200Zm80-120h400L544-400H416L280-240Zm-80 40h560L520-492v-268h-80v268L200-200Zm280-280Z"})])],-1)),t[25]||(t[25]=n("p",{class:"ml-5 text-weight-medium mb-2 mt-2",style:{"font-size":"1rem"}}," AIS Labs ",-1)),e.aisLabsImplementations.length===0?(l(),g("div",Gu,[(l(),g(Oe,null,Ge(3,(r,m)=>u(he,{key:m,class:"w-32 h-3 my-4","animation-speed":(m+1)*500,animation:"pulse"},null,8,["animation-speed"])),64))])):y("",!0),(l(!0),g(Oe,null,Ge(e.aisLabsImplementations,(r,m)=>(l(),R(W,{key:m,color:"primary",flat:"","no-caps":"",icon:"add",dense:"",label:r.Name,onClick:C=>e.setImplementationType("next",r)},null,8,["label","onClick"]))),128))]),_:1})]),_:1}),t[28]||(t[28]=n("hr",{class:"dark:border-slate-500 -ml-6 -mr-6"},null,-1)),n("div",Wu,[u(W,{color:"primary",glossy:"",outlined:"",label:"Add Hardware",icon:"layers",disable:e.sow&&e.sow.relatedImplementationTypes.length===0,onClick:t[3]||(t[3]=r=>e.skipImplementationStep("Hardware"))},{default:T(()=>[e.sow&&e.sow.relatedImplementationTypes.length===0?(l(),R(Me,{key:0,class:"text-sm w-80"},{default:T(()=>[...t[26]||(t[26]=[J("At least one SOW ImplementationType required",-1)])]),_:1})):y("",!0)]),_:1},8,["disable"]),u(W,{icon:"layers",color:"primary",glossy:"",outlined:"",label:"Add Services",disable:e.sow&&e.sow.relatedImplementationTypes.length===0,onClick:t[4]||(t[4]=r=>e.skipImplementationStep("Service"))},{default:T(()=>[e.sow&&e.sow.relatedImplementationTypes.length===0?(l(),R(Me,{key:0,class:"text-sm w-80"},{default:T(()=>[...t[27]||(t[27]=[J("At least one SOW ImplementationType required",-1)])]),_:1})):y("",!0)]),_:1},8,["disable"]),u(W,{icon:"help",color:"blue-grey-7",glossy:"",class:"absolute -right-20 rounded-full w-12 h-10",tag:"a",href:"https://aislabs.atlassian.net/wiki/spaces/DT/pages/779878425/SOW+Builder/",target:"_blank"})])]),_:1},8,["title","done","header-nav"]),u(xt,{name:2,title:e.step>2?e.state.impleSearch:"Select Implementation Type",icon:"create_new_folder",done:e.step>2,"header-nav":e.step>2},{default:T(()=>[u(Oo,null,{default:T(()=>[u(lt,{modelValue:e.state.search,"onUpdate:modelValue":t[6]||(t[6]=r=>e.state.search=r),dense:!0,filled:"",dark:e.darkmode,class:F([e.darkmode?"bg-[#202a46]":"","implementation-search sm:mt-0 w-80 absolute top-5 right-5"]),label:"Search Implementation Types",color:e.darkmode?"blue-5":"primary"},{append:T(()=>[u(Qe,{name:e.state.search===""?"search":"close",class:"cursor-pointer",onClick:t[5]||(t[5]=r=>e.state.search="")},null,8,["name"])]),_:1},8,["modelValue","dark","class","color"])]),_:1})]),_:1},8,["title","done","header-nav"]),u(xt,{name:3,title:e.step>2?"Guidelines":e.step<2?"":"Attach Guidelines",icon:"post_add",done:e.step>2,"header-nav":e.step>3,dense:"",class:"-mb-10 -mt-10 p-0"},null,8,["title","done","header-nav"]),u(xt,{name:4,title:e.step<3?"":(e.step===4,"Hardware/Services"),icon:"add_comment",caption:e.step<3?"":"Optional","header-nav":e.step>2,done:e.step>3},{default:T(()=>[u(Oo,null,{default:T(()=>[e.state.impleSearchID!==null?(l(),g("div",Hu,[n("div",Yu,[t[29]||(t[29]=n("p",null,"SOW Implementation Type:",-1)),u(Mo,{dark:e.darkmode,"no-caps":"",dense:"",flat:"",label:e.selectedImplementation!==null?e.selectedImplementation.Name:e.sow.relatedImplementationTypes[0].Name,class:"mb-2 sm:-mb-6 mt-3","auto-close":""},{default:T(()=>[u(ht,{dark:e.darkmode,class:"dark:bg-[#354161]"},{default:T(()=>[e.state.impleSearchID!==null?(l(),R(Mt,{key:0,clickable:"",onClick:t[7]||(t[7]=r=>e.setImplementationType("select",{Name:e.state.impleSearch,_id:e.state.impleSearchID}))},{default:T(()=>[J(V(e.state.impleSearch),1)]),_:1})):y("",!0),(l(!0),g(Oe,null,Ge(e.sow.relatedImplementationTypes,r=>(l(),R(Mt,{key:r._id,clickable:"",onClick:m=>e.setImplementationType("select",r)},{default:T(()=>[J(V(r.Name),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["dark"])]),_:1},8,["dark","label"])]),u(W,{flat:"",color:"primary","no-caps":"",label:"Back",class:"q-mr-sm",onClick:t[8]||(t[8]=r=>e.step=3)}),u(W,{color:"teal","no-caps":"",label:"Add Another","icon-right":"add",onClick:t[9]||(t[9]=r=>e.createImplementationType("another"))}),u(W,{color:"primary",class:"ml-5","no-caps":"","icon-right":"arrow_forward",label:"Add",onClick:t[10]||(t[10]=r=>e.createImplementationType("redirect"))})])):(l(),g("div",zu,[n("div",Zu,[t[30]||(t[30]=n("p",null,"SOW Implementation Type:",-1)),u(Mo,{dark:e.darkmode,"no-caps":"",dense:"",flat:"","auto-close":"",label:e.selectedImplementation!==null?e.selectedImplementation.Name:e.sow&&e.sow.relatedImplementationTypes[0].Name,class:"-mb-6 mt-3"},{default:T(()=>[u(ht,{dark:e.darkmode,class:"dark:bg-[#354161]"},{default:T(()=>[e.state.impleSearchID!==null?(l(),R(Mt,{key:0,clickable:"",onClick:t[11]||(t[11]=r=>e.setImplementationType("select",{Name:e.selectedImplementation.Name,_id:e.selectedImplementation._id}))},{default:T(()=>[J(V(e.state.impleSearch),1)]),_:1})):y("",!0),(l(!0),g(Oe,null,Ge(e.sow&&e.sow.relatedImplementationTypes,r=>(l(),R(Mt,{key:r._id,clickable:"",onClick:m=>e.setImplementationType("select",r)},{default:T(()=>[J(V(r.Name),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["dark"])]),_:1},8,["dark","label"])]),u(W,{color:"primary",class:"ml-5 absolute right-3","no-caps":"","icon-right":"arrow_forward",label:e.state.showAddImplementationButtonText,onClick:t[12]||(t[12]=r=>e.createImplementationType("redirect",!0))},null,8,["label"])]))]),_:1}),t[32]||(t[32]=n("br",{class:"mb-5"},null,-1)),n("div",Ku,[n("div",Ju,[u(lt,{modelValue:e.state.componentSearch,"onUpdate:modelValue":t[14]||(t[14]=r=>e.state.componentSearch=r),dense:!0,filled:"",dark:e.darkmode,class:F([e.darkmode?"bg-[#202a46]":"",""]),label:"Search "+e.state.showComponentType,color:e.darkmode?"blue-5":"primary"},{append:T(()=>[u(Qe,{name:e.state.componentSearch===""?"search":"close",class:"cursor-pointer",onClick:t[13]||(t[13]=r=>e.state.componentSearch="")},null,8,["name"])]),_:1},8,["modelValue","dark","class","label","color"])])]),u(fo,{modelValue:e.state.showComponentType,"onUpdate:modelValue":t[16]||(t[16]=r=>e.state.showComponentType=r),dense:"",class:F([e.darkmode?"text-grey-4":"text-grey","-mb-6 border-b dark:border-slate-500 -ml-6 -mr-6"]),"active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":"","no-caps":"","mobile-arrows":""},{default:T(()=>[e.state.showHelp?(l(),R(Me,{key:0,modelValue:e.state.showHelp,"onUpdate:modelValue":t[15]||(t[15]=r=>e.state.showHelp=r),class:"text-sm bg-white shadow-md border text-slate-600 hover:text-blue-400"},{default:T(()=>[...t[31]||(t[31]=[J("Select the type of Component you want to Search",-1)])]),_:1},8,["modelValue"])):y("",!0),u(Lt,{name:"Products",label:"Attach Products"}),u(Lt,{name:"Services",label:"Attach Services"}),u(Lt,{name:"Service Bundles",label:"Attach Service Bundles"})]),_:1},8,["modelValue","class"])]),_:1},8,["title","caption","header-nav","done"]),u(xt,{name:5,title:"Add",icon:"library_add",class:"py-10","header-nav":e.step>2,onClick:t[17]||(t[17]=r=>e.createImplementationType("another"))},{default:T(()=>[u(Na,{showing:!0,dark:e.darkmode},{default:T(()=>[u(Ma,{size:"50px",color:"primary"})]),_:1},8,["dark"])]),_:1},8,["header-nav"])]),_:1},8,["modelValue","class","dark","contracted"]),n("div",Xu,[u(a,{style:$t(e.step===3?"display: block; margin-top: 3.5rem":"display: none"),impleSearchID:e.state.impleSearchID,impleSearch:e.state.impleSearch,addMode:e.state.showAddImplementation,setShowImpleModal:e.setShowImpleModal,pushNewResponseData:e.pushNewResponseData,isBuilderMode:!0,isBuilderCreatingImplementation:e.state.isBuilderCreatingImplementation,refetchComponentType:e.refetchComponentType,setSowImplementationID:e.state.disableAttachingToCreatedImplementation?()=>{}:e.setSowImplementationID},null,8,["style","impleSearchID","impleSearch","addMode","setShowImpleModal","pushNewResponseData","isBuilderCreatingImplementation","refetchComponentType","setSowImplementationID"]),e.step===3?(l(),g("div",_u,[u(W,{flat:"",color:"primary",label:"Back",class:"q-mr-sm",onClick:t[19]||(t[19]=r=>e.step=2)}),u(W,{label:"Add "+e.state.impleSearch,"icon-right":"add","no-caps":"",color:"teal",class:"mr-5",onClick:t[20]||(t[20]=r=>e.createImplementationType("another"))},null,8,["label"]),u(W,{label:"Add Hardware/Services","no-caps":"","icon-right":"arrow_forward",color:"primary",onClick:t[21]||(t[21]=()=>{e.done3=!0,e.step=4})})])):y("",!0)]),e.step===2?(l(),g("div",xu,[t[33]||(t[33]=n("div",{class:"grid grid-cols-5 sm:flex justify-end mb-[-1rem] animate__animated animate__fadeIn"},null,-1)),e.step===2?(l(),R(o,{key:0,rows:e.implementationTypes,columns:e.columns,stateValue:e.state,loading:e.state.loading,title:"",class:"shadow-md relative z-0",style:{"z-index":"-10"},handleRowClick:e.setImplementationType,setPage:e.setPage,updateFields:e.updateFields,customNoDataText:"Searching for Implementation Types...",showCategoryColumn:!0,dense:"",superdense:"",setShowComponentModal:e.setShowComponentModal,fadeInAnimation:!1},null,8,["rows","columns","stateValue","loading","handleRowClick","setPage","updateFields","setShowComponentModal"])):y("",!0)])):y("",!0),e.step===4?(l(),g("div",em,[u(o,{style:{"border-top-right-radius":"0px","border-top-left-radius":"0px"},rows:e.computedComponentRows,columns:e.componentColumns,stateValue:e.state,loading:e.state.loading,handleRowClick:e.setSelectedRow,setPage:e.setPage,updateFields:e.updateFields,customNoDataText:"Searching for "+e.state.showComponentType+"...",dense:"",superdense:"",searchinput:"",setShowComponentModal:e.setShowComponentModal,setSelectedRow:e.setSelectedRow,updateComponent:e.updateAttachedComponent,fadeInAnimation:!1,showComponentType:e.state.showComponentType},null,8,["rows","columns","stateValue","loading","handleRowClick","setPage","updateFields","customNoDataText","setShowComponentModal","setSelectedRow","updateComponent","showComponentType"])])):y("",!0)])):y("",!0)}const om=Ze(Bu,[["render",tm]]),am=Je`
mutation UpdateQuoteMutation(
  $autotask_id: Int!
  $effectiveDate: String
  $expirationDate: String
) {
  UpdateQuoteMutation(
    autotask_id: $autotask_id
    effectiveDate: $effectiveDate
    expirationDate: $expirationDate
  ) {
    autotask_id
    effectiveDate
    expirationDate
  }
}
`,lm=Je`
mutation GetATUpdateQuoteMutation(
  $autotask_id: Int!
) {
  GetATUpdateQuoteMutation(
    autotask_id: $autotask_id
  ) {
    autotask_id
    effectiveDate
    expirationDate
  }
}
`,nm=Je`
mutation GetATUpdateOpportunityMutation(
  $autotask_id: Int!
) {
  GetATUpdateOpportunityMutation(
    autotask_id: $autotask_id
  ) {
    autotask_id
    companyID
    title
    AutotaskLink
    status
    StatusName
    stage
    StageName
  }
}
`,sm=Ke({name:"SowDetails",components:{RequirementPage:gn,AssumptionPage:wn,ExclusionPage:un,SowDetailOverview:Zi,ImplementationPage:eu,SowHistory:du,SowContracts:vu,SowProjects:Su,SearchModel:Ht,SowBuilder:om},setup(){const e=$e({showSection:"overview",whichCalendar:"",whichCalendarName:"",readyToClosePopup:!1,calendarValue:"",saveDateType:""}),t=ft(),v=f(t.params.id),w=mt("windowWidth"),i=ct(),s=K(()=>i.darkMode),a=f(null),o=f([]),r=f([]),m=f("");function C(le,Re){let Be=Re||1e3;if(le){let Ue=parseInt(le),it=new Date(Ue*Be),yt=it.getMonth()+1,Pt=it.getDate(),Rt=it.getFullYear();return yt+"/"+Pt+"/"+Rt+" "}else return"N/A"}Da("formatDateUnix",C);const h=mt("formatDate"),M=f(null),{result:k,refetch:$,error:q}=Le(Va,()=>({_id:v.value}));ge(()=>{q.value&&console.log(q.value,"sow totals error"),k.value&&(M.value=k.value.Sow)});const{result:c,load:E}=Nt(Oa,()=>({sow_idNew:v.value})),I=f(!1);ge(()=>{c.value&&(a.value.relatedImplementationTypes=c.value.SowImplementationTypes.data)});const O=f(""),H=f(""),_=f(""),Ve=f(""),me=f(!1),Se=async()=>{const{result:le,error:Re}=Le(ja,()=>({_id:v.value}));ge(()=>{if(Re.value&&console.log(Re.value),le.value){console.log(le.value,"SOW DATA"),ce.value=!1;let Be=le.value.Sow.Opportunity,Ue=le.value.Sow.Company,it="",yt="";le.value.Sow.SowProject&&(it=le.value.Sow.SowProject.StartDateTime,yt=le.value.Sow.SowProject.EndDateTime),a.value={...le.value.Sow,OpportunityStage:Be&&Be.StageName,OpportunityStatus:Be&&Be.StatusName,OpportunityTitle:Be&&Be.title,AccountName:Ue&&Ue.companyName,AccountOwnerName:Ue&&Ue.OwnerName,InfrastructureRate:le.value.Sow.InfrastructureRate?le.value.Sow.InfrastructureRate:0,ProjectStartDate:it,ProjectEndDate:yt,relatedImplementationTypes:null},O.value=a.value.ProjectStartDate,H.value=a.value.ProjectEndDate,a.value.PrimaryQuote&&(_.value=a.value.PrimaryQuote.effectiveDate,Ve.value=a.value.PrimaryQuote.expirationDate),G.value=le.value.Sow.SalespersonName,ae.value=Ue&&Ue.companyName,L.value=le.value.Sow.Name,I.value||(I.value=!0,E())}})};async function Ae(){const{result:le}=Le(ia,()=>({sow_idNew:v.value}));ge(()=>{le.value&&(o.value=le.value.SowContracts.data)})}async function De(){const{result:le,refetch:Re}=Le(ra,()=>({sow_idNew:v.value}));r.value.length!==0&&Re(),ge(()=>{le.value&&(r.value=le.value.SowProjects.data)})}nt(async()=>{Se(),De(),Ae()});function ke(le){e.showSection=le,le==="implementations"&&setTimeout(()=>{},3e3)}function qe(){e.showSection="",setTimeout(()=>{e.showSection="implementations"},100)}function oe(le){return le===e.showSection?w.value<=730?"teal-5":"blue":w.value<=730&&(le==="contracts"&&o.value.length===0||le==="projects"&&r.value.length===0)?"grey-5":"primary"}const pe=[{type:"overview",label:"Overview",icon:"info"},{type:"history",label:"History",icon:"history"},{type:"projects",label:"Project",icon:"layers"},{type:"contracts",label:"Contracts",icon:"description"},{type:"builder",label:"Builder",icon:"build"},{type:"implementations",label:"Implementations",icon:"build"},{type:"requirements",label:"Requirements",icon:"emoji_objects"}];async function ve(le){try{const{mutate:Re}=Ne(cl),{data:Be}=await Re(le);m.value="",ae.value=Be.UpdateSowMutation.Company.companyName,L.value=Be.UpdateSowMutation.Name,G.value=Be.UpdateSowMutation.SalespersonName}catch(Re){console.error(Re)}}function P(le,Re){le==="close"?m.value="":ve({_id:v.value,[Re]:le})}const x=f(null),L=f(null),G=f(null),ae=f(null),fe=Yo(),Y=Ya();function Ie(le){if(console.log("Now Editing Field: ",le),m.value=le,L.value=a.value&&a.value.Name,le==="Name"&&Vt(()=>{x.value.focus()}),le==="AccountName"){let Re=function(Be){console.log(Be,"SET ACCOUNT ID"),Be==="close"?setTimeout(()=>{m.value=""},500):P(Be.autotask_id,"account_id")};fe.onSetValueCallback(Re)}if(le==="SalesPerson"){let Re=function(Be){P(Be._id,"salesperson_id")};Y.onSetValueCallback(Re)}}function j(le){let Re="cursor-pointer",Be="";return le.type==="contracts"&&o.value.length===0&&(Be="No Contracts",Re="cursor-not-allowed"),le.type==="projects"&&r.value.length===0&&(Be="Project not started",Re="cursor-not-allowed"),{cursor:Re,tooltip:Be,icon:le.icon}}function ie(le){return le.slice().reverse()}const{mutate:re,onDone:Ee,onError:Xe}=Ne(ma);Ee(le=>{console.log(le,"UPDATE PROJECT")}),Xe(le=>{console.log(le)});const{mutate:je,onDone:pt,onError:Fe}=Ne(am);pt(le=>{console.log(le,"UPDATE QUOTE")}),Fe(le=>{console.log(le)});const{addToDate:We}=Ul;We(new Date,{days:7,months:1});function St(le){le===e.whichCalendar?Ce():e.whichCalendar=le,le==="startDate"?(e.whichCalendarName="Project Start Date",e.calendarValue=h(a.value.ProjectStartDate)):le==="endDate"?(e.whichCalendarName="Project End Date",e.calendarValue=h(a.value.ProjectEndDate)):le==="effectiveDate"?(e.whichCalendarName="Quote Effective Date",e.calendarValue=h(a.value.PrimaryQuote.effectiveDate)):le==="expDate"&&(e.whichCalendarName="Quote Expiration Date",e.calendarValue=h(a.value.PrimaryQuote.expirationDate))}function D(){e.saveDateType==="startDate"?(O.value=e.calendarValue,re({_id:a.value.SowProject.project_id,startDateTime:e.calendarValue,endDateTime:a.value.SowProject.EndDateTime})):e.saveDateType==="endDate"?(H.value=e.calendarValue,re({_id:a.value.SowProject.project_id,startDateTime:a.value.SowProject.StartDateTime,endDateTime:e.calendarValue})):e.saveDateType==="effectiveDate"?(_.value=e.calendarValue,je({autotask_id:a.value.PrimaryQuote.autotask_id,effectiveDate:e.calendarValue,expirationDate:a.value.PrimaryQuote.ExpirationDate})):e.saveDateType==="expDate"&&(Ve.value=e.calendarValue,je({autotask_id:a.value.PrimaryQuote.autotask_id,effectiveDate:a.value.PrimaryQuote.EffectiveDate,expirationDate:e.calendarValue}))}function de(){e.calendarValue!==""&&D()}function Ce(){e.readyToClosePopup=!0,setTimeout(()=>{e.whichCalendar="",e.readyToClosePopup=!1},1e3)}function tt(){e.saveDateType=e.whichCalendar,de(),Ce()}const at=K(()=>{const le=e.calendarValue.substring(0,2),Re=e.calendarValue.substring(3,5),Be=e.calendarValue.substring(6,8);let Ue="";switch(le){case"01":Ue="January";break;case"02":Ue="February";break;case"03":Ue="March";break;case"04":Ue="April";break;case"05":Ue="May";break;case"06":Ue="June";break;case"07":Ue="July";break;case"08":Ue="August";break;case"09":Ue="September";break;case"10":Ue="October";break;case"11":Ue="November";break;case"12":Ue="December";break}return Ue+" "+Re+", 20"+Be}),He=f([]),bt=f(!1),Ct=f(""),{result:wt,loading:Ye}=Le(_o,()=>({companyName:fe.search,page:fe.page,first:15}));ge(()=>{if(Ye.value&&(bt.value=!0),Ct.value!==fe.search&&(bt.value=!0,He.value=[],Ct.value=fe.search),wt.value){bt.value=!1;const le=He.value,Re=wt.value.Companies.data.filter(Be=>!He.value.some(Ue=>Ue.AccountName===Be.AccountName));fe.page>1?He.value=[...He.value,...Re]:He.value=[...Re,...He.value],fe.setSpinner(He.value,le)}});const vt=f([]),A=f(!1);function Q(le,Re){Re==="close"&&setTimeout(()=>{m.value=""},400)}const ce=f(!0),ze=K(()=>a.value?a.value.opportunity_id:""),rt=K(()=>a.value?a.value.SowProject:""),{mutate:st,onError:jt}=Ne(au,()=>({variables:{sow_idNew:a.value._id}}));jt(le=>{console.log(le)});const{mutate:qt}=Ne(nm,()=>({variables:{autotask_id:ze.value}})),{mutate:It}=Ne(lm,()=>({variables:{autotask_id:a.value.PrimaryQuote?.autotask_id}}));return{nameRef:x,sowName:L,setEditField:Ie,sow:a,state:e,setSection:ke,activeColor:oe,sowToggleOptions:pe,editField:m,updateSowData:P,updateSow:ve,accountName:ae,salesName:G,sowContracts:o,sowProjects:r,sowToggle:j,sowTotals:M,windowWidth:w,reverseOptions:ie,formatDate:h,refetchSowTotals:$,toggleCalendar:St,closeDatePopup:Ce,saveUpdatedDate:tt,calendarSubtitleDate:at,projectStartDate:O,projectEndDate:H,quoteEffectiveDate:_,quoteExpDate:Ve,fetchProjects:De,accounts:He,isLoading:bt,isUsersLoading:A,users:vt,searchOptionsUser:Y,searchOptionsAccount:fe,focusTracker:Q,darkmode:s,formatDateUnix:C,loading:ce,sowOpportunityID:ze,sowProject:rt,hasImplementationsLoaded:me,retoggleSection:qe,getDropboxSignatureRequestUpdate:st,syncOpportunity:qt,syncQuote:It}}}),im={class:"sm:flex-row flex flex-col pl-10 sm:pl-0",style:{"max-width":"100vw"}},rm={class:"col mb-5"},dm={class:"flex"},um={key:0,"data-cy":"project-manager",class:"ml-2"},mm={key:1},cm={key:0,"data-cy":"account-manager",class:"ml-2"},pm={key:1},fm={key:0,"data-cy":"sales-person",class:"ml-2"},wm={key:1},vm={class:"text-slate-500 text-xs items-left flex justify-start mr-3 -mb-5"},ym={class:"flex flex-col mt-0 relative pb-10 sm:pb-0"},gm={class:"flex flex-row-reverse justify-end"},hm={class:"grid grid-cols-2"},Sm={"data-cy":"sow-id",class:"text-xs pb-0 flex items-center"},bm={class:"text-center flex",style:{"font-size":"0.8rem"}},Tm={"data-cy":"version",class:"text-xs pb-1 flex justify-end pr-3",style:{"font-size":"0.8rem"}},km={class:"grid grid-cols-2 mt-1"},Cm={class:"grid grid-cols-2 mt-1"},Dm={key:0,class:"ml-1 text-gray-700 dark:text-gray-100"},Im={key:0,class:"ml-1 text-gray-700 dark:text-gray-100"},Pm={class:"grid grid-cols-2 mt-1"},Nm={class:"text-xs py-1 flex"},Mm={class:"w-full text-center flex",style:{"font-size":"0.8rem"}},$m={"data-cy":"created-at",class:"text-xs py-1 flex justify-end pr-3",style:{"font-size":"0.8rem"}},Om={class:"absolute right-0 -bottom-1"},Am={class:"grid grid-cols-2 mt-1"},Rm={class:"text-xs py-1 flex w-60"},Lm={class:"w-full flex",style:{"font-size":"0.8rem"}},qm={key:0},Em={key:0,class:"text-xs py-1 flex"},Bm={class:"w-full text-center flex",style:{"font-size":"0.8rem"}},Vm={key:1},jm={key:0,class:"text-xs py-1 flex justify-end pr-3"},Fm={class:"text-right",style:{"font-size":"0.8rem"}},Um={class:"py-3 flex items-center justify-center px-0 mx-0 show-table-display"},Qm={key:0,class:"flex flex-col items-center"},Gm={key:1,class:"flex flex-col items-center"},Wm={key:2,class:"flex flex-col items-center"},Hm={key:3,class:"flex flex-col items-center"},Ym={key:4,class:"flex flex-col items-center"},zm={key:5,class:"flex flex-col items-center"},Zm={key:6,class:"flex flex-col items-center"},Km={class:"truncate ml-2"};function Jm(e,t,v,w,i,s){const a=we("SearchModel"),o=we("SowDetailOverview"),r=we("SowHistory"),m=we("SowContracts"),C=we("SowProjects"),h=we("SowBuilder"),M=we("ImplementationPage"),k=we("RequirementPage"),$=we("AssumptionPage"),q=we("ExclusionPage");return l(),g("div",{class:F(e.darkmode?"text-slate-300":"text-slate-500"),style:$t(e.darkmode?"color: #CBD5E1":"")},[n("div",im,[n("div",rm,[n("div",{class:F(["flex",e.darkmode?"text-slate-300":"text-slate-500"])},[e.editField!=="Name"&&!e.loading?(l(),g("p",{key:0,class:"mr-20 w-80 sm:w-72 md:w-80 cursor-pointer break-words text-3xl font-bold animate__fadeIn",style:{"font-weight":"400",padding:"0px","animation-duration":"0.8s"},"data-cy":"sow-name",onClick:t[0]||(t[0]=c=>e.setEditField("Name"))},V(e.sowName===""?"Name: N/A":e.sowName),1)):y("",!0),e.loading?(l(),R(he,{key:1,class:"w-52"})):y("",!0),e.editField==="Name"?(l(),R(lt,{key:2,ref:"nameRef",modelValue:e.sowName,"onUpdate:modelValue":t[1]||(t[1]=c=>e.sowName=c),filled:"",dense:"",dark:e.darkmode,type:"text",label:"Sow Name",onKeyup:t[2]||(t[2]=eo(c=>e.editField="",["enter"])),onChange:t[3]||(t[3]=c=>e.updateSow({_id:e.sow._id,Name:e.sowName})),onFocusout:t[4]||(t[4]=c=>e.editField="")},null,8,["modelValue","dark"])):y("",!0)],2),t[16]||(t[16]=n("p",null,null,-1)),n("div",dm,[e.editField!=="AccountName"&&!e.loading?(l(),g("p",{key:0,class:F(["cursor-pointer mt-4 animate__fadeIn p-0 justify-center",e.darkmode?"text-slate-300":"text-slate-500 "]),style:{"animation-duration":"1s","font-size":"18px","font-weight":"400"},"data-cy":"account-name",onClick:t[5]||(t[5]=c=>e.setEditField("AccountName"))},V(e.accountName===null||e.accountName===""?"Account: N/A":e.accountName),3)):y("",!0),e.loading?(l(),R(he,{key:1,class:"w-32 h-4 mt-6"})):e.editField==="AccountName"?(l(),R(a,{key:2,class:"mt-5",rows:e.accounts,label:"Accounts",value:"companyName",loading:e.isLoading,dense:"",filled:"",placeholder:e.accountName,focusTracker:e.focusTracker,store:e.searchOptionsAccount},null,8,["rows","loading","placeholder","focusTracker","store"])):y("",!0)]),n("p",{class:F(["mt-2 animate__fadeIn flex",e.darkmode?"text-slate-400":"text-slate-500"]),style:{"animation-duration":"1.1s"}},[t[13]||(t[13]=J(" Project Manager: ",-1)),e.loading?y("",!0):(l(),g("span",um,V(e.sow.ProjectManagerName??"N/A"),1)),e.loading?(l(),g("span",mm,[u(he,{class:"w-6 mt-2 ml-2 h-2"})])):y("",!0)],2),n("p",{class:F(["mt-2 animate__fadeIn flex",e.darkmode?"text-slate-400":"text-slate-500"]),style:{"animation-duration":"1.2s"}},[t[14]||(t[14]=J(" Account Manager: ",-1)),e.loading?y("",!0):(l(),g("span",cm,V(e.sow.AccountOwnerName??"N/A"),1)),e.loading?(l(),g("span",pm,[u(he,{class:"w-6 mt-2 ml-2 h-2"})])):y("",!0)],2),e.editField!=="SalesPerson"?(l(),g("p",{key:0,class:F([e.darkmode?"text-slate-400":"text-slate-500","mt-2 cursor-pointer hover:text-slate-400 animate__fadeIn flex"]),style:{display:"flex","animation-duration":"1.3s"},onClick:t[6]||(t[6]=c=>e.setEditField("SalesPerson"))},[t[15]||(t[15]=J(" Sales Person: ",-1)),e.loading?y("",!0):(l(),g("span",fm,V(e.salesName!==null&&e.salesName!==""?e.salesName:"N/A"),1)),e.loading?(l(),g("span",wm,[u(he,{class:"w-6 mt-2 ml-2 h-2"})])):y("",!0)],2)):y("",!0),e.editField==="SalesPerson"?(l(),R(a,{key:1,class:"mt-5 w-60",rows:e.users,label:"Sales Person",value:"name",loading:e.isUsersLoading,dense:"",filled:"",placeholder:e.salesName,focusTracker:e.focusTracker,store:e.searchOptionsUser},null,8,["rows","loading","placeholder","focusTracker","store"])):y("",!0),n("div",vm,[u(W,{label:"View Opportunity in AT","no-caps":"",class:"text-[#CBD5E1] pr-1 ml-[-3px] h-10",dense:"",flat:"","icon-right":"open_in_new",href:"https://ww5.autotask.net/Autotask/AutotaskExtend/ExecuteCommand.aspx?Code=OpenOpportunity&OpportunityID="+e.sowOpportunityID,target:"_blank"},null,8,["href"]),e.sow?.LatestSignableSowDocument&&e.sow?.LatestSignableSowDocument?.DropboxSignatureRequestSignedAt===null?(l(),R(W,{key:0,label:"Get E-Sign Update","no-caps":"","icon-right":"refresh",dense:"",flat:"",class:"text-[#CBD5E1] px-2 sm:pl-0 ml-[-3px] sm:ml-2 h-10",onClick:t[7]||(t[7]=c=>e.getDropboxSignatureRequestUpdate())})):y("",!0)])]),n("div",{class:F(["col p-3 animate__fadeIn shadow-md mr-10 rounded-md mb-5 sm:mr-5 md:mr-0 top-info-card",e.darkmode?"bg-[#28334E] text-slate-300":"border bg-white"]),style:{"animation-duration":"1s"}},[n("div",ym,[n("div",gm,[n("div",{class:F(["mr-2 text-slate-500 text-xs items-left flex w-full justify-end",{"justify-between mb-1":e.sow?.LatestSignableSowDocument?.DropboxSignatureRequestSignedAt===null,"md:mb-[-3rem]":!e.sow?.LatestSignableSowDocument||e.sow?.LatestSignableSowDocument?.DropboxSignatureRequestSignedAt!==null}])},null,2)]),t[28]||(t[28]=n("p",{class:"italic text-center text-slate-400",style:{"letter-spacing":"1.5px"}}," Statement of Work Information ",-1)),t[29]||(t[29]=n("hr",{class:"border-dashed border-slate-500 my-2 mr-[14px]"},null,-1)),n("div",hm,[n("div",Sm,[n("p",bm,[t[17]||(t[17]=J(" SOW ID: ",-1)),e.loading?y("",!0):(l(),g("span",{key:0,class:F(["ml-1",e.darkmode?"text-slate-200":"text-slate-700"])},V(e.sow._id),3)),e.loading?(l(),R(he,{key:1,class:"ml-4 w-16 h-2 mt-1"})):y("",!0)])]),n("div",Tm,[t[18]||(t[18]=J(" SOW Version ",-1)),e.loading?y("",!0):(l(),g("span",{key:0,class:F(["ml-1",e.darkmode?"text-slate-200":"text-slate-700"])},V(e.sow.Version??1),3)),e.loading?(l(),R(he,{key:1,class:"ml-4 w-8 h-2 mt-1"})):y("",!0)])]),n("div",km,[n("div",{"data-cy":"start-date",class:F(["text-xs py-1 mr-0 flex",e.sowProject!==null?"cursor-pointer":""]),style:{"font-size":"0.8rem"},onClick:t[8]||(t[8]=c=>e.sowProject!==null?e.toggleCalendar("startDate"):null)},[t[19]||(t[19]=J(" Project Start Date: ",-1)),e.loading?y("",!0):(l(),g("span",{key:0,class:F(["ml-1",e.darkmode?"text-slate-200":"text-slate-700"])},V(e.projectStartDate.length<=8&&e.projectStartDate.length!==0?e.projectStartDate:e.formatDate(e.projectStartDate)),3)),e.loading?(l(),R(he,{key:1,class:"ml-4 w-12 h-2 mt-1"})):y("",!0)],2),n("div",{"data-cy":"end-date",class:F(["text-xs py-1 flex justify-end pr-3",e.sowProject!==null?"cursor-pointer":""]),style:{"font-size":"0.8rem"},onClick:t[9]||(t[9]=c=>e.sowProject!==null?e.toggleCalendar("endDate"):null)},[t[20]||(t[20]=J(" Project End Date: ",-1)),e.loading?y("",!0):(l(),g("span",{key:0,class:F(["ml-1",e.darkmode?"text-slate-200":"text-slate-700"])},V(e.projectEndDate.length<=8&&e.projectEndDate.length!==0?e.projectEndDate:e.formatDate(e.projectEndDate)),3)),e.loading?(l(),R(he,{key:1,class:"ml-4 w-12 h-2 mt-1"})):y("",!0)],2)]),n("div",Cm,[n("div",{"data-cy":"start-date",class:F(["text-xs py-1 mr-0 flex",e.sowProject!==null?"cursor-pointer":""]),style:{"font-size":"0.8rem"},onClick:t[10]||(t[10]=c=>e.sowProject!==null?e.toggleCalendar("effectiveDate"):null)},[t[21]||(t[21]=J(" Quote Effective Date: ",-1)),e.loading?y("",!0):(l(),g("span",Dm,V(e.quoteEffectiveDate.length<=8&&e.quoteEffectiveDate.length!==0?e.quoteEffectiveDate:e.formatDateUnix(e.quoteEffectiveDate,1)),1)),e.loading?(l(),R(he,{key:1,class:"ml-4 w-12 h-2 mt-1"})):y("",!0)],2),n("div",{class:F(["text-xs py-1 ml-5 flex justify-end pr-3",e.sowProject!==null?"cursor-pointer":""]),style:{"font-size":"0.8rem"},onClick:t[11]||(t[11]=c=>e.sowProject!==null?e.toggleCalendar("expDate"):null)},[t[22]||(t[22]=J(" Quote Exp. Date: ",-1)),e.loading?y("",!0):(l(),g("span",Im,V(e.quoteExpDate.length<=8&&e.quoteExpDate.length!==0?e.quoteExpDate:e.formatDateUnix(e.quoteExpDate,1)),1)),e.loading?(l(),R(he,{key:1,class:"ml-4 w-12 h-2 mt-1"})):y("",!0)],2),e.state.whichCalendar!==""?(l(),R(so,{key:0,modelValue:e.state.calendarValue,"onUpdate:modelValue":t[12]||(t[12]=c=>e.state.calendarValue=c),class:F(["calender-cont",e.state.readyToClosePopup?"animate__animated animate__bounceOutUp":"animate__animated animate__bounceInDown"]),mask:"MM/DD/YY",subtitle:e.calendarSubtitleDate,"first-day-of-week":1,title:e.state.whichCalendarName},{default:T(()=>[u(W,{color:"white",flat:"",class:"absolute right-1 top-2",icon:"close",onClick:e.closeDatePopup},null,8,["onClick"]),u(W,{label:"close",flat:"",color:"red",class:"absolute right-20 bottom-2",onClick:e.closeDatePopup},null,8,["onClick"]),u(W,{label:"Save",color:"primary",class:"absolute right-2 bottom-2",onClick:e.saveUpdatedDate},null,8,["onClick"])]),_:1},8,["modelValue","class","subtitle","title"])):y("",!0)]),n("div",Pm,[n("div",Nm,[n("p",Mm,[t[23]||(t[23]=J(" Account Has Signed Contact Form: ",-1)),e.loading?y("",!0):(l(),g("span",{key:0,class:F(["ml-1 capitalize",e.darkmode?"text-slate-200":"text-slate-700"])},V(e.sow?.CompanyHasSignedContactForm?"Yes":"No"),3)),e.loading?(l(),R(he,{key:1,class:"ml-4 w-16 h-2 mt-1"})):y("",!0)])]),n("div",$m,[t[24]||(t[24]=J(" Date Created: ",-1)),e.loading?y("",!0):(l(),g("span",{key:0,class:F(["ml-1",e.darkmode?"text-slate-200":"text-slate-700"])},V(e.formatDate(e.sow.created_at)),3)),e.loading?(l(),R(he,{key:1,class:"ml-4 w-12 h-2 mt-1"})):y("",!0)]),n("div",Om,[e.sowOpportunityID!==null&&e.sowOpportunityID!==""?(l(),R(W,{key:0,color:"primary",label:"Sync Opportunity","no-caps":"",dense:"",class:"h-1",flat:"","icon-right":"sync",onClick:e.syncOpportunity},null,8,["onClick"])):y("",!0),e.quoteEffectiveDate!==null&&e.quoteEffectiveDate!==""?(l(),R(W,{key:1,color:"primary",label:"Sync Quote","no-caps":"",dense:"",class:"h-1",flat:"","icon-right":"sync",onClick:e.syncQuote},null,8,["onClick"])):y("",!0)])]),n("div",Am,[n("div",Rm,[n("p",Lm,[t[25]||(t[25]=J(" Sow Doc E-Sign Status: ",-1)),e.loading?y("",!0):(l(),g("span",{key:0,class:F(["ml-1",e.darkmode?"text-slate-200":"text-slate-700"])},V(e.sow?.LatestSignableSowDocument?.DropboxSignatureRequestStatus??"N/A"),3)),e.loading?(l(),R(he,{key:1,class:"ml-4 w-16 h-2 mt-1"})):y("",!0)])]),e.sow?.LatestSignableSowDocument?.DropboxSignatureRequestSignedAt?(l(),g("div",qm,[e.sow&&e.sow?.LatestSignableSowDocument?.DropboxSignatureRequestSignedAt?(l(),g("div",Em,[n("p",Bm,[t[26]||(t[26]=J(" Sow Doc E-Sign Signed Date: ",-1)),e.loading?y("",!0):(l(),g("span",{key:0,class:F(["ml-1",e.darkmode?"text-slate-200":"text-slate-700"])},V(e.sow?.LatestSignableSowDocument?.DropboxSignatureRequestSignedAt.length<=8&&e.sow?.LatestSignableSowDocument?.DropboxSignatureRequestSignedAt.length!==0?e.sow?.LatestSignableSowDocument?.DropboxSignatureRequestSignedAt:e.formatDateUnix(e.sow?.LatestSignableSowDocument?.DropboxSignatureRequestSignedAt)),3)),e.loading?(l(),R(he,{key:1,class:"ml-4 w-16 h-2 mt-1"})):y("",!0)])])):y("",!0)])):(l(),g("div",Vm,[e.sow&&e.sow?.LatestSignableSowDocument?.DropboxSignatureRequestSentDate?(l(),g("div",jm,[n("p",Fm,[t[27]||(t[27]=J(" Sow Doc E-Sign Sent Date: ",-1)),e.loading?y("",!0):(l(),g("span",{key:0,class:F(["ml-1",e.darkmode?"text-slate-200":"text-slate-700"])},V(e.sow?.LatestSignableSowDocument?.DropboxSignatureRequestSentDate.length<=8&&e.sow?.LatestSignableSowDocument?.DropboxSignatureRequestSentDate.length!==0?e.sow?.LatestSignableSowDocument?.DropboxSignatureRequestSentDate:e.formatDateUnix(e.sow?.LatestSignableSowDocument?.DropboxSignatureRequestSentDate)),3)),e.loading?(l(),R(he,{key:1,class:"ml-4 w-16 h-2 mt-1"})):y("",!0)])])):y("",!0)]))])])],2)]),n("div",Um,[u(Ca,{rounded:"",class:"px-0 mx-10 md:mx-0 w-full"},{default:T(()=>[(l(!0),g(Oe,null,Ge(e.sowToggleOptions,(c,E)=>(l(),R(W,{key:E,color:e.activeColor(c.type),label:c.label,class:F([e.sowToggle(c).cursor,"w-full"]),style:{"font-size":"0.9rem","font-weight":"600","letter-spacing":"0.4px"},"no-caps":"",onClick:I=>e.sowToggle(c).tooltip===""?e.setSection(c.type):""},{default:T(()=>[e.sowToggle(c).tooltip!==""?(l(),R(Me,{key:0,style:{"font-size":"0.9rem"},class:"bg-white text-slate-700 border shadow-md"},{default:T(()=>[J(V(e.sowToggle(c).tooltip),1)]),_:2},1024)):y("",!0)]),_:2},1032,["color","label","class","onClick"]))),128))]),_:1})]),e.state.showSection==="overview"?(l(),g("div",Qm,[u(o,{sow:e.sow,sowTotals:e.sowTotals,updateSowAccount:e.updateSow,isSowLoading:e.loading,goToSowSection:e.setSection},null,8,["sow","sowTotals","updateSowAccount","isSowLoading","goToSowSection"])])):e.state.showSection==="history"?(l(),g("div",Gm,[u(r,{sow:e.sow},null,8,["sow"])])):e.state.showSection==="contracts"?(l(),g("div",Wm,[u(m,{sow:e.sow,sowContracts:e.sowContracts},null,8,["sow","sowContracts"])])):e.state.showSection==="projects"?(l(),g("div",Hm,[u(C,{sow:e.sow,sowProjects:e.sowProjects,fetchProjects:e.fetchProjects},null,8,["sow","sowProjects","fetchProjects"])])):e.state.showSection==="builder"?(l(),g("div",Ym,[u(h,{sow:e.sow??{id:111111,Name:"testing",relatedImplementationTypes:[]},goToSowSection:e.setSection},null,8,["sow","goToSowSection"])])):e.state.showSection==="implementations"?(l(),g("div",zm,[u(M,{sow:e.sow,sowTotals:e.sowTotals,refetchSowTotals:e.refetchSowTotals,hasImplementationsLoaded:e.hasImplementationsLoaded,retoggleSection:e.retoggleSection},null,8,["sow","sowTotals","refetchSowTotals","hasImplementationsLoaded","retoggleSection"])])):e.state.showSection==="requirements"?(l(),g("div",Zm,[u(k),u($,{class:"mb-5"}),u(q)])):y("",!0),e.windowWidth<=730?(l(),R(Ba,{key:7,icon:"keyboard_arrow_up",color:"primary",direction:"up",class:"h-2 pb-12 pt-3 fixed bottom-12 right-0 mr-8 mb-8"},{default:T(()=>[(l(!0),g(Oe,null,Ge(e.reverseOptions(e.sowToggleOptions),(c,E)=>(l(),R(Ea,{key:E,rounded:"",icon:e.sowToggle(c).icon,class:F(["w-32 ml-5 mr-5 right-5",e.sowToggle(c).cursor]),color:e.activeColor(c.type),onClick:I=>e.sowToggle(c).tooltip===""?e.setSection(c.type):""},{default:T(()=>[n("p",Km,V(c.label),1),e.sowToggle(c).tooltip!==""?(l(),R(Me,{key:0,style:{"font-size":"0.9rem"},class:"bg-white"},{default:T(()=>[J(V(e.sowToggle(c).tooltip),1)]),_:2},1024)):y("",!0)]),_:2},1032,["icon","color","class","onClick"]))),128))]),_:1})):y("",!0)],6)}const Gc=Ze(sm,[["render",Jm]]);export{Gc as default};
