import{Q as y}from"./QSkeleton-B7rOYwnS.js";import{a6 as Ye,a7 as Je,al as Z,am as d,a9 as n,ac as i,ab as r,aa as g,af as s,a8 as m,ag as f,ae as x,Q as k,ah as C,aS as Q,az as pe,ao as U,aq as Xe,au as L,O as ce,aj as Ze,E as fe,T as u,aB as _,a3 as ve,ax as B,U as ge,ay as S,av as xe}from"./index-CQCl7-n1.js";import{Q as _e}from"./QFile-BzE_8x3B.js";import{Q as E,u as et,U as tt,A as ot,a as st,D as lt,b as at,M as nt}from"./dark-mode-D-GqxvW3.js";import{Q as rt,L as it}from"./ListQTable-DoGh3vFW.js";import{Q as dt}from"./QToggle-X9yPZq_d.js";import{Q as ut}from"./QCardSection-CUOYl02q.js";import{Q as be}from"./QCard-D9NvINpq.js";import{Q as mt}from"./QDialog-0UbYXYZ9.js";import{S as pt}from"./SearchModel-hS4W0wni.js";import{u as ct}from"./use-quasar-CeTCeS0j.js";import{A as ft}from"./Account-DR2M6Dn9.js";import{B as vt}from"./BasicAttachModal-Vgo0mwAq.js";import{g as gt}from"./index-BAc7fDxH.js";import{e as bt,l as wt}from"./searchStore-u7vDWyEa.js";import{I as yt}from"./Introspection-FbDfCq5f.js";import"./QChip-tlUzG03O.js";import"./use-key-composition-B6EajJfj.js";import"./QSelect-CZoYKFij.js";import"./QItemLabel-4PS5Ii4A.js";import"./QMarkupTable-DiNkxTl4.js";import"./ClosePopup-TnQGvSW-.js";import"./QPagination-OEL0QgjP.js";import"./QSeparator-DqL40xTU.js";import"./QResizeObserver-CpFCL3bZ.js";import"./QScrollObserver-D1yOb7nN.js";import"./touch-BjYP5sR0.js";import"./search-DNJIg9HY.js";import"./parser-C_oP7G4F.js";const kt=gt`
  query InternalRoles {
    InternalRoles(first: 40) {
      data {
        _id
        id
        name
        description
      }
    }
  }
`,ht=Je({components:{SearchModel:pt,BasicAttachModal:vt,ListQTable:it},setup(){const e=L({editMode:"",name:"",title:"",bio:"",search:"",page:1,company:"",newAccountId:null,updateType:"",openRoleModal:!1,fileInput:null,hoveringPicture:!1,optOut:!1,accountSearch:"",sowSearch:"",isNotDraft:!1,order:null,allowOrderEdit:!1}),o=ce("formatDate"),P=Ze(),p=fe(()=>P.params.id),ee=fe(()=>et().darkmode),te=u([]),O=u([]),I=u(!0),M=u([]),l=u(!0),c=u({}),{result:j,loading:q,error:oe}=_(kt,()=>({Name:""})),se=bt(),h=wt();ve(()=>{M.value=Array(1).fill(1)});const le=u([]);B(()=>{j.value&&(console.log(j.value,"ROLES"),le.value=j.value.InternalRoles.data),q.value&&console.log(q.value,"LOADING"),oe.value&&console.log(oe.value,"ERROR")}),ge(()=>p.value,()=>{P.path==="/user"&&(W("reset"),setTimeout(()=>{W("create")},2e3))}),setTimeout(()=>{W("create")},3e3);function W(t){t==="create"?(e.name=c.value.name,e.title=c.value.title,c.value.AccountName!=="No Account Assigned"&&(e.company=c.value.AccountName)):t==="reset"&&(e.title="",e.company="",e.name="",e.editMode=!1,e.newAccountId=null)}const{mutate:A,onError:we,onDone:ye}=S(tt,()=>e.updateType==="name"?{variables:{_id:p.value,name:e.name}}:e.updateType==="title"?{variables:{_id:p.value,title:e.title}}:e.updateType==="account"?{variables:{_id:p.value,AccountId:e.newAccountId}}:e.updateType==="bio"?{variables:{_id:p.value,bio:e.bio}}:e.updateType==="optOut"?{variables:{_id:p.value,optOutOfAutoTimeEntries:e.optOut}}:e.updateType==="order"?{variables:{_id:p.value,order:e.order}}:e.updateType==="isDraft"?{variables:{_id:p.value,isDraft:!e.isNotDraft}}:null);we(t=>{console.log(t,"error")}),ye(t=>{console.log(t,"updated user info",e.newAccountId,", updateType: ",e.updateType)});const{result:R}=_(yt,()=>({name:"User"})),ae=u(""),ne=u("");B(()=>{R.value&&(console.log(R.value,"introspectionData introspectionDataintrospectionData"),ae.value=R.value.__type.fields.find(t=>t.name==="optOutOfAutoTimeEntries").description,ne.value=R.value.__type.fields.find(t=>t.name==="isDraft").description)});const z=u(null),F=u(null),H=u(null);function ke(t){e.editMode=t,t==="name"&&setTimeout(()=>{H.value&&H.value.focus()},10),t==="title"&&setTimeout(()=>{z.value&&z.value.focus()},10),t==="bio"&&setTimeout(()=>{F.value&&F.value.focus()},10)}function re(t){t!==null&&t!=="close"?(e.newAccountId=t.id,e.company=t.companyName,G("account",t)):G("")}const D=ct();function K(t,a){console.log(t,a,"updateUserNotif"),t==="Company"?D.notify({message:t+" updated to "+e.company,color:"indigo"}):D.notify({message:t+" updated to "+a,color:"indigo"})}function G(t,a){t==="name"?a!==c.value.name&&(e.updateType="name",A(),K("Name",a)):t==="title"?a!==c.value.title&&(e.updateType="title",A(),K("Position",a)):t==="account"?a!==c.value.AccountId&&(e.updateType="account",A(),K("Company",a)):t==="bio"?a!==c.value.bio&&a!==null&&(e.updateType="bio",A()):t==="optOut"?a!==c.value.optOut&&(e.updateType="optOut",A()):t==="order"?(e.allowOrderEdit=!1,a!==c.value.order&&(e.updateType="order",A())):t==="isDraft"&&(e.updateType="isDraft",A()),e.editMode=""}function he(){e.editMode=""}const{mutate:Ae,onDone:Ce}=S(ot,()=>({variables:{_id:p.value}}));Ce(()=>{D.notify({message:"User Approved",icon:"recommend",color:"indigo"}),I.value=!0});function De(){Ae()}const Y=u(null);B(()=>{c.value&&(Y.value=c.value.avatar,e.bio=c.value.bio)});function Ue(t){return t._id==="62094badafec225c2239bc24"||t._id==="62094badafec225c2239bc1e"||t._id==="646f9db3fe0fd458120672bc"||t._id==="646f7252c23516d9f30569a3"?"https://png.pngitem.com/pimgs/s/142-1428108_settings-icon-png-transparent-png.png":Y.value!==null?"https://ais-portal-s3-public.s3.amazonaws.com/"+Y.value:"https://images.unsplash.com/photo-1511367461989-f85a21fda167?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1331&q=80"}const v=L([{name:"name",align:"left",label:"Name",field:t=>t.name,format:t=>`${t}`,sortable:!0},{name:"Description",align:"left",label:"Description",field:t=>t.description??"N/A",format:t=>`${t}`},{name:"attachment",align:"right",label:"Actions"}]);function Me(){e.openRoleModal=!1}const{mutate:Te,onError:Se,onDone:Ee}=S(st,()=>({variables:{_id:p.value,avatarImage:e.fileInput}}));Se(t=>{console.log(t,"error")}),Ee(t=>{console.log(t,"result")});function Ie(){Te(),D.notify({color:"indigo",textColor:"white",icon:"cloud_done",message:"Avatar Updated"})}const{mutate:Ve,onDone:Ne}=S(lt,()=>({variables:{_id:p.value}}));Ne(t=>{console.log(t,"result"),D.notify({color:"indigo",textColor:"white",icon:"person_off",message:"User Disabled"}),I.value=!1});const{mutate:Oe,onDone:Re,onError:$e}=S(at,()=>({variables:{_id:p.value}}));Re(t=>{console.log(t,"result"),D.notify({color:"red",textColor:"white",icon:"delete",message:"User Deleted"})}),$e(t=>{console.log(t,"error")});const V=u(null),$=u(null),{mutate:ie,onDone:Qe,onError:Le}=S(nt,()=>({variables:{_id:p.value,role_id:V.value,action:$.value}}));Qe(t=>{console.log(t,"result"),D.notify({color:"indigo",textColor:"white",icon:"edit",message:"Roles were Updated"})}),Le(t=>{console.log(t,"error")});function Be(t,a){console.log(t,a,"setRoleId(), id, value"),V.value=t._id,$.value="add"}ge(()=>e.openRoleModal,()=>{e.openRoleModal?se.onSetValueCallback(Be):h.onSetValueCallback(re)},{immediate:!0});const{result:de,loading:Pe}=_(ft,()=>({first:20,page:h.page,companyName:h.search})),b=u([]),J=u(!1),ue=u("");B(()=>{if(Pe.value&&(J.value=!0),h.search!==ue.value&&(b.value=[],ue.value=h.search),de.value){J.value=!1;const t=b.value,a=de.value.Companies.data.filter(N=>!b.value.some(Ge=>N.companyName===Ge.companyName));h.page>1?b.value=[...b.value,...a]:b.value=[...a,...b.value],h.setSpinner(b.value,t)}});function je(){console.log(V.value,$.value,p.value,"saveAttachedComponent"),ie()}function qe(t,a){a==="delete"&&(V.value=t._id,$.value="remove",ie())}const We=L([{name:"ID",align:"left",label:"SOW ID",field:t=>t.id,format:t=>`${t}`,sortable:!0},{name:"name",required:!0,label:"Name",align:"left",field:t=>t.Name,format:t=>`${t}`,sortable:!0},{name:"stage",label:"Stage",field:t=>t&&t.Opportunity&&t.Opportunity.StageName,align:"center"},{name:"created_at",label:"Date",field:t=>o(t.created_at),align:"center"},{name:"actions",required:!0,label:"Actions",align:"right"}]),ze=()=>{if(T.value<=500){const t=v.findIndex(a=>a.name==="ID");t!==-1&&v.splice(t,1)}if(T.value<=900){const t=v.findIndex(a=>a.name==="stage");t!==-1&&v.splice(t,1)}else v.find(a=>a.name==="stage")||v.splice(2,0,{name:"stage",label:"Stage",field:a=>a.OpportunityStage,sortable:!0});if(T.value<=1e3){const t=v.findIndex(a=>a.name==="created_at");t!==-1&&v.splice(t,1)}else v.find(a=>a.name==="created_at")||v.splice(3,0,{name:"created_at",label:"Date",field:a=>o(a.created_at),sortable:!0})},T=u(window.innerWidth),w=L([{name:"id",required:!0,label:"ID",align:"left",field:t=>t.autotask_id,format:t=>`${t}`,sortable:!0},{name:"name",required:!0,label:"Name",align:"left",field:t=>t.companyName,format:t=>`${t}`,sortable:!0},{name:"accountType",required:!0,label:"Account Type",align:"left",field:t=>t.CompanyTypeName,format:t=>`${t}`,sortable:!0},{name:"actions",required:!0,label:"Actions",align:"right",sortable:!0}]),Fe=()=>{if(T.value<=570){const t=w.findIndex(a=>a.name==="id");t!==-1&&w.splice(t,1)}else w.find(a=>a.name==="id")||w.splice(0,0,{name:"id",label:"ID",field:a=>a.id,sortable:!0});if(T.value<=500){const t=w.findIndex(a=>a.name==="accountType");t!==-1&&w.splice(t,1)}else w.find(a=>a.name==="accountType")||w.splice(1,0,{name:"accountType",label:"Account Type",field:a=>a.AccountType,sortable:!0})},X=()=>{T.value=window.innerWidth,ze(),Fe()};ve(()=>{window.addEventListener("resize",X),X()}),xe(()=>{window.removeEventListener("resize",X)});const me=ce("contextMenuSetter");function He(t,a,N){me({id:t,evt:N,route:"sow_details",routeName:"SowDetails",loadingMessage:"Redirecting to SOW Details..."})}function Ke(t,a,N){me({id:t,evt:N,route:"account",routeName:"AccountDetails",loadingMessage:"Redirecting to Account..."})}return{state:e,setEditMode:ke,user:c,updateUser:A,setAccountId:re,cancelEditing:G,titleInput:z,nameInput:H,setEditAccount:he,approveUser:De,showImage:Ue,columns:v,rows:M,rolesList:le,setShowModal:Me,updateUserAvatar:Ie,bioInput:F,deleteUser:Oe,disableUser:Ve,isUserApproved:I,isLoading:J,accounts:b,rolesLoading:q,saveAttachedComponent:je,roleId:V,searchOptionsAccount:h,searchOptionsRole:se,deleteRole:qe,darkmode:ee,autoTimeEntryTooltip:ae,ownedSows:te,ownedAccounts:O,sowColumns:We,accountColumns:w,accountLoading:!1,goToSow:He,goToAccount:Ke,isDraftTooltip:ne,loading:l}}}),At={class:"intro-y box mt-0"},Ct={class:"flex items-center p-5 border-b border-slate-200/60 dark:border-slate-500"},Dt={key:0,class:"font-medium text-base"},Ut={class:"flex flex-col sm:flex-row items-end sm:items-center ml-10 justify-end w-full mt-[-1.5rem]"},Mt={class:"flex items-center"},Tt={key:0,class:"mt-1 text-slate-500 dark:text-slate-300"},St={key:0,class:"ml-0 sm:ml-10 mt-1 text-slate-500 dark:text-slate-300"},Et={class:"pb-5 px-5 relative"},It={class:"grid grid-cols-2 sm:grid-cols-3 flex justify-center gap-x-5"},Vt={class:"flex justify-center items-center"},Nt=["src"],Ot={class:"rounded-full absolute top-0 flex justify-center items-center left-0 z-10 w-full h-full edit-picture"},Rt={key:0,class:"flex flex-col items-center justify-center"},$t={class:"grid grid-cols-1 md:grid-cols-2 w-[45vw] sm:w-[55vw] md:w-[45vw]"},Qt={class:""},Lt={class:"mt-5"},Bt={class:"w-20"},Pt={class:"mt-5"},jt={key:0},qt={class:"ml-0 md:ml-20 lg:ml-10"},Wt={class:"mt-5"},zt={class:"w-40"},Ft={class:"mt-5"},Ht={class:"w-20"},Kt={class:"col-span-2"},Gt={class:"mt-5 flex flex-col w-full"},Yt={class:"text-slate-400"},Jt={class:"col-span-2 grid grid-cols-2"},Xt={class:"mt-5 flex flex-col w-full"},Zt={class:"text-slate-400"},xt={style:{"white-space":"pre-line"}},_t={class:"mt-5 flex flex-col w-full ml-0 md:ml-20 lg:ml-10"},eo={class:"text-slate-400"},to={class:"mt-5 col-span-3 mx-5"},oo={key:0,class:"my-3 col-span-3 mx-5"},so={key:1,class:"items-center col-span-3 ml-5 grid grid-cols-2 md:grid-cols-3"},lo={class:"col-span-1 md:col-span-2"},ao={key:2,class:"my-3 col-span-3 mx-5 dark:border-slate-500"},no={key:3,class:"flex items-center col-span-3 ml-5 grid grid grid-cols-2 md:grid-cols-3"},ro={class:"col-span-1 md:col-span-2 mr-0 sm:mr-10"},io={class:"flex items-center col-span-3 ml-5 grid grid grid-cols-2 md:grid-cols-3"},uo={class:"col-span-1 md:col-span-2 mr-0 sm:mr-10"},mo={class:"text-md"},po={class:"text-primary text-weight-medium"},co={key:0,class:"mt-10 mb-5 w-full mx-10 dark:border-slate-600"},fo={key:1,class:"mx-10 mt-5",style:{width:"100%"}},vo={class:"flex justify-start mb-[-1rem]"},go={key:0,class:"my-10 w-full dark:border-slate-600"},bo={key:1,class:"relative flex -mb-4"},wo={class:"absolute right-0"},yo={key:3,class:"my-10 w-full dark:border-slate-600"},ko={key:4,class:"flex justify-end"};function ho(e,o,P,p,ee,te){const O=Z("SearchModel"),I=Z("BasicAttachModal"),M=Z("ListQTable");return n(),d(Xe,null,[i(be,{class:x(["w-full mx-4 sm:mx-10 h-full mb-24 md:mb-5",e.darkmode?"bg-[#28334E] text-slate-300":"bg-white"])},{default:g(()=>[s("div",At,[s("div",Ct,[e.loading?r("",!0):(n(),d("h2",Dt,f(e.user.name),1)),e.loading?(n(),m(y,{key:1,class:"w-40 h-3"})):r("",!0),s("div",Ut,[s("div",Mt,[s("div",{class:x([e.isUserApproved?"bg-primary":"bg-red-6","w-2.5 h-2.5 rounded-full mt-1 mr-3"])},null,2),e.loading?r("",!0):(n(),d("p",Tt,f(e.isUserApproved?"Active":"Not Active"),1)),e.loading?(n(),m(y,{key:1,class:"w-14 h-3 mt-1"})):r("",!0)]),e.loading?r("",!0):(n(),d("p",St,f(e.isUserApproved?"Client Portal Access Enabled":"Client Portal Access Disabled"),1)),e.loading?(n(),m(y,{key:1,class:"w-48 h-3 mt-1 ml-14"})):r("",!0)])]),s("div",Et,[s("div",It,[s("div",Vt,[s("div",{class:"w-32 h-32 rounded-full relative mt-3 mx-2 sm:mx-5 cursor-pointer",onMouseenter:o[1]||(o[1]=l=>e.state.hoveringPicture=!0),onMouseleave:o[2]||(o[2]=l=>e.state.hoveringPicture=!1)},[o[35]||(o[35]=s("div",{class:"bg-blue-400 w-full h-full p-[4.25rem] rounded-full absolute -left-1 -top-1 shadow-xl"},null,-1)),e.loading?r("",!0):(n(),d("img",{key:0,class:"object-cover h-full w-full rounded-full relative",src:e.showImage(e.user)},null,8,Nt)),e.loading?(n(),m(y,{key:1,class:"w-32 h-32 rounded-full bg-gray-300 dark:bg-[#242D45]"})):r("",!0),s("div",Ot,[e.state.hoveringPicture?(n(),d("div",Rt,[i(k,{name:"photo_camera",color:"grey-3",size:"lg",class:""}),o[34]||(o[34]=s("p",{class:"text-slate-100"},"Upload",-1)),i(_e,{modelValue:e.state.fileInput,"onUpdate:modelValue":[o[0]||(o[0]=l=>e.state.fileInput=l),e.updateUserAvatar],dense:"",class:"w-full h-full absolute rounded-full cursor-pointer",color:"white",style:{opacity:"0"},borderless:"",dark:"","text-color":"white"},null,8,["modelValue","onUpdate:modelValue"])])):r("",!0)])],32)]),s("div",$t,[s("div",Qt,[s("div",Lt,[s("label",{for:"update-profile-form-7",class:"text-slate-400 cursor-pointer hover:text-blue-500",onClick:o[3]||(o[3]=l=>e.setEditMode("name"))},[o[36]||(o[36]=C("User ",-1)),i(k,{name:"edit",class:"ml-2 mb-1"})]),s("div",Bt,[e.state.editMode!=="name"&&!e.loading?(n(),d("p",{key:0,class:"cursor-pointer w-52",onClick:o[4]||(o[4]=l=>e.setEditMode("name"))},f(e.user.name),1)):r("",!0),e.loading?(n(),m(y,{key:1,class:"w-52 h-3 mt-2"})):r("",!0)]),e.state.editMode==="name"?(n(),m(E,{key:0,id:"update-profile-form-7",ref:"nameInput",modelValue:e.state.name,"onUpdate:modelValue":o[5]||(o[5]=l=>e.state.name=l),dense:"",filled:"",dark:e.darkmode,type:"text",class:"form-control",onFocusout:o[6]||(o[6]=l=>e.cancelEditing("name",e.state.name)),onKeyup:o[7]||(o[7]=Q(l=>e.cancelEditing("name",e.state.name),["enter"]))},null,8,["modelValue","dark"])):r("",!0)]),s("div",Pt,[o[37]||(o[37]=s("label",{class:"text-slate-400 break-all"},"Email",-1)),e.loading?r("",!0):(n(),d("p",jt,f(e.user.email),1)),e.loading?(n(),m(y,{key:1,class:"w-40 h-3 mt-2"})):r("",!0)])]),s("div",qt,[s("div",Wt,[s("label",{class:"form-label text-slate-400 mb-1 cursor-pointer hover:text-blue-500",onClick:o[8]||(o[8]=()=>{e.state.editMode==="account"?e.setEditMode(""):e.setEditMode("account")})},[o[38]||(o[38]=C("Account ",-1)),i(k,{name:e.state.editMode==="account"?"close":"edit",class:x(["ml-2 mb-1",e.state.editMode==="account"&&"text-red"])},null,8,["name","class"])]),e.state.editMode==="account"?(n(),m(O,{key:0,label:"Accounts",value:"companyName",rows:e.accounts,loading:e.isLoading,filled:"",dense:"",store:e.searchOptionsAccount},null,8,["rows","loading","store"])):r("",!0),s("div",zt,[e.state.editMode!=="account"&&!e.loading?(n(),d("p",{key:0,class:"cursor-pointer w-60",onClick:o[9]||(o[9]=l=>e.setEditMode("account"))},f(e.user.AccountName),1)):r("",!0),e.loading?(n(),m(y,{key:1,class:"w-32 h-3 mt-2"})):r("",!0)])]),s("div",Ft,[s("label",{for:"update-profile-form-9",class:"text-slate-400 cursor-pointer hover:text-blue-500",onClick:o[10]||(o[10]=l=>e.setEditMode("title"))},[o[39]||(o[39]=C("Title ",-1)),i(k,{name:"edit",class:"ml-2 mb-1"})]),e.state.editMode==="title"?(n(),m(E,{key:0,id:"update-profile-form-9",ref:"titleInput",modelValue:e.state.title,"onUpdate:modelValue":o[11]||(o[11]=l=>e.state.title=l),dark:e.darkmode,dense:"",filled:"",type:"text",class:"form-control",placeholder:"Title",onFocusout:o[12]||(o[12]=l=>e.cancelEditing("title",e.state.title)),onKeyup:o[13]||(o[13]=Q(l=>e.cancelEditing("title",e.state.title),["enter"]))},null,8,["modelValue","dark"])):r("",!0),s("div",Ht,[e.state.editMode!=="title"&&!e.loading?(n(),d("p",{key:0,class:"cursor-pointer w-52",onClick:o[14]||(o[14]=l=>e.setEditMode("title"))},f(e.user.title!==null?e.user.title:"N/A"),1)):r("",!0),e.loading?(n(),m(y,{key:1,class:"w-32 h-3 mt-2"})):r("",!0)])])]),s("div",Kt,[s("div",Gt,[s("label",Yt,[o[40]||(o[40]=C("Opt out of AutoTime Entries ",-1)),i(k,{name:"help",size:"xs",class:"ml-4 text-slate-500 hover:text-blue-400 transition-all duration-500"},{default:g(()=>[i(pe,{class:"text-sm bg-white shadow-md border w-80 text-slate-600 hover:text-blue-400"},{default:g(()=>[C(f(e.autoTimeEntryTooltip),1)]),_:1})]),_:1})]),i(rt,{modelValue:e.state.optOut,"onUpdate:modelValue":o[15]||(o[15]=l=>e.state.optOut=l),class:"-ml-2",dark:e.darkmode,label:e.state.optOut?"Time Entries  for Tickets and Tasks must be created manually":"Time Entries will be automatically created for Tickets and Tasks",onClick:o[16]||(o[16]=l=>e.cancelEditing("optOut",e.state.optOut))},null,8,["modelValue","dark","label"])])]),s("div",Jt,[s("div",Xt,[s("label",Zt,[o[41]||(o[41]=C("Show on AIS Website ",-1)),i(k,{name:"help",size:"xs",class:"ml-4 text-slate-500 hover:text-blue-400 transition-all duration-500"},{default:g(()=>[i(pe,{class:"text-sm bg-white shadow-md border w-[22rem] text-slate-600 hover:text-blue-400",persistent:""},{default:g(()=>[s("p",xt,f(e.isDraftTooltip),1)]),_:1})]),_:1})]),i(dt,{modelValue:e.state.isNotDraft,"onUpdate:modelValue":o[17]||(o[17]=l=>e.state.isNotDraft=l),class:"break-keep w-full -ml-2",label:e.state.isNotDraft?"Published":"Hidden",onClick:o[18]||(o[18]=l=>e.cancelEditing("isDraft",e.state.optOut))},null,8,["modelValue","label"])]),s("div",_t,[s("label",eo,[o[42]||(o[42]=C("Order ",-1)),i(k,{name:"edit",class:"ml-2 mb-1"})]),s("div",{onClick:o[22]||(o[22]=l=>e.state.allowOrderEdit=!0)},[i(E,{modelValue:e.state.order,"onUpdate:modelValue":o[19]||(o[19]=l=>e.state.order=l),modelModifiers:{number:!0},type:"number",dense:"",outlined:"",readonly:!e.state.allowOrderEdit,dark:e.darkmode,class:"w-24",placeholder:"N/A",onFocusout:o[20]||(o[20]=l=>e.cancelEditing("order",e.state.order)),onKeyup:o[21]||(o[21]=Q(l=>e.cancelEditing("order",e.state.order),["enter"]))},null,8,["modelValue","readonly","dark"])])])])]),s("div",to,[s("label",{class:"text-gray-400 cursor-pointer",onClick:o[23]||(o[23]=l=>e.setEditMode("bio"))},"Bio"),e.state.editMode!=="bio"&&!e.loading?(n(),d("p",{key:0,class:"cursor-pointer",onClick:o[24]||(o[24]=l=>e.setEditMode("bio"))},f(e.user.bio!==null?e.user.bio:"N/A"),1)):r("",!0),e.loading?(n(),m(y,{key:1,class:"w-2/3 h-8 mt-2"})):r("",!0),e.state.editMode==="bio"?(n(),m(E,{key:2,id:"update-profile-form-9",ref:"bioInput",modelValue:e.state.bio,"onUpdate:modelValue":o[25]||(o[25]=l=>e.state.bio=l),dense:"",filled:"",type:"textarea",class:"form-control",placeholder:"Biography",onFocusout:o[26]||(o[26]=l=>e.cancelEditing("bio",e.state.bio)),onKeyup:o[27]||(o[27]=Q(l=>e.cancelEditing("bio",e.state.bio),["enter"]))},null,8,["modelValue"])):r("",!0)]),e.isUserApproved?r("",!0):(n(),d("hr",oo)),e.isUserApproved?r("",!0):(n(),d("div",so,[s("div",lo,[s("p",null,"Enable "+f(e.user.name??"User")+"'s Account",1),o[43]||(o[43]=s("p",{class:"text-slate-500 text-xs mt-2"}," User will be given privileges and will be able to navigate and edit Project Central content ",-1))]),i(U,{color:"green",dense:"",label:"Approve User",class:"mt-3 px-2 mr-5 ml-10 col-start-2 md:col-start-3","no-caps":"",icon:"recommend",onClick:e.approveUser},null,8,["onClick"])])),e.isUserApproved?(n(),d("hr",ao)):r("",!0),e.isUserApproved?(n(),d("div",no,[s("div",ro,[s("p",null,"Disable "+f(e.user.name??"User")+" from Project Central",1),o[44]||(o[44]=s("p",{class:"text-slate-500 text-xs mt-2"},' User will be restricted and will be redirected to a "Awaiting Approval" page ',-1))]),i(U,{color:"primary",dense:"",label:"Disable User",class:"mt-3 px-2 mr-5 ml-10 col-start-2 md:col-start-3","no-caps":"",icon:"person_off",onClick:e.disableUser},null,8,["onClick"])])):r("",!0),o[48]||(o[48]=s("hr",{class:"my-3 col-span-3 mx-5 dark:border-slate-500"},null,-1)),s("div",io,[s("div",uo,[s("p",null,"Delete "+f(e.user.name??"User")+"'s Account",1),o[45]||(o[45]=s("p",{class:"text-slate-500 text-xs mt-2"}," This user will be deleted permanently and unable to use Project Central in the future ",-1))]),i(U,{color:"red",dense:"",icon:"delete",label:"Delete User",class:"mt-3 px-2 mr-5 ml-10 col-start-2 md:col-start-3","no-caps":"",onClick:o[28]||(o[28]=l=>e.state.showPopup=!0)}),i(mt,{modelValue:e.state.showPopup,"onUpdate:modelValue":o[30]||(o[30]=l=>e.state.showPopup=l)},{default:g(()=>[i(be,{class:"px-3"},{default:g(()=>[i(ut,{class:"text-center"},{default:g(()=>[o[47]||(o[47]=s("p",{class:"text-xl text-weight-medium mb-2"},"Are you sure?",-1)),s("p",mo,[o[46]||(o[46]=C(" Delete User: ",-1)),s("span",po,f(e.user.name??"Name"),1)]),i(U,{label:"Cancel",class:"mt-3 mr-2","no-caps":"",flat:"",onClick:o[29]||(o[29]=l=>e.state.showPopup=!1)}),i(U,{color:"red",label:"Delete","no-caps":"",class:"mt-3",onClick:e.deleteUser},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])])])]),_:1},8,["class"]),e.user?(n(),d("hr",co)):r("",!0),e.user?(n(),d("div",fo,[s("div",vo,[e.state.openRoleModal?(n(),m(I,{key:0,showComponentModal:e.state.openRoleModal,setComponentModal:e.setShowModal,createOnly:!0,title:"Role",saveComponent:e.saveAttachedComponent,selectedComponentID:e.roleId,width:"25rem"},{default:g(()=>[i(O,{value:"name",filled:"",label:"Roles",rows:e.rolesList,loading:e.rolesLoading,store:e.searchOptionsRole,class:"mx-3 my-5"},null,8,["rows","loading","store"])]),_:1},8,["showComponentModal","setComponentModal","saveComponent","selectedComponentID"])):r("",!0),i(U,{color:"primary",label:"Attach Role","no-caps":"","icon-right":"add",onClick:o[31]||(o[31]=l=>e.state.openRoleModal=!0)})]),i(M,{rows:e.rows,columns:e.columns,stateValue:e.state,"header-centered":"",title:"User Roles",customNoDataText:"Searching for Roles...",shouldHideBottom:!0,superDense:!1,class:"mb-10",showViewButton:!1,handleRowClick:e.deleteRole},null,8,["rows","columns","stateValue","handleRowClick"]),e.user?(n(),d("hr",go)):r("",!0),e.ownedSows.length>0?(n(),d("div",bo,[i(U,{color:"primary",label:"Create SOW","no-caps":"","icon-right":"add",to:"/sow/create"}),s("div",wo,[e.ownedSows.length>0?(n(),m(E,{key:0,modelValue:e.state.sowSearch,"onUpdate:modelValue":o[32]||(o[32]=l=>e.state.sowSearch=l),label:"Search SOWs",dark:e.darkmode,filled:"",dense:"",class:""},{append:g(()=>[i(k,{name:"search"})]),_:1},8,["modelValue","dark"])):r("",!0)])])):r("",!0),e.ownedSows&&e.ownedSows.length>0?(n(),m(M,{key:2,rows:e.ownedSows.filter(l=>l&&l.Name&&l.Name.toLowerCase().includes(e.state.sowSearch.toLowerCase())),columns:e.sowColumns,stateValue:e.state,"header-centered":"",title:"Owned User SOWs",customNoDataText:"Searching for Owned SOWs...",superDense:!1,class:"mb-10",showViewButton:!1,handleRowClick:e.goToSow,"show-pagination":!1},null,8,["rows","columns","stateValue","handleRowClick"])):r("",!0),e.ownedAccounts&&e.ownedAccounts.length>1?(n(),d("hr",yo)):r("",!0),e.ownedAccounts&&e.ownedAccounts.length>1?(n(),d("div",ko,[i(E,{modelValue:e.state.accountSearch,"onUpdate:modelValue":o[33]||(o[33]=l=>e.state.accountSearch=l),label:"Search Owned Accounts",dark:e.darkmode,filled:"",dense:"",class:"w-60 -mb-5"},{append:g(()=>[i(k,{name:"search"})]),_:1},8,["modelValue","dark"])])):r("",!0),e.ownedAccounts&&e.ownedAccounts.length>1?(n(),m(M,{key:5,rows:e.ownedAccounts.filter(l=>l&&l.companyName&&l.companyName.toLowerCase().includes(e.state.accountSearch.toLowerCase())),"header-centered":"",columns:e.accountColumns,stateValue:e.state,title:"Owned Accounts","show-pagination":!1,customNoDataText:"Searching for Owned Accounts...",superDense:!1,class:"mb-10",showViewButton:!1,handleRowClick:e.goToAccount},null,8,["rows","columns","stateValue","handleRowClick"])):r("",!0)])):r("",!0)],64)}const Zo=Ye(ht,[["render",ho]]);export{Zo as default};
