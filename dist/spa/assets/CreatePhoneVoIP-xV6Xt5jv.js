import{a6 as R,a7 as $,al as F,am as G,a9 as H,ac as o,aa as l,af as n,Q as p,az as f,ag as v,ao as J,au as K,E as W,ak as X,aj as Y,ay as Z,aB as w,T as c,ax as P}from"./index-pp-zxjmJ.js";import{Q as d,u as ee}from"./dark-mode-T9Pt6Rb6.js";import{Q as U}from"./QToggle-CCqmYG-z.js";import{Q as ae}from"./QCardSection-CGtarS5O.js";import{Q as oe}from"./QCard-B8NG_d02.js";import{S as te}from"./SearchModel-Bs5n-Zcw.js";import{C as se}from"./Phone-CK5AFMxB.js";import{C as le}from"./Contact-C7NnR367.js";import{A as ne}from"./Account-BjVzKmM3.js";import{l as re,e as de}from"./searchStore-yxtnVXNf.js";import{I as ie}from"./Introspection-B6PnXNiS.js";import"./use-key-composition-CnPM_xP4.js";import"./index-Cy3PLz-a.js";import"./parser-D6bCODxJ.js";import"./QResizeObserver-B57LBLtT.js";import"./QScrollObserver-D-e6ZeCm.js";import"./touch-BjYP5sR0.js";import"./ClosePopup-Bou3snqx.js";import"./search-DiX5JiHP.js";const ue=$({name:"CreatePhoneVoIP",components:{SearchModel:te},setup(){const e=K({focusingSearchInput:"",displayName:"",notes:"",macAddress:"",accountId:"",contactId:"",overrideConfig:!1,overrideQrConfig:!1,config:"",extensionNumber:"",extensionPassword:"",voipServer:"",phoneAdminPassword:"",qrConfig:""}),a=ee(),y=W(()=>a.darkmode),I=X(),S=Y(),{mutate:A,onDone:g,onError:s}=Z(se,()=>({variables:{_id:S.params.id,displayname:e.displayName,notes:e.notes,macaddress:e.macAddress,account_uid:e.accountId,contact_uid:e.contactId,override_config:e.overrideConfig,override_qrconfig:e.overrideQrConfig,config:e.config,extension_number:e.extensionNumber,extension_password:e.extensionPassword,voip_server:e.voipServer,phone_admin_password:e.phoneAdminPassword,qrconfig:e.qrConfig}}));g(t=>{console.log("Phone created successfully",t),I.push({name:"VoIP Phone Details",params:{id:t.data.CreatePhoneMutation._id}})}),s(t=>{console.log("Error creating phone",t)});function L(){console.log("Create VoIP Phone"),A()}const i=re(),u=de(),{result:Q,loading:T}=w(ne,()=>({companyName:i.search,page:i.page,first:15})),r=c([]),h=c(!1),N=c("");P(()=>{if(T.value&&(h.value=!0),N.value!==i.search&&(h.value=!0,r.value=[],N.value=i.search),Q.value){h.value=!1;let t=r.value;const k=Q.value.Companies.data.filter(O=>!r.value.some(j=>j.autotask_id===O.autotask_id));i.page>1?r.value=[...r.value,...k]:r.value=[...k,...r.value],i.setSpinner(r.value,t)}});function M(t){console.log(t,"item setAccountId"),e.accountId=t.autotask_id}function _(t){console.log(t,"item setContactId"),e.contactId=t.autotask_id}function z(t){console.log("Search input focused: ",t),e.focusingSearchInput=t,t==="Accounts"?i.onSetValueCallback(M):t==="Contacts"&&u.onSetValueCallback(_)}const{result:C,loading:D}=w(le,()=>({firstName:u.search,page:u.page,first:15})),m=c([]),b=c(!1),x=c("");P(()=>{if(D.value&&(b.value=!0),x.value!==u.search&&(b.value=!0,m.value=[],x.value=u.search),C.value){console.log(C.value,"contactsData"),b.value=!1;let t=m.value;m.value=[...m.value,...C.value.Contacts.data],u.setSpinner(m.value,t)}});function E(t){return t.firstName+" "+t.lastName}const{result:V}=w(ie,()=>({name:"Phone"})),q=c([]);P(()=>{V.value&&(console.log(V.value,"introspectionValue.value.__type.fields"),q.value=V.value.__type.fields)});function B(t){return q.value.filter(k=>k.name===t)[0].description}return{state:e,accounts:r,contacts:m,contactLoading:b,accountLoading:h,focusTracker:z,validateCreatePhoneVoIP:L,searchOptionsAccount:i,searchOptionsContact:u,computedContactName:E,introspect:B,darkmode:y}}}),ce={class:"w-full flex justify-center"},me={class:"mt-3 mb-[-1rem] mr-5 w-full"},pe={class:"grid grid-cols-3 gap-10 mb-10"},fe={style:{"white-space":"pre-line"}},ve={class:"grid grid-cols-2 mb-3 mt-7 gap-10"},ge={style:{"white-space":"pre-line"}},he={style:{"white-space":"pre-line"}},be={class:"grid grid-cols-2 mb-3 gap-10"},ke={style:{"white-space":"pre-line"}},Ce={class:"grid grid-cols-3 mb-3 gap-4"},Ve={class:"flex items-center justify-center"},we={style:{"white-space":"pre-line"}},Pe={class:"flex items-center justify-end"},ye={style:{"white-space":"pre-line"}},Ie={class:"flex justify-end"};function Se(e,a,y,I,S,A){const g=F("SearchModel");return H(),G("div",ce,[o(oe,{class:"w-full q-pa-md md:w-4/5 dark:bg-[#28344F] dark:text-slate-300"},{default:l(()=>[a[12]||(a[12]=n("p",{class:"ml-4 text-xl text-slate-500 dark:text-slate-300 border-b dark:border-slate-600 mr-5"},"Create Phone VoIP",-1)),o(ae,{class:"row items-center mr-0 pr-0 w-full"},{default:l(()=>[n("div",me,[n("div",pe,[o(g,{searchLabel:"Select Related Account",label:"Accounts",value:"companyName",rows:e.accounts,loading:e.accountLoading,class:"w-full",filled:"","no-focus":"",focusTracker:e.focusTracker,store:e.searchOptionsAccount,dense:!0},null,8,["rows","loading","focusTracker","store"]),o(g,{searchLabel:"Select Related Contact",label:"Contacts",value:e.computedContactName,rows:e.contacts,loading:e.contactLoading,class:"w-full",filled:"","no-focus":"",focusTracker:e.focusTracker,store:e.searchOptionsContact,dense:!0},null,8,["value","rows","loading","focusTracker","store"]),o(d,{modelValue:e.state.macAddress,"onUpdate:modelValue":a[0]||(a[0]=s=>e.state.macAddress=s),filled:"",outlined:"",label:"Mac Address",dense:!0,dark:e.darkmode},{append:l(()=>[o(p,{name:"help",class:"text-gray-400 hover:text-blue-400",size:"xs"},{default:l(()=>[o(f,{class:"bg-white border rounded-sm shadow-md p-2 text-black text-sm"},{default:l(()=>[n("p",fe,v(e.introspect("macaddress")),1)]),_:1})]),_:1})]),_:1},8,["modelValue","dark"])]),o(d,{modelValue:e.state.displayName,"onUpdate:modelValue":a[1]||(a[1]=s=>e.state.displayName=s),filled:"",outlined:"",class:"w-full m-0 p-0",label:"Name",dark:e.darkmode,dense:!0},null,8,["modelValue","dark"]),o(d,{modelValue:e.state.notes,"onUpdate:modelValue":a[2]||(a[2]=s=>e.state.notes=s),filled:"",outlined:"",label:"Notes",class:"q-my-md",dense:!0,dark:e.darkmode},null,8,["modelValue","dark"]),o(d,{modelValue:e.state.config,"onUpdate:modelValue":a[3]||(a[3]=s=>e.state.config=s),filled:"",outlined:"",label:"Config",type:"textarea",class:"q-my-md",dense:"",dark:e.darkmode},null,8,["modelValue","dark"]),a[11]||(a[11]=n("hr",{class:"mt-7 dark:border-slate-600"},null,-1)),n("div",ve,[o(d,{modelValue:e.state.extensionNumber,"onUpdate:modelValue":a[4]||(a[4]=s=>e.state.extensionNumber=s),filled:"",outlined:"",label:"Extension Number",dense:!0,dark:e.darkmode},{append:l(()=>[o(p,{name:"help",class:"text-gray-400 hover:text-blue-400",size:"xs"},{default:l(()=>[o(f,{class:"bg-white border rounded-sm shadow-md p-2 text-black text-sm"},{default:l(()=>[n("p",ge,v(e.introspect("extension_number")),1)]),_:1})]),_:1})]),_:1},8,["modelValue","dark"]),o(d,{modelValue:e.state.extensionPassword,"onUpdate:modelValue":a[5]||(a[5]=s=>e.state.extensionPassword=s),filled:"",outlined:"",label:"Extension Password",dense:!0,dark:e.darkmode},{append:l(()=>[o(p,{name:"help",class:"text-gray-400 hover:text-blue-400",size:"xs"},{default:l(()=>[o(f,{class:"bg-white border rounded-sm shadow-md p-2 text-black text-sm"},{default:l(()=>[n("p",he,v(e.introspect("extension_password")),1)]),_:1})]),_:1})]),_:1},8,["modelValue","dark"])]),n("div",be,[o(d,{modelValue:e.state.voipServer,"onUpdate:modelValue":a[6]||(a[6]=s=>e.state.voipServer=s),dark:e.darkmode,filled:"",outlined:"",label:"VoIP Server",dense:""},{append:l(()=>[o(p,{name:"help",class:"text-gray-400 hover:text-blue-400",size:"xs"},{default:l(()=>[o(f,{class:"bg-white border rounded-sm shadow-md p-2 text-black text-sm"},{default:l(()=>[n("p",ke,v(e.introspect("voip_server")),1)]),_:1})]),_:1})]),_:1},8,["modelValue","dark"]),o(d,{modelValue:e.state.phoneAdminPassword,"onUpdate:modelValue":a[7]||(a[7]=s=>e.state.phoneAdminPassword=s),filled:"",outlined:"",label:"Phone Admin Password",dense:!0,dark:e.darkmode},null,8,["modelValue","dark"])]),n("div",Ce,[o(d,{modelValue:e.state.qrConfig,"onUpdate:modelValue":a[8]||(a[8]=s=>e.state.qrConfig=s),filled:"",outlined:"",label:"Qr Config",dense:"",dark:e.darkmode},null,8,["modelValue","dark"]),n("div",Ve,[o(U,{modelValue:e.state.overrideConfig,"onUpdate:modelValue":a[9]||(a[9]=s=>e.state.overrideConfig=s),label:"Override Config"},null,8,["modelValue"]),o(p,{name:"help",class:"text-gray-400 hover:text-blue-400 ml-3",size:"xs"},{default:l(()=>[o(f,{class:"bg-white border rounded-sm shadow-md p-2 text-black text-sm"},{default:l(()=>[n("p",we,v(e.introspect("override_config")),1)]),_:1})]),_:1})]),n("div",Pe,[o(U,{modelValue:e.state.overrideQrConfig,"onUpdate:modelValue":a[10]||(a[10]=s=>e.state.overrideQrConfig=s),label:"Override Qr Config"},null,8,["modelValue"]),o(p,{name:"help",class:"text-gray-400 hover:text-blue-400 ml-3",size:"xs"},{default:l(()=>[o(f,{class:"bg-white border rounded-sm shadow-md p-2 text-black text-sm w-60"},{default:l(()=>[n("p",ye,v(e.introspect("override_qrconfig")),1)]),_:1})]),_:1})])]),n("div",Ie,[o(J,{color:"primary",label:"Create Phone VoIP","no-caps":"",class:"q-mt-md",onClick:e.validateCreatePhoneVoIP},null,8,["onClick"])])])]),_:1})]),_:1})])}const Ge=R(ue,[["render",Se]]);export{Ge as default};
