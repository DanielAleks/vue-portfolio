import{a6 as $,a7 as N,al as I,am as T,a9 as j,af as O,ac as u,aa as R,Q,E as y,au as h,ak as V,T as v,U as b,O as _}from"./index-BQqINSog.js";import{Q as W,u as B}from"./dark-mode-DghqNWqv.js";import{u as D}from"./use-quasar-B7hMkyWz.js";import{L}from"./ListQTable-BpmEZ14_.js";import{u as q,s as x}from"./pinia-C5QXsjNG.js";import"./use-key-composition-DtH4YFMw.js";import"./index-DNzQhVUM.js";import"./parser-DuPc8scl.js";import"./QSelect-D_RJjQ5R.js";import"./QChip-xjV-pAmj.js";import"./QItemLabel-qyVivjvh.js";import"./QDialog-DPL0UueO.js";import"./QToggle-C2iDUUqu.js";import"./QMarkupTable-qldzP-iJ.js";import"./ClosePopup-CQGLdLf8.js";import"./QPagination-D9l2aqNt.js";import"./QCard-DUnYgpNY.js";import"./QSkeleton-DEb6GhJn.js";import"./QSeparator-C33Q4o5C.js";const E=N({name:"WopdProjects",components:{ListQTable:L},props:{darkMode:Boolean},setup(){const a=q(x);function r(){a.setSowID(null)}const c=B(),p=y(()=>c.darkmode),s=h({search:"",totalPages:10,page:1,loading:!1}),m=D();function d(e){m.loading.show({message:"Redirecting to Implementation: "+e}),setTimeout(()=>{m.loading.hide()},1e3)}const l=V();function g(e){d(e.Name),l.push({path:"/implementation-preview",query:{id:e.id}})}const w=(e,t,n)=>{console.log("open",n),n.ctrlKey===!0||n.button===1||n==="openNewTab"?window.open(`project_details/${e}`,"_blank"):n==="openNewWindow"?window.open(`project_details/${e}`,"_blank","width=full,height=full"):n==="openIncognitoWindow"?window.open(`project_details/${e}`,"_blank","incognito=yes"):n.button!==2&&(r(),l.push({name:"ProjectDetails",params:{id:e}}))},k=v([]);let f;const P=(e,t)=>{clearTimeout(f),f=setTimeout(e,t)};b(()=>s.search,()=>{P(async()=>{s.page=1},500),s.notFound=!1,setTimeout(()=>{s.notFound=!0},5e3)});const o=h([{name:"id",align:"left",label:"ID",field:e=>e.id,format:e=>`${e}`,sortable:!0},{name:"name",align:"left",label:"Name",field:e=>e.projectName,format:e=>`${e}`,sortable:!0},{name:"Status",align:"center",label:"Status",field:e=>e.status,format:e=>`${e}`,sortable:!0},{name:"PurchaseOrderNumber",align:"center",label:"Purchase Order #",field:e=>e.purchaseOrderNumber,format:e=>`${e}`,sortable:!0},{name:"actions",align:"center",label:"Actions"}]),i=_("windowWidth"),C=()=>{if(i.value<=850){const e=o.findIndex(t=>t.name==="Status");e!==-1&&o.splice(e,1)}else o.find(t=>t.name==="Status")||o.splice(2,0,{name:"Status",align:"center",label:"Status",field:t=>t.Status,format:t=>`${t}`,sortable:!0});if(i.value<=750){const e=o.findIndex(t=>t.name==="PurchaseOrderNumber");e!==-1&&o.splice(e,1)}else o.find(t=>t.name==="PurchaseOrderNumber")||o.splice(2,0,{name:"PurchaseOrderNumber",align:"center",label:"Purchase Order #",field:t=>t.PurchaseOrderNumber,format:t=>`${t}`,sortable:!0});if(i.value<=450){const e=o.findIndex(t=>t.name==="id");e!==-1&&o.splice(e,1)}else o.find(t=>t.name==="id")||o.splice(0,0,{name:"id",align:"center",label:"ID",field:t=>t.id,format:t=>`${t}`,sortable:!0})};b(()=>i.value,()=>{C()},{immediate:!0});function S(e){s.page=e}return{state:s,goToImplementation:g,columns:o,projects:k,handleRowClick:w,setPage:S,darkmode:p}}}),F={class:"q-px-lg",style:{width:"100%"}},M={class:"flex justify-end mb-[-1rem]"};function U(a,r,c,p,s,m){const d=I("ListQTable");return j(),T("div",F,[O("div",M,[u(W,{modelValue:a.state.search,"onUpdate:modelValue":r[1]||(r[1]=l=>a.state.search=l),dense:!0,filled:"",label:"Search Projects",class:"implementation-search",style:{width:"300px"},dark:a.darkmode},{append:R(()=>[u(Q,{name:a.state.search===""?"search":"close",class:"cursor-pointer",onClick:r[0]||(r[0]=l=>a.state.search="")},null,8,["name"])]),_:1},8,["modelValue","dark"])]),u(d,{rows:a.projects,columns:a.columns,stateValue:a.state,loading:a.state.loading,title:"Projects",handleRowClick:a.handleRowClick,setPage:a.setPage,customNoDataText:"Searching for Projects...",preloadTemplate:""},null,8,["rows","columns","stateValue","loading","handleRowClick","setPage"])])}const de=$(E,[["render",U]]);export{de as default};
