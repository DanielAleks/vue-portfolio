import{a6 as Pe,a7 as De,al as we,am as Re,a9 as ae,af as Be,ac as k,a8 as Se,ab as Ne,ao as ne,aa as qe,Q as Oe,ae as Le,E as A,aj as je,au as te,T as c,a3 as Qe,O as $e,U as T,aC as f,ax as d,ak as Me}from"./index-BQqINSog.js";import{Q as Ee,u as Ge}from"./dark-mode-DghqNWqv.js";import{L as Ve}from"./ListQTable-BpmEZ14_.js";import{u as We,s as Ze}from"./pinia-C5QXsjNG.js";import{u as _e}from"./use-quasar-B7hMkyWz.js";import{P as Ue}from"./ProjectProcess-GrEjE0PK.js";import{A as ze}from"./AdminImplementationType-DS8GBSlP.js";import{A as Fe}from"./AdminImplementationGuideline-BN4LMoud.js";import{A as Ye}from"./AdminImplementationTask-DFIvYyGd.js";import{A as Ke}from"./AdminRequirement-CfZY_yT7.js";import{O as He}from"./Introspection-C8h35WYU.js";import"./use-key-composition-DtH4YFMw.js";import"./index-DNzQhVUM.js";import"./parser-DuPc8scl.js";import"./QSelect-D_RJjQ5R.js";import"./QChip-xjV-pAmj.js";import"./QItemLabel-qyVivjvh.js";import"./QDialog-DPL0UueO.js";import"./QToggle-C2iDUUqu.js";import"./QMarkupTable-qldzP-iJ.js";import"./ClosePopup-CQGLdLf8.js";import"./QPagination-D9l2aqNt.js";import"./QCard-DUnYgpNY.js";import"./QSkeleton-DEb6GhJn.js";import"./QSeparator-C33Q4o5C.js";const Je=De({name:"ImplementationTypes",components:{ListQTable:Ve},setup(){const s=A(()=>Ge().darkmode),m=We(Ze),R=A(()=>m.implementationID);function B(e){m.setImplementationID(e)}function S(){m.setAdminSearch(!0)}function N(){m.setSowID(null)}const l=je(),n=te({totalPages:15,page:1,searchLoading:!0,search:"",isRecurring:!1,projectProcessID:null,sortByModel:"",category:""}),q=c({currentPage:1,perPage:15}),a=te([{name:"name",align:"left",label:"Name",field:e=>e.Name?e.Name:e.SkillName,format:e=>`${e}`,sortable:!0},{name:"status",label:"Status",align:"center",field:e=>e.IsDeprecated?"Deprecated":e.isDraft?"Draft":"Active",sortable:!0},{name:"actions",label:"Actions",align:"center"}]),oe={name:"name",align:"left",label:"Name",field:e=>e.Name?e.Name:e.SkillName,format:e=>`${e}`,sortable:!0},se={name:"status",label:"Status",align:"center",field:e=>e.IsDeprecated?"Deprecated":e.isDraft?"Draft":"Active",sortable:!0},le={name:"actions",label:"Actions",align:"center"},O={name:"includeByDefault",required:!0,label:"Include by Default",align:"center",field:e=>e.IncludeByDefault?"Yes":"No",format:e=>`${e}`,sortable:!0},L={name:"description",required:!0,label:"Description",align:"left",field:e=>e.Description?e.Description:"N/A",format:e=>`${e}`,sortable:!0},j={name:"isRecurring",required:!0,label:"Is Recurring",align:"center",field:e=>e.IsRecurring?"Yes":"No",format:e=>`${e}`},Q={name:"isCustomer",required:!0,label:"Customer Task",align:"center",field:e=>e.isCustomerTask?"Yes":"No",format:e=>`${e}`,sortable:!0},$={name:"projectProcess",required:!0,label:"Project Process",align:"left",field:e=>e.ProjectProcessName,format:e=>`${e}`},P={name:"category",required:!0,label:"Category",align:"center",field:e=>e.ImplementationCategory,format:e=>`${e}`,sortable:!0},M={name:"sowCount",label:"Sow Count",align:"center",field:e=>e.sow_count??"---",sortable:!0};function E(){let e=l.path.split("/")[1];a.splice(0,a.length),setTimeout(()=>{switch(i.value>600&&e!=="requirements"&&a.splice(1,0,se),e){case"implementation-types":i.value>600?(a.splice(2,0,M),a.splice(2,0,P)):(a.splice(a.length-1,0,P),a.splice(a.length-1,0,M));break;case"implementation-guidelines":i.value>600&&a.splice(a.length-1,0,O);break;case"requirements":i.value>600&&a.splice(a.length-1,0,L);break;case"implementation-tasks":i.value>730&&a.splice(a.length-1,0,j),i.value>640&&a.splice(a.length-1,0,Q),i.value>400&&a.splice(a.length-1,0,$);break;default:console.log("no columns were updated")}if(a.splice(0,0,oe),a.splice(a.length,0,le),i.value<=600){const t=a.findIndex(o=>o.name==="id");t!==-1&&a.splice(t,1)}else!a.find(o=>o.name==="id")&&e!=="requirements"&&a.splice(0,0,{name:"id",label:"ID",field:o=>o._id,format:o=>`${o}`})},10)}Qe(()=>{E(),x(),X()});const i=$e("windowWidth");T(()=>i.value,()=>{let e=l.path.split("/")[1];switch(setTimeout(()=>{if(i.value<=600){const t=a.findIndex(o=>o.name==="id");t!==-1&&a.splice(t,1)}else!a.find(o=>o.name==="id")&&e!=="requirements"&&a.splice(0,0,{name:"id",label:"ID",field:o=>o._id,format:o=>`${o}`})},100),e){case"implementation-types":if(i.value>600)a.find(t=>t.name==="category")||a.splice(2,0,P);else{const t=a.findIndex(o=>o.name==="category");t!==-1&&a.splice(t,1)}break;case"implementation-guidelines":if(i.value<600){const t=a.findIndex(o=>o.name==="includeByDefault");t!==-1&&a.splice(t,1)}else a.find(t=>t.name==="includeByDefault")||a.splice(a.length-1,0,O);break;case"requirements":if(i.value>700)a.find(t=>t.name==="description")||a.splice(a.length-1,0,L);else{const t=a.findIndex(o=>o.name==="description");t!==-1&&a.splice(t,1)}break;case"implementation-tasks":if(i.value>730)a.find(t=>t.name==="isRecurring")||a.splice(a.length-1,0,j);else{const t=a.findIndex(o=>o.name==="isRecurring");t!==-1&&a.splice(t,1)}if(i.value>640)a.find(t=>t.name==="isCustomer")||a.splice(a.length-1,0,Q);else{const t=a.findIndex(o=>o.name==="isCustomer");t!==-1&&a.splice(t,1)}if(i.value>400)a.find(t=>t.name==="projectProcess")||a.splice(a.length-1,0,$);else{const t=a.findIndex(o=>o.name==="projectProcess");t!==-1&&a.splice(t,1)}break;default:console.log("no columns were updated")}},{immediate:!0});const D=c([]),u=c([]),{result:g,load:ie,loading:C,error:G}=f(ze,()=>({page:n.page,Name:n.search,orderBy:u.value,first:15,ImplementationCategory:n.category}));d(()=>{l.name==="ImplementationTypes"&&(G.value&&console.log(G.value),C.value&&(console.log(C.value,"loading imples"),n.searchLoading=C.value),g.value&&(n.searchLoading=!1,D.value=g.value.AdminImplementationTypes.data,n.totalPages=g.value.AdminImplementationTypes.paginatorInfo.lastPage))}),T(()=>n.search,()=>{n.searchLoading=!0,setTimeout(()=>{J.value.length===0&&(n.searchLoading=!1)},5e3)});function re(e){console.log("Set Page value",e),n.page=e}function me(){switch(console.log("setStateMaxPage route",l.name),l.name){case"ImplementationTypes":g.value&&(n.totalPages=g.value.AdminImplementationTypes.paginatorInfo.lastPage);break;case"ImplementationGuidelines":I.value&&(n.totalPages=I.value.AdminImplementationGuidelines.paginatorInfo.lastPage);break;case"ImplementationTasks":y.value&&(n.totalPages=y.value.AdminImplementationTasks.paginatorInfo.lastPage);break;case"Requirements":v.value&&(n.totalPages=v.value.AdminRequirements.paginatorInfo.lastPage);break}}const V=_e();function ue(e){V.loading.show({delay:100,message:e,spinnerSize:100,spinnerColor:"primary",messageColor:"white",backgroundColor:"primary"})}const ce=Me(),de=(e,t,o)=>{function b(Ae,Te,w){console.log("open",o),o.ctrlKey||o.button===1||o==="openNewTab"?window.open(w+`${e}`,"_blank"):o==="openNewWindow"?window.open(w+`${e}`,"_blank","width=full,height=full"):o==="openIncognitoWindow"?window.open(w+`${e}`,"_blank","incognito=yes"):o.button!==2&&(ue(Te),setTimeout(()=>{V.loading.hide()},990),setTimeout(()=>{ce.push({name:Ae,params:{id:e}})},1e3))}S(),l.name==="ImplementationTypes"?b("ImplementationDetails","Loading Implementation Type...","implementation-type/detail/"):l.name==="ImplementationGuidelines"?b("GuidelineDetails","Loading Implementation Guideline...","implementation-type/guideline/"):l.name==="ImplementationTasks"?b("ImplementationTaskDetails","Loading Implementation Task...","implementation-type/task/"):l.name==="Requirements"&&(N(),b("ImplementationRequirementDetails","Loading Requirement...","implementation-type/requirement/"))};function pe(e,t){n.search=t}const W=c([]),Z=c([]),_=c([]),{result:I,load:fe,loading:U}=f(Fe,()=>({page:n.page,Name:n.search,first:15,orderBy:u.value}));d(()=>{l.name==="ImplementationGuidelines"&&(U.value&&(n.searchLoading=U.value),I.value&&(n.searchLoading=!1,W.value=I.value.AdminImplementationGuidelines.data,n.totalPages=I.value.AdminImplementationGuidelines.paginatorInfo.lastPage))});const{result:z,load:ge}=f(Ue,()=>({first:20})),F=c([]);d(()=>{z.value&&(F.value=z.value.ProjectProcesses.data)});const{result:y,load:Ie,loading:Y}=f(Ye,()=>({page:n.page,Name:n.search,orderBy:u.value,IsRecurring:n.isRecurring,first:15,project_process_id:n.projectProcessID}));d(()=>{l.name==="ImplementationTasks"&&(Y.value&&(n.searchLoading=Y.value),y.value&&(n.searchLoading=!1,_.value=y.value.AdminImplementationTasks.data.map(e=>({...e,ProjectProcessName:e.ProjectProcess&&e.ProjectProcess.Name})),n.totalPages=y.value.AdminImplementationTasks.paginatorInfo.lastPage))});const{result:v,error:K,load:ye,loading:H}=f(Ke,()=>({page:n.page,Name:n.search,orderBy:u.value,first:15}));d(()=>{l.name==="Requirements"&&(K.value&&console.log(K.value),H.value&&(n.searchLoading=H.value),v.value&&(n.searchLoading=!1,Z.value=v.value.AdminRequirements.data,n.totalPages=v.value.AdminRequirements.paginatorInfo.lastPage))});const J=A(()=>l.name==="ImplementationTypes"?D.value:l.name==="ImplementationGuidelines"?W.value:l.name==="ImplementationTasks"?_.value:l.name==="Requirements"?Z.value:[]);function X(){l.name==="ImplementationTypes"?ie():l.name==="ImplementationGuidelines"?fe():l.name==="ImplementationTasks"?(Ie(),ge()):l.name==="Requirements"&&ye(),ve()}T(()=>l.name,()=>{console.log("Route changed",l.name),x(),X(),E(),me(),u.value=[],n.sortByModel=null,q.value.currentPage=1,n.page=1});const h=c(null);function x(){switch(l.name){case"ImplementationTypes":h.value="QueryAdminImplementationTypesOrderByColumn";break;case"ImplementationGuidelines":h.value="QueryAdminImplementationGuidelinesOrderByColumn";break;case"ImplementationTasks":h.value="QueryAdminImplementationTasksOrderByColumn";break;case"Requirements":h.value="QueryAdminRequirementsOrderByColumn";break}}const{result:p,load:ve,error:ee}=f(He,()=>({name:h.value}));d(()=>{ee.value&&console.log(ee.value,"Error")}),d(()=>{if(p.value){r.value=["---"];for(const e in p.value.__type.enumValues)p.value.__type.enumValues[e].name=="CREATED_AT"||p.value.__type.enumValues[e].name=="UPDATED_AT"?r.value.includes("Most Recent")==!1&&r.value.push("Most Recent"):p.value.__type.enumValues[e].name=="NAME"?(r.value.includes("Alphabetical A -> Z")==!1&&r.value.push("Alphabetical A -> Z"),r.value.includes("Alphabetical Z -> A")==!1&&r.value.push("Alphabetical Z -> A")):p.value.__type.enumValues[e].name=="SOW_COUNT"&&(r.value.includes("Sow Count Ascending")==!1&&r.value.push("Sow Count Ascending"),r.value.includes("Sow Count Descending")==!1&&r.value.push("Sow Count Descending"))}});const r=c(["---"]),he=A(()=>l.name.substring(0,l.name.length-1).replace(/([a-z])([A-Z])/g,"$1 $2")),Ce=[];function be(e,t){console.log(e,t,"type and value update fields"),e==="ProjectProcess"?n.projectProcessID=t:e==="Recurring"?t==="One-Time Only"?n.isRecurring=!1:n.isRecurring=!0:e==="SortBy"?n.sortByModel=t:e==="ImplementationCategory"&&(n.category=t.name)}T(()=>n.sortByModel,()=>{n.sortByModel==="---"?u.value=[]:n.sortByModel==="Most Recent"?u.value=[{column:"CREATED_AT",order:"DESC"},{column:"UPDATED_AT",order:"DESC"}]:n.sortByModel==="Alphabetical A -> Z"?u.value=[{column:"NAME",order:"ASC"}]:n.sortByModel==="Alphabetical Z -> A"?u.value=[{column:"NAME",order:"DESC"}]:n.sortByModel==="Sow Count Ascending"?u.value=[{column:"SOW_COUNT",order:"ASC"}]:n.sortByModel==="Sow Count Descending"&&(u.value=[{column:"SOW_COUNT",order:"DESC"}])});const ke=c([{name:"AIS Labs",id:1},{name:"Consulting",id:2},{name:"Managed Services",id:3}]);return{state:n,columns:a,implementations:D,pagination:q,setPage:re,handleRowClick:de,setImplementationSearch:pe,setImplementationRouteID:B,implementationRouteID:R,route:l,componentType:J,componentName:he,filterOptions:Ce,updateFields:be,projectProcesses:F,darkmode:s,loadingImplementationTypes:C,sortByOptions:r,implementationCategories:ke}}}),Xe={class:"q-mx-lg mb-10"},xe={class:"flex relative mb-[-1.5rem] sm:mb-[-.5rem]"};function ea(s,m,R,B,S,N){const l=we("ListQTable");return ae(),Re("div",Xe,[Be("div",xe,[k(ne,{color:"primary",label:"Create "+s.componentName,"no-caps":"",class:"w-full sm:w-auto","icon-right":"arrow_forward",to:"/"+s.route.path.substring(1,s.route.path.length-1)+"/create",onClick:m[0]||(m[0]=()=>{s.setImplementationRouteID(null),s.$router.push("/"+s.route.path.substring(1,s.route.path.length-1)+"/create")})},null,8,["label","to"]),s.route.name==="ImplementationTypes"?(ae(),Se(ne,{key:0,color:"blue-grey-7",label:"Builder",glossy:"","no-caps":"",class:"w-full sm:w-auto ml-10","icon-right":"add",to:"/implementation-builder"})):Ne("",!0),k(Ee,{modelValue:s.state.search,"onUpdate:modelValue":m[2]||(m[2]=n=>s.state.search=n),dense:!0,filled:"",dark:s.darkmode,class:Le([s.darkmode?"bg-[#202a46]":"","implementation-search mt-3 sm:mt-0 sm:absolute sm:right-0 w-full sm:w-[300px]"]),label:"Search "+s.componentName+"s",color:s.darkmode?"blue-5":"primary"},{append:qe(()=>[k(Oe,{name:s.state.search===""?"search":"close",class:"cursor-pointer",onClick:m[1]||(m[1]=n=>s.state.search="")},null,8,["name"])]),_:1},8,["modelValue","dark","class","label","color"])]),k(l,{title:s.componentName+"s",rows:s.componentType,columns:s.columns,handleRowClick:s.handleRowClick,filterOptions:s.filterOptions,stateValue:s.state,setPage:s.setPage,loading:s.state.searchLoading,updateFields:s.updateFields,searchableQuery:s.projectProcesses,sortByOptions:s.sortByOptions,dropdownList:s.implementationCategories},null,8,["title","rows","columns","handleRowClick","filterOptions","stateValue","setPage","loading","updateFields","searchableQuery","sortByOptions","dropdownList"])])}const Da=Pe(Je,[["render",ea]]);export{Da as default};
