import{p as te}from"./parser-DuPc8scl.js";import{p as re,ct as C,r as se}from"./index-BQqINSog.js";function ne(r,s){for(var o=0;o<s.length;o++){const n=s[o];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in r)){const h=Object.getOwnPropertyDescriptor(n,a);h&&Object.defineProperty(r,a,h.get?h:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}const I=JSON,oe=r=>r.toUpperCase(),ie=r=>{const s={};return r.forEach((o,n)=>{s[n]=o}),s},ae=(r,s,o)=>r.document?r:{document:r,variables:s,requestHeaders:o,signal:void 0},fe=(r,s,o)=>r.query?r:{query:r,variables:s,requestHeaders:o,signal:void 0},ue=(r,s)=>r.documents?r:{documents:r,requestHeaders:s,signal:void 0},ce=(r,s,...o)=>{const[n,a]=o;return r.document?r:{url:r,document:s,variables:n,requestHeaders:a,signal:void 0}},k=r=>{let s;const o=r.definitions.filter(n=>n.kind==="OperationDefinition");return o.length===1&&(s=o[0]?.name?.value),s},M=r=>{if(typeof r=="string"){let o;try{const n=te(r);o=k(n)}catch{}return{query:r,operationName:o}}const s=k(r);return{query:re(r),operationName:s}};class O extends Error{constructor(s,o){const n=`${O.extractMessage(s)}: ${JSON.stringify({response:s,request:o})}`;super(n),Object.setPrototypeOf(this,O.prototype),this.response=s,this.request=o,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,O)}static extractMessage(s){return s.errors?.[0]?.message??`GraphQL Error (Code: ${s.status})`}}var j={exports:{}},G;function le(){return G||(G=1,(function(r,s){var o=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof C<"u"&&C,n=(function(){function h(){this.fetch=!1,this.DOMException=o.DOMException}return h.prototype=o,new h})();(function(h){(function(l){var i=typeof h<"u"&&h||typeof self<"u"&&self||typeof C<"u"&&C||{},u={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function E(e){return e&&DataView.prototype.isPrototypeOf(e)}if(u.arrayBuffer)var w=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=ArrayBuffer.isView||function(e){return e&&w.indexOf(Object.prototype.toString.call(e))>-1};function b(e){if(typeof e!="string"&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||e==="")throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function m(e){return typeof e!="string"&&(e=String(e)),e}function _(e){var t={next:function(){var f=e.shift();return{done:f===void 0,value:f}}};return u.iterable&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(t,f){this.append(f,t)},this):Array.isArray(e)?e.forEach(function(t){if(t.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+t.length);this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}d.prototype.append=function(e,t){e=b(e),t=m(t);var f=this.map[e];this.map[e]=f?f+", "+t:t},d.prototype.delete=function(e){delete this.map[b(e)]},d.prototype.get=function(e){return e=b(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(b(e))},d.prototype.set=function(e,t){this.map[b(e)]=m(t)},d.prototype.forEach=function(e,t){for(var f in this.map)this.map.hasOwnProperty(f)&&e.call(t,this.map[f],f,this)},d.prototype.keys=function(){var e=[];return this.forEach(function(t,f){e.push(f)}),_(e)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),_(e)},d.prototype.entries=function(){var e=[];return this.forEach(function(t,f){e.push([f,t])}),_(e)},u.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function A(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}}function P(e){return new Promise(function(t,f){e.onload=function(){t(e.result)},e.onerror=function(){f(e.error)}})}function J(e){var t=new FileReader,f=P(t);return t.readAsArrayBuffer(e),f}function Q(e){var t=new FileReader,f=P(t),y=/charset=([A-Za-z0-9_-]+)/.exec(e.type),p=y?y[1]:"utf-8";return t.readAsText(e,p),f}function W(e){for(var t=new Uint8Array(e),f=new Array(t.length),y=0;y<t.length;y++)f[y]=String.fromCharCode(t[y]);return f.join("")}function L(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function z(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?typeof e=="string"?this._bodyText=e:u.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:u.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():u.arrayBuffer&&u.blob&&E(e)?(this._bodyArrayBuffer=L(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||v(e))?this._bodyArrayBuffer=L(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof e=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var e=A(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=A(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(u.blob)return this.blob().then(J);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var e=A(this);if(e)return e;if(this._bodyBlob)return Q(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(W(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(K)}),this.json=function(){return this.text().then(JSON.parse)},this}var X=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function Z(e){var t=e.toUpperCase();return X.indexOf(t)>-1?t:e}function T(e,t){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{};var f=t.body;if(e instanceof T){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,!f&&e._bodyInit!=null&&(f=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new d(t.headers)),this.method=Z(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||(function(){if("AbortController"in i){var c=new AbortController;return c.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&f)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(f),(this.method==="GET"||this.method==="HEAD")&&(t.cache==="no-store"||t.cache==="no-cache")){var y=/([?&])_=[^&]*/;if(y.test(this.url))this.url=this.url.replace(y,"$1_="+new Date().getTime());else{var p=/\?/;this.url+=(p.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function K(e){var t=new FormData;return e.trim().split("&").forEach(function(f){if(f){var y=f.split("="),p=y.shift().replace(/\+/g," "),c=y.join("=").replace(/\+/g," ");t.append(decodeURIComponent(p),decodeURIComponent(c))}}),t}function Y(e){var t=new d,f=e.replace(/\r?\n[\t ]+/g," ");return f.split("\r").map(function(y){return y.indexOf(`
`)===0?y.substr(1,y.length):y}).forEach(function(y){var p=y.split(":"),c=p.shift().trim();if(c){var x=p.join(":").trim();try{t.append(c,x)}catch(U){console.warn("Response "+U.message)}}}),t}z.call(T.prototype);function q(e,t){if(!(this instanceof q))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=t.status===void 0?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText===void 0?"":""+t.statusText,this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}z.call(q.prototype),q.prototype.clone=function(){return new q(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},q.error=function(){var e=new q(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var ee=[301,302,303,307,308];q.redirect=function(e,t){if(ee.indexOf(t)===-1)throw new RangeError("Invalid status code");return new q(null,{status:t,headers:{location:e}})},l.DOMException=i.DOMException;try{new l.DOMException}catch{l.DOMException=function(t,f){this.message=t,this.name=f;var y=Error(t);this.stack=y.stack},l.DOMException.prototype=Object.create(Error.prototype),l.DOMException.prototype.constructor=l.DOMException}function S(e,t){return new Promise(function(f,y){var p=new T(e,t);if(p.signal&&p.signal.aborted)return y(new l.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function x(){c.abort()}c.onload=function(){var g={statusText:c.statusText,headers:Y(c.getAllResponseHeaders()||"")};p.url.indexOf("file://")===0&&(c.status<200||c.status>599)?g.status=200:g.status=c.status,g.url="responseURL"in c?c.responseURL:g.headers.get("X-Request-URL");var B="response"in c?c.response:c.responseText;setTimeout(function(){f(new q(B,g))},0)},c.onerror=function(){setTimeout(function(){y(new TypeError("Network request failed"))},0)},c.ontimeout=function(){setTimeout(function(){y(new TypeError("Network request timed out"))},0)},c.onabort=function(){setTimeout(function(){y(new l.DOMException("Aborted","AbortError"))},0)};function U(g){try{return g===""&&i.location.href?i.location.href:g}catch{return g}}if(c.open(p.method,U(p.url),!0),p.credentials==="include"?c.withCredentials=!0:p.credentials==="omit"&&(c.withCredentials=!1),"responseType"in c&&(u.blob?c.responseType="blob":u.arrayBuffer&&(c.responseType="arraybuffer")),t&&typeof t.headers=="object"&&!(t.headers instanceof d||i.Headers&&t.headers instanceof i.Headers)){var $=[];Object.getOwnPropertyNames(t.headers).forEach(function(g){$.push(b(g)),c.setRequestHeader(g,m(t.headers[g]))}),p.headers.forEach(function(g,B){$.indexOf(B)===-1&&c.setRequestHeader(B,g)})}else p.headers.forEach(function(g,B){c.setRequestHeader(B,g)});p.signal&&(p.signal.addEventListener("abort",x),c.onreadystatechange=function(){c.readyState===4&&p.signal.removeEventListener("abort",x)}),c.send(typeof p._bodyInit>"u"?null:p._bodyInit)})}return S.polyfill=!0,i.fetch||(i.fetch=S,i.Headers=d,i.Request=T,i.Response=q),l.Headers=d,l.Request=T,l.Response=q,l.fetch=S,Object.defineProperty(l,"__esModule",{value:!0}),l})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var a=o.fetch?o:n;s=a.fetch,s.default=a.fetch,s.fetch=a.fetch,s.Headers=a.Headers,s.Request=a.Request,s.Response=a.Response,r.exports=s})(j,j.exports)),j.exports}var H=le();const D=se(H),he=ne({__proto__:null,default:D},[H]),R=r=>{let s={};return r&&(typeof Headers<"u"&&r instanceof Headers||he&&H.Headers&&r instanceof H.Headers?s=ie(r):Array.isArray(r)?r.forEach(([o,n])=>{o&&n!==void 0&&(s[o]=n)}):s=r),s},V=r=>r.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),de=r=>{if(!Array.isArray(r.query)){const n=r,a=[`query=${encodeURIComponent(V(n.query))}`];return r.variables&&a.push(`variables=${encodeURIComponent(n.jsonSerializer.stringify(n.variables))}`),n.operationName&&a.push(`operationName=${encodeURIComponent(n.operationName)}`),a.join("&")}if(typeof r.variables<"u"&&!Array.isArray(r.variables))throw new Error("Cannot create query with given variable type, array expected");const s=r,o=r.query.reduce((n,a,h)=>(n.push({query:V(a),variables:s.variables?s.jsonSerializer.stringify(s.variables[h]):void 0}),n),[]);return`query=${encodeURIComponent(s.jsonSerializer.stringify(o))}`},ye=r=>async s=>{const{url:o,query:n,variables:a,operationName:h,fetch:l,fetchOptions:i,middleware:u}=s,E={...s.headers};let w="",v;r==="POST"?(v=be(n,a,h,i.jsonSerializer),typeof v=="string"&&(E["Content-Type"]="application/json")):w=de({query:n,variables:a,operationName:h,jsonSerializer:i.jsonSerializer??I});const b={method:r,headers:E,body:v,...i};let m=o,_=b;if(u){const d=await Promise.resolve(u({...b,url:o,operationName:h,variables:a})),{url:A,...P}=d;m=A,_=P}return w&&(m=`${m}?${w}`),await l(m,_)};class pe{constructor(s,o={}){this.url=s,this.requestConfig=o,this.rawRequest=async(...n)=>{const[a,h,l]=n,i=fe(a,h,l),{headers:u,fetch:E=D,method:w="POST",requestMiddleware:v,responseMiddleware:b,...m}=this.requestConfig,{url:_}=this;i.signal!==void 0&&(m.signal=i.signal);const{operationName:d}=M(i.query);return N({url:_,query:i.query,variables:i.variables,headers:{...R(F(u)),...R(i.requestHeaders)},operationName:d,fetch:E,method:w,fetchOptions:m,middleware:v}).then(A=>(b&&b(A),A)).catch(A=>{throw b&&b(A),A})}}async request(s,...o){const[n,a]=o,h=ae(s,n,a),{headers:l,fetch:i=D,method:u="POST",requestMiddleware:E,responseMiddleware:w,...v}=this.requestConfig,{url:b}=this;h.signal!==void 0&&(v.signal=h.signal);const{query:m,operationName:_}=M(h.document);return N({url:b,query:m,variables:h.variables,headers:{...R(F(l)),...R(h.requestHeaders)},operationName:_,fetch:i,method:u,fetchOptions:v,middleware:E}).then(d=>(w&&w(d),d.data)).catch(d=>{throw w&&w(d),d})}batchRequests(s,o){const n=ue(s,o),{headers:a,...h}=this.requestConfig;n.signal!==void 0&&(h.signal=n.signal);const l=n.documents.map(({document:u})=>M(u).query),i=n.documents.map(({variables:u})=>u);return N({url:this.url,query:l,variables:i,headers:{...R(F(a)),...R(n.requestHeaders)},operationName:void 0,fetch:this.requestConfig.fetch??D,method:this.requestConfig.method||"POST",fetchOptions:h,middleware:this.requestConfig.requestMiddleware}).then(u=>(this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(u),u.data)).catch(u=>{throw this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(u),u})}setHeaders(s){return this.requestConfig.headers=s,this}setHeader(s,o){const{headers:n}=this.requestConfig;return n?n[s]=o:this.requestConfig.headers={[s]:o},this}setEndpoint(s){return this.url=s,this}}const N=async r=>{const{query:s,variables:o,fetchOptions:n}=r,a=ye(oe(r.method??"post")),h=Array.isArray(r.query),l=await a(r),i=await we(l,n.jsonSerializer??I),u=Array.isArray(i)?!i.some(({data:w})=>!w):!!i.data,E=Array.isArray(i)||!i.errors||Array.isArray(i.errors)&&!i.errors.length||n.errorPolicy==="all"||n.errorPolicy==="ignore";if(l.ok&&E&&u){const{errors:w,...v}=(Array.isArray(i),i),b=n.errorPolicy==="ignore"?v:i;return{...h?{data:b}:b,headers:l.headers,status:l.status}}else{const w=typeof i=="string"?{error:i}:i;throw new O({...w,status:l.status,headers:l.headers},{query:s,variables:o})}};async function ve(r,s,...o){const n=ce(r,s,...o);return new pe(n.url).request({...n})}const be=(r,s,o,n)=>{const a=n??I;if(!Array.isArray(r))return a.stringify({query:r,variables:s,operationName:o});if(typeof s<"u"&&!Array.isArray(s))throw new Error("Cannot create request body with given variable type, array expected");const h=r.reduce((l,i,u)=>(l.push({query:i,variables:s?s[u]:void 0}),l),[]);return a.stringify(h)},we=async(r,s)=>{let o;return r.headers.forEach((n,a)=>{a.toLowerCase()==="content-type"&&(o=n)}),o&&(o.toLowerCase().startsWith("application/json")||o.toLowerCase().startsWith("application/graphql+json")||o.toLowerCase().startsWith("application/graphql-response+json"))?s.parse(await r.text()):r.text()},F=r=>typeof r=="function"?r():r,Ae=(r,...s)=>r.reduce((o,n,a)=>`${o}${n}${a in s?String(s[a]):""}`,"");export{pe as G,Ae as g,ve as r};
