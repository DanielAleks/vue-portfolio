import{a6 as N,a7 as S,a8 as p,a9 as i,aa as l,ac as r,an as B,ae as T,af as s,ao as u,ag as m,am as I,ab as f,aR as Q,ah as C,az as A,aj as $,E as c,au as D,a3 as V}from"./index-pp-zxjmJ.js";import{Q as b}from"./QCardSection-CGtarS5O.js";import{Q as H}from"./QCard-B8NG_d02.js";import{Q as R}from"./QDialog-Fsjl9-tV.js";import{u as q}from"./dark-mode-T9Pt6Rb6.js";const O=S({name:"BasicAttachModal",props:{title:{type:String,default:""},width:{type:String,default:"30rem"},cardAddMode:{type:String,default:""},showComponentModal:{type:Boolean,default:!1},setComponentModal:{type:Function,default:()=>{}},pushNewResponseData:{type:Function,default:()=>{}},fetchRequirements:{type:Function,default:()=>{}},taskName:{type:String,default:""},createOnly:{type:Boolean,default:!1},saveComponent:{type:Function,default:()=>{}},selectedComponentID:{type:[Number,String],default:null},createNewHref:{type:String,default:null},showHeaderDescription:{type:Boolean,default:!0},saveButtonText:{type:String,default:""},saveButtonTooltip:{type:String,default:""}},setup(e){const t=$(),y=c(()=>parseInt(t.params.id)),w=c(()=>q().darkmode),a=D({name:"",description:"",componentId:null,showModal:!1,discoveryQuestion:"",responseType:"Boolean",isCreateNew:!1,componentSearch:"",isMenuOpen:!1,page:1,showSpinner:!1,previousRequirementIds:[]}),h=c(()=>e.selectedComponentID===null);V(()=>{a.showModal=!0});function n(o,d){e.saveComponent(),setTimeout(()=>{d!=="another"&&(a.showModal=!1,e.setComponentModal(!1))},1e3),d==="another"?document.body.style.cursor="wait":setTimeout(()=>{e.setComponentModal(!1),a.showModal=!1,document.body.style.cursor="wait"},1e3),setTimeout(()=>{document.body.style.cursor="default"},1001)}function g(){a.isCreateNew=!0,a.isMenuOpen=!1}function v(o){a.componentId=o._id,a.name=o.detail,a.componentSearch=o.detail,a.isMenuOpen=!1,a.isCreateNew=!1}const M=async(o,d)=>{o===a.page&&(a.page++,setTimeout(()=>{d()},500))};function k(o){o!=="close"&&(a.name=o,a.componentId=o.id)}return{loadQuery:M,state:a,createSowComponent:n,setCreateNew:g,disableCreate:h,setComponentValue:v,sow_id:y,setRequirementId:k,darkmode:w}}}),F={class:"text-xl mt-0 mb-1 text-center"},z={style:{"overflow-y":"hidden"}},E={style:{width:"100%","overflow-y":"hidden"}},j={class:"flex flex-col justify-end mr-3",style:{"overflow-y":"hidden"}},U={key:0,class:"mb-3"},G={style:{position:"absolute",right:"0px",bottom:"1rem"}};function J(e,t,y,w,a,h){return i(),p(R,{modelValue:e.state.showModal,"onUpdate:modelValue":t[3]||(t[3]=n=>e.state.showModal=n),onHide:t[4]||(t[4]=n=>e.setComponentModal(!1))},{default:l(()=>[r(H,{class:T(["px-4 intro-y box",e.darkmode?"bg-[#28334E] text-slate-300":"bg-white"]),style:B([{"overflow-y":"hidden"},e.width===""?"":"width: "+e.width])},{default:l(()=>[r(b,{class:"col flex flex-col mb-0 pb-0",style:{"overflow-y":"hidden"}},{default:l(()=>[r(u,{icon:"close",color:"blue-grey",class:"absolute right-3 top-2",flat:"","cy-data":"close-modal",onClick:t[0]||(t[0]=n=>e.state.showModal=!1)}),s("p",F,m(e.showHeaderDescription?e.state.createNew?"Create":"Attach":null)+" "+m(e.title),1),t[5]||(t[5]=s("hr",{style:{width:"100%"},class:"dark:border-slate-500"},null,-1))]),_:1}),r(b,{class:"items-center p-0"},{default:l(()=>[s("div",z,[s("div",E,[s("div",j,[e.createOnly?f("",!0):(i(),I("p",U,[t[6]||(t[6]=s("span",{class:"mr-2"},"Associated Task:",-1)),C(" "+m(e.taskName),1)])),Q(e.$slots,"default",{},void 0,!0)])]),t[7]||(t[7]=s("div",{class:"mt-14"},null,-1)),s("div",G,[r(u,{dense:"",class:"save-btn mr-8 font-regular","no-caps":"",flat:"",label:e.state.componentId||e.state.isCreateNew?"Add Another":"Cancel",color:e.darkmode?"grey-5":"grey-8",onClick:t[1]||(t[1]=n=>e.state.componentId||e.state.isCreateNew?e.createSowComponent(e.cardAddMode,"another"):e.state.showModal=!1)},null,8,["label","color"]),e.createNewHref!==null?(i(),p(u,{key:0,dense:"",class:"save-btn q-px-md",style:{"margin-right":"1.5rem","margin-left":"0rem"},"no-caps":"",icon:"add",label:"Create New",color:"blue-grey",href:e.createNewHref,target:"_blank"},null,8,["href"])):f("",!0),r(u,{dense:"",disable:e.disableCreate,class:"save-btn q-px-md",style:{"margin-right":"1.5rem","margin-left":"0rem"},"no-caps":"",label:e.saveButtonText!==""?e.saveButtonText:e.state.isCreateNew?"Create & Close":"Save & Close",color:"primary",onClick:t[2]||(t[2]=n=>e.createSowComponent(e.cardAddMode,"close"))},{default:l(()=>[e.saveButtonTooltip!==""?(i(),p(A,{key:0,class:"bg-white shadow-md text-black border text-sm"},{default:l(()=>[C(m(e.saveButtonTooltip),1)]),_:1})):f("",!0)]),_:1},8,["disable","label"])])])]),_:3})]),_:3},8,["class","style"])]),_:3},8,["modelValue"])}const Y=N(O,[["render",J],["__scopeId","data-v-0a51ba7e"]]);export{Y as B};
