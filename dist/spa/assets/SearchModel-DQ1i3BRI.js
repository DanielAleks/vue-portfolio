import{D as ee,F as M,a4 as de,bs as Ee,bt as ae,bp as X,bu as le,aV as qe,bv as Z,bw as fe,br as ve,bo as re,bx as Ae,by as De,aG as Be,Y as Le,T as v,N as Me,$ as Ne,E as g,bz as Te,U as P,bA as oe,aD as ke,aE as Oe,bB as G,V as Pe,J as Qe,bC as Re,bD as He,bE as Fe,bF as Ve,a3 as x,W as $e,G as je,bG as _,bH as ne,bI as he,a2 as me,bJ as Xe,a6 as Ke,a7 as Ye,a8 as V,a9 as k,aa as A,ab as K,ap as We,ac as Y,ae as Ue,an as se,am as N,aq as Ge,ar as Je,ai as Ze,ad as _e,ag as W,af as xe,Q as be,ao as et,aS as tt,au as at}from"./index-BQqINSog.js";import{Q as ye}from"./QResizeObserver-B36mQawI.js";import{Q as lt}from"./QScrollObserver-xUvOdZyD.js";import{g as ge,s as Se}from"./touch-BjYP5sR0.js";import{b as U}from"./use-key-composition-DtH4YFMw.js";import{Q as rt,C as ot}from"./ClosePopup-CQGLdLf8.js";import{Q as nt,u as st}from"./dark-mode-DghqNWqv.js";import{s as ut,o as ue,h as it,c as ct}from"./search-DxJQXblk.js";const dt=ee({props:["store","barStyle","verticalBarStyle","horizontalBarStyle"],setup(e){return()=>[M("div",{class:e.store.scroll.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:e.store.onVerticalMousedown}),M("div",{class:e.store.scroll.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:e.store.onHorizontalMousedown}),de(M("div",{ref:e.store.scroll.vertical.ref,class:e.store.scroll.vertical.thumbClass.value,style:e.store.scroll.vertical.style.value,"aria-hidden":"true"}),e.store.thumbVertDir),de(M("div",{ref:e.store.scroll.horizontal.ref,class:e.store.scroll.horizontal.thumbClass.value,style:e.store.scroll.horizontal.style.value,"aria-hidden":"true"}),e.store.thumbHorizDir)]}});function ie(e,a,c){const d=fe(e);let t,o=d.left-a.event.x,l=d.top-a.event.y,r=Math.abs(o),s=Math.abs(l);const u=a.direction;u.horizontal===!0&&u.vertical!==!0?t=o<0?"left":"right":u.horizontal!==!0&&u.vertical===!0?t=l<0?"up":"down":u.up===!0&&l<0?(t="up",r>s&&(u.left===!0&&o<0?t="left":u.right===!0&&o>0&&(t="right"))):u.down===!0&&l>0?(t="down",r>s&&(u.left===!0&&o<0?t="left":u.right===!0&&o>0&&(t="right"))):u.left===!0&&o<0?(t="left",r<s&&(u.up===!0&&l<0?t="up":u.down===!0&&l>0&&(t="down"))):u.right===!0&&o>0&&(t="right",r<s&&(u.up===!0&&l<0?t="up":u.down===!0&&l>0&&(t="down")));let p=!1;if(t===void 0&&c===!1){if(a.event.isFirst===!0||a.event.lastDir===void 0)return{};t=a.event.lastDir,p=!0,t==="left"||t==="right"?(d.left-=o,r=0,o=0):(d.top-=l,s=0,l=0)}return{synthetic:p,payload:{evt:e,touch:a.event.mouse!==!0,mouse:a.event.mouse===!0,position:d,direction:t,isFirst:a.event.isFirst,isFinal:c===!0,duration:Date.now()-a.event.time,distance:{x:r,y:s},offset:{x:o,y:l},delta:{x:d.left-a.event.lastX,y:d.top-a.event.lastY}}}}let ft=0;const pe=Ee({name:"touch-pan",beforeMount(e,{value:a,modifiers:c}){if(c.mouse!==!0&&X.has.touch!==!0)return;function d(o,l){c.mouse===!0&&l===!0?Be(o):(c.stop===!0&&re(o),c.prevent===!0&&ve(o))}const t={uid:"qvtp_"+ft++,handler:a,modifiers:c,direction:ge(c),noop:qe,mouseStart(o){Se(o,t)&&Ae(o)&&(Z(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(o,!0))},touchStart(o){if(Se(o,t)){const l=o.target;Z(t,"temp",[[l,"touchmove","move","notPassiveCapture"],[l,"touchcancel","end","passiveCapture"],[l,"touchend","end","passiveCapture"]]),t.start(o)}},start(o,l){if(X.is.firefox===!0&&le(e,!0),t.lastEvt=o,l===!0||c.stop===!0){if(t.direction.all!==!0&&(l!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const u=o.type.indexOf("mouse")!==-1?new MouseEvent(o.type,o):new TouchEvent(o.type,o);o.defaultPrevented===!0&&ve(u),o.cancelBubble===!0&&re(u),Object.assign(u,{qKeyEvent:o.qKeyEvent,qClickOutside:o.qClickOutside,qAnchorHandled:o.qAnchorHandled,qClonedBy:o.qClonedBy===void 0?[t.uid]:o.qClonedBy.concat(t.uid)}),t.initialEvent={target:o.target,event:u}}re(o)}const{left:r,top:s}=fe(o);t.event={x:r,y:s,time:Date.now(),mouse:l===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:r,lastY:s}},move(o){if(t.event===void 0)return;const l=fe(o),r=l.left-t.event.x,s=l.top-t.event.y;if(r===0&&s===0)return;t.lastEvt=o;const u=t.event.mouse===!0,p=()=>{d(o,u);let w;c.preserveCursor!==!0&&c.preservecursor!==!0&&(w=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),u===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),De(),t.styleCleanup=T=>{if(t.styleCleanup=void 0,w!==void 0&&(document.documentElement.style.cursor=w),document.body.classList.remove("non-selectable"),u===!0){const O=()=>{document.body.classList.remove("no-pointer-events--children")};T!==void 0?setTimeout(()=>{O(),T()},50):O()}else T!==void 0&&T()}};if(t.event.detected===!0){t.event.isFirst!==!0&&d(o,t.event.mouse);const{payload:w,synthetic:T}=ie(o,t,!1);w!==void 0&&(t.handler(w)===!1?t.end(o):(t.styleCleanup===void 0&&t.event.isFirst===!0&&p(),t.event.lastX=w.position.left,t.event.lastY=w.position.top,t.event.lastDir=T===!0?void 0:w.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||u===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){p(),t.event.detected=!0,t.move(o);return}const b=Math.abs(r),m=Math.abs(s);b!==m&&(t.direction.horizontal===!0&&b>m||t.direction.vertical===!0&&b<m||t.direction.up===!0&&b<m&&s<0||t.direction.down===!0&&b<m&&s>0||t.direction.left===!0&&b>m&&r<0||t.direction.right===!0&&b>m&&r>0?(t.event.detected=!0,t.move(o)):t.end(o,!0))},end(o,l){if(t.event!==void 0){if(ae(t,"temp"),X.is.firefox===!0&&le(e,!1),l===!0)t.styleCleanup?.(),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(ie(o===void 0?t.lastEvt:o,t).payload);const{payload:r}=ie(o===void 0?t.lastEvt:o,t,!0),s=()=>{t.handler(r)};t.styleCleanup!==void 0?t.styleCleanup(s):s()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(e.__qtouchpan=t,c.mouse===!0){const o=c.mouseCapture===!0||c.mousecapture===!0?"Capture":"";Z(t,"main",[[e,"mousedown","mouseStart",`passive${o}`]])}X.has.touch===!0&&Z(t,"main",[[e,"touchstart","touchStart",`passive${c.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const c=e.__qtouchpan;c!==void 0&&(a.oldValue!==a.value&&(typeof value!="function"&&c.end(),c.handler=a.value),c.direction=ge(a.modifiers))},beforeUnmount(e){const a=e.__qtouchpan;a!==void 0&&(a.event!==void 0&&a.end(),ae(a,"main"),ae(a,"temp"),X.is.firefox===!0&&le(e,!1),a.styleCleanup?.(),delete e.__qtouchpan)}}),ze=["vertical","horizontal"],ce={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},we={prevent:!0,mouse:!0,mouseAllDir:!0},Ce=e=>e>=250?50:Math.ceil(e/5),vt=ee({name:"QScrollArea",props:{...Le,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],verticalOffset:{type:Array,default:[0,0]},horizontalOffset:{type:Array,default:[0,0]},contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:a,emit:c}){const d=v(!1),t=v(!1),o=v(!1),l={vertical:v(0),horizontal:v(0)},r={vertical:{ref:v(null),position:v(0),size:v(0)},horizontal:{ref:v(null),position:v(0),size:v(0)}},{proxy:s}=Me(),u=Ne(e,s.$q);let p=null,b;const m=v(null),w=g(()=>"q-scrollarea"+(u.value===!0?" q-scrollarea--dark":""));Object.assign(l,{verticalInner:g(()=>l.vertical.value-e.verticalOffset[0]-e.verticalOffset[1]),horizontalInner:g(()=>l.horizontal.value-e.horizontalOffset[0]-e.horizontalOffset[1])}),r.vertical.percentage=g(()=>{const n=r.vertical.size.value-l.vertical.value;if(n<=0)return 0;const i=U(r.vertical.position.value/n,0,1);return Math.round(i*1e4)/1e4}),r.vertical.thumbHidden=g(()=>(e.visible===null?o.value:e.visible)!==!0&&d.value===!1&&t.value===!1||r.vertical.size.value<=l.vertical.value+1),r.vertical.thumbStart=g(()=>e.verticalOffset[0]+r.vertical.percentage.value*(l.verticalInner.value-r.vertical.thumbSize.value)),r.vertical.thumbSize=g(()=>Math.round(U(l.verticalInner.value*l.verticalInner.value/r.vertical.size.value,Ce(l.verticalInner.value),l.verticalInner.value))),r.vertical.style=g(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${r.vertical.thumbStart.value}px`,height:`${r.vertical.thumbSize.value}px`,right:`${e.horizontalOffset[1]}px`})),r.vertical.thumbClass=g(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(r.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),r.vertical.barClass=g(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(r.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),r.horizontal.percentage=g(()=>{const n=r.horizontal.size.value-l.horizontal.value;if(n<=0)return 0;const i=U(Math.abs(r.horizontal.position.value)/n,0,1);return Math.round(i*1e4)/1e4}),r.horizontal.thumbHidden=g(()=>(e.visible===null?o.value:e.visible)!==!0&&d.value===!1&&t.value===!1||r.horizontal.size.value<=l.horizontal.value+1),r.horizontal.thumbStart=g(()=>e.horizontalOffset[0]+r.horizontal.percentage.value*(l.horizontalInner.value-r.horizontal.thumbSize.value)),r.horizontal.thumbSize=g(()=>Math.round(U(l.horizontalInner.value*l.horizontalInner.value/r.horizontal.size.value,Ce(l.horizontalInner.value),l.horizontalInner.value))),r.horizontal.style=g(()=>({...e.thumbStyle,...e.horizontalThumbStyle,[s.$q.lang.rtl===!0?"right":"left"]:`${r.horizontal.thumbStart.value}px`,width:`${r.horizontal.thumbSize.value}px`,bottom:`${e.verticalOffset[1]}px`})),r.horizontal.thumbClass=g(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(r.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),r.horizontal.barClass=g(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(r.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const T=g(()=>r.vertical.thumbHidden.value===!0&&r.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle);function O(){const n={};return ze.forEach(i=>{const h=r[i];Object.assign(n,{[i+"Position"]:h.position.value,[i+"Percentage"]:h.percentage.value,[i+"Size"]:h.size.value,[i+"ContainerSize"]:l[i].value,[i+"ContainerInnerSize"]:l[i+"Inner"].value})}),n}const I=Te(()=>{const n=O();n.ref=s,c("scroll",n)},0);function R(n,i,h){if(ze.includes(n)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(n==="vertical"?G:oe)(m.value,i,h)}function D({height:n,width:i}){let h=!1;l.vertical.value!==n&&(l.vertical.value=n,h=!0),l.horizontal.value!==i&&(l.horizontal.value=i,h=!0),h===!0&&f()}function B({position:n}){let i=!1;r.vertical.position.value!==n.top&&(r.vertical.position.value=n.top,i=!0),r.horizontal.position.value!==n.left&&(r.horizontal.position.value=n.left,i=!0),i===!0&&f()}function L({height:n,width:i}){r.horizontal.size.value!==i&&(r.horizontal.size.value=i,f()),r.vertical.size.value!==n&&(r.vertical.size.value=n,f())}function E(n,i){const h=r[i];if(n.isFirst===!0){if(h.thumbHidden.value===!0)return;b=h.position.value,t.value=!0}else if(t.value!==!0)return;n.isFinal===!0&&(t.value=!1);const F=ce[i],j=(h.size.value-l[i].value)/(l[i+"Inner"].value-h.thumbSize.value),J=n.distance[F.dist],te=b+(n.direction===F.dir?1:-1)*J*j;z(te,i)}function H(n,i){const h=r[i];if(h.thumbHidden.value!==!0){const F=i==="vertical"?e.verticalOffset[0]:e.horizontalOffset[0],j=n[ce[i].offset]-F,J=h.thumbStart.value-F;if(j<J||j>J+h.thumbSize.value){const te=j-h.thumbSize.value/2,Ie=U(te/(l[i+"Inner"].value-h.thumbSize.value),0,1);z(Ie*Math.max(0,h.size.value-l[i].value),i)}h.ref.value!==null&&h.ref.value.dispatchEvent(new MouseEvent(n.type,n))}}function f(){d.value=!0,p!==null&&clearTimeout(p),p=setTimeout(()=>{p=null,d.value=!1},e.delay),e.onScroll!==void 0&&I()}function z(n,i){m.value[ce[i].scroll]=n}let C=null;function $(){C!==null&&clearTimeout(C),C=setTimeout(()=>{C=null,o.value=!0},s.$q.platform.is.ios?50:0)}function y(){C!==null&&(clearTimeout(C),C=null),o.value=!1}let S=null;P(()=>s.$q.lang.rtl,n=>{m.value!==null&&oe(m.value,Math.abs(r.horizontal.position.value)*(n===!0?-1:1))}),ke(()=>{S={top:r.vertical.position.value,left:r.horizontal.position.value}}),Oe(()=>{if(S===null)return;const n=m.value;n!==null&&(oe(n,S.left),G(n,S.top))}),Pe(I.cancel),Object.assign(s,{getScrollTarget:()=>m.value,getScroll:O,getScrollPosition:()=>({top:r.vertical.position.value,left:r.horizontal.position.value}),getScrollPercentage:()=>({top:r.vertical.percentage.value,left:r.horizontal.percentage.value}),setScrollPosition:R,setScrollPercentage(n,i,h){R(n,i*(r[n].size.value-l[n].value)*(n==="horizontal"&&s.$q.lang.rtl===!0?-1:1),h)}});const q={scroll:r,thumbVertDir:[[pe,n=>{E(n,"vertical")},void 0,{vertical:!0,...we}]],thumbHorizDir:[[pe,n=>{E(n,"horizontal")},void 0,{horizontal:!0,...we}]],onVerticalMousedown(n){H(n,"vertical")},onHorizontalMousedown(n){H(n,"horizontal")}};return()=>M("div",{class:w.value,onMouseenter:$,onMouseleave:y},[M("div",{ref:m,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[M("div",{class:"q-scrollarea__content absolute",style:T.value},Qe(a.default,[M(ye,{debounce:0,onResize:L})])),M(lt,{axis:"both",onScroll:B})]),M(ye,{debounce:0,onResize:D}),M(dt,{store:q,barStyle:e.barStyle,verticalBarStyle:e.verticalBarStyle,horizontalBarStyle:e.horizontalBarStyle})])}}),ht='<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',mt=ee({name:"QSpinnerDots",props:Re,setup(e){const{cSize:a,classes:c}=He(e);return()=>M("svg",{class:c.value,fill:"currentColor",width:a.value,height:a.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:ht})}}),{passive:Q}=Fe,bt=ee({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:Ve,initialIndex:{type:Number,default:0},disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:a,emit:c}){const d=v(!1),t=v(!0),o=v(null),l=v(null);let r=e.initialIndex,s,u;const p=g(()=>"q-infinite-scroll__loading"+(d.value===!0?"":" invisible"));function b(){if(e.disable===!0||d.value===!0||t.value===!1)return;const f=_(s),z=ne(s),C=he(s);e.reverse===!1?Math.round(z+C+e.offset)>=Math.round(f)&&m():Math.round(z)<=e.offset&&m()}function m(){if(e.disable===!0||d.value===!0||t.value===!1)return;r++,d.value=!0;const f=_(s);c("load",r,z=>{t.value===!0&&(d.value=!1,me(()=>{if(e.reverse===!0){const C=_(s),$=ne(s),y=C-f;G(s,$+y)}z===!0?O():o.value&&o.value.closest("body")&&u()}))})}function w(){r=0}function T(){t.value===!1&&(t.value=!0,s.addEventListener("scroll",u,Q)),b()}function O(){t.value===!0&&(t.value=!1,d.value=!1,s.removeEventListener("scroll",u,Q),u?.cancel?.())}function I(){if(s&&t.value===!0&&s.removeEventListener("scroll",u,Q),s=Xe(o.value,e.scrollTarget),t.value===!0){if(s.addEventListener("scroll",u,Q),e.reverse===!0){const f=_(s),z=he(s);G(s,f-z)}b()}}function R(f){r=f}function D(f){f=parseInt(f,10);const z=u;u=f<=0?b:Te(b,isNaN(f)===!0?100:f),s&&t.value===!0&&(z!==void 0&&s.removeEventListener("scroll",z,Q),s.addEventListener("scroll",u,Q))}function B(f){if(L.value===!0){if(l.value===null){f!==!0&&me(()=>{B(!0)});return}const z=`${d.value===!0?"un":""}pauseAnimations`;Array.from(l.value.getElementsByTagName("svg")).forEach(C=>{C[z]()})}}const L=g(()=>e.disable!==!0&&t.value===!0);P([d,L],()=>{B()}),P(()=>e.disable,f=>{f===!0?O():T()}),P(()=>e.reverse,()=>{d.value===!1&&t.value===!0&&b()}),P(()=>e.scrollTarget,I),P(()=>e.debounce,D);let E=!1;Oe(()=>{E!==!1&&s&&G(s,E)}),ke(()=>{E=s?ne(s):!1}),Pe(()=>{t.value===!0&&s.removeEventListener("scroll",u,Q)}),x(()=>{D(e.debounce),I(),d.value===!1&&B()});const H=Me();return Object.assign(H.proxy,{poll:()=>{u?.()},trigger:m,stop:O,reset:w,resume:T,setIndex:R,updateScrollTarget:I}),()=>{const f=$e(a.default,[]);return L.value===!0&&f[e.reverse===!1?"push":"unshift"](M("div",{ref:l,class:p.value},je(a.loading))),M("div",{class:"q-infinite-scroll",ref:o},f)}}}),yt=Ye({name:"SearchModel",props:{loading:{type:Boolean,required:!0},rows:{type:Array,required:!0},perPageAmount:{type:Number,default:15},dense:{type:Boolean,default:!1},sow:{type:Object,default:()=>({})},defaultValue:{type:String,default:""},value:{type:[String,Function,Array],default:"Name"},valueText2:{type:String,default:""},placeholder:{type:String,default:""},label:{type:String,default:""},searchLabel:{type:String,default:"Search "},filled:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},fetchRows:{type:Function,default:()=>{}},standout:{type:Boolean,default:!1},noFocus:{type:Boolean,default:!1},focusMountDelay:{type:Number,default:100},showSpinner:{type:Boolean,default:!1},popupWidth:{type:String,default:"20rem"},accountID:{type:Number,default:null},focusTracker:{type:Function,default:()=>({})},store:{type:Object,default:null},disabled:{type:Boolean,default:!1},resetSearch:{type:[Boolean,Function],default:!1},isCreateNew:{type:Boolean,default:!1},setCreateNew:{type:Function,default:()=>{}},rules:{type:Array,default:()=>[]}},setup(e){const a=at({search:"",menuOpen:!1,isMenuOpenTemplate:!0,page:1,indexPage:1,showSpinner:!0,searchWasChanged:!1,triggerInfinateScrollLoadQuery:!1,keyPressed:""}),c=st(),d=g(()=>c.darkMode),t=v(1);P(()=>e.resetSearch,()=>{a.search="",a.page=1}),P(()=>e.showSpinner,()=>{a.showSpinner=e.showSpinner});let o=null;const l=v([]);let r;const s=(y,S)=>{clearTimeout(r),r=setTimeout(y,S)};P(()=>a.search,()=>{s(async()=>{I(),l.value=[],a.page=1,t.value=1,o.setPage(a.page),o.setSearch(a.search),b.value=0,a.search!==e.defaultValue&&(a.searchWasChanged=!0)},200)});function u(y){a.keyPressed=y.key,/^[a-zA-Z0-9]$/.test(y.key)?p.value.focus():y.key==="Tab"&&z.value.length>0&&z.value[0].focus()}P(()=>e.rows,()=>{let y=e.rows;a.search===""?l.value=y:e.label!=="Locations"&&(l.value=y.sort((S,q)=>S[e.value]&&S[e.value].toLowerCase().includes("DRAFT")?2:q[e.value]&&q[e.value].toLowerCase().includes("DRAFT")?-2:S[e.value]&&S[e.value].toLowerCase().includes("DEPRECATED")?1:q[e.value]&&q[e.value].toLowerCase().includes("DEPRECATED")?-1:S[e.value]&&S[e.value].toLowerCase().includes(a.search.toLowerCase())?-3:q[e.value]&&q[e.value].toLowerCase().includes(a.search.toLowerCase())?3:0))});const p=v(null);x(()=>{l.value=e.rows,o=e.store?e.store:ut,e.noFocus||(p.value?(setTimeout(()=>{p.value.focus()},e.focusMountDelay),setTimeout(()=>{a.menuOpen=!0,ue(a.menuOpen)},e.focusMountDelay+50)):(setTimeout(()=>{p.value.focus()},1500),setTimeout(()=>{a.menuOpen=!0,ue(a.menuOpen)},e.focusMountDelay+50)))});const b=v(0),m=v([]),w=async(y,S)=>{console.log(t.value,"Scroll INDEX",a.page,"LoadQuery() Page"),t.value===a.page&&!e.loading&&e.rows.length>=e.perPageAmount?b.value<3&&(a.page++,o.setPage(a.page),e.rows.length===m.value.length?b.value++:b.value=0,console.log("loadQuery D",e.rows.length,"rows.length",m.value.length,"previousRows.length"),setTimeout(()=>{m.value=e.rows,t.value++,S()},1e3)):e.rows.length>=e.perPageAmount?setTimeout(()=>{t.value!==a.page?(a.indexPage=a.page,console.log("loadQuery A"),t.value,S()):(console.log("loadQuery B"),S())},1e3):setTimeout(()=>{console.log("loadQuery C",e.rows),S()},5e3)};x(()=>{e.defaultValue&&(a.search=e.defaultValue)}),P(()=>e.defaultValue,()=>{a.search=e.defaultValue});function T(){window.scrollTo(10,10)}const O=v(null);function I(){const y=O.value;y&&y.setScrollPosition("vertical",1,0)}function R(){setTimeout(()=>{a.menuOpen=!1,o.setValue("close")},1e3)}const D=v(!0);x(()=>{setTimeout(()=>{D.value=!1},1e3)});const B=g(()=>e.label==="Location"?e.accountID===null:!!e.disabled);function L(y){a.search=y[e.value],typeof e.value=="string"?a.search=y[e.value]:typeof e.value=="function"?a.search=e.value(y):a.search=y[e.value[0]],console.log(o,"searchOptionsX"),o.setValue(y),e.isCreateNew&&e.setCreateNew(!1)}function E(){}const H=v(!1),f=v(null),z=v([]),C=v(!1);function $(){}return{scrollToBottom:T,state:a,openMenu:ue,inputRef:p,closeMenu:ct,loadQuery:w,hideMenuEvent:it,customScrollbar:O,closeCustomMenu:R,initialLoad:D,disableInput:B,searchOptionsX:o,setComponentID:L,setInfinateScrollIndex:E,queryResultsAmount:b,computedRows:l,darkmode:d,menuRef:f,menuItemRefs:z,myMenuFocus:H,updateKeyPressed:u,menuTarget:C,helloThere:$}},methods:{focusMenu(){this.$refs.menuRef.contentEl.focus()}}}),gt={key:0,class:"break-all"},St={key:1},pt={key:2},zt={key:3,class:"ml-5 text-slate-500"},wt={key:0,class:"row justify-center q-my-md"},Ct={key:1,class:"flex items-center px-3"},Mt={class:"text-slate-500"};function Tt(e,a,c,d,t,o){return k(),V(nt,{ref:"inputRef",modelValue:e.state.search,"onUpdate:modelValue":a[3]||(a[3]=l=>e.state.search=l),type:"search",dense:e.dense,filled:e.filled,shandout:e.standout,rounded:e.rounded,label:e.searchLabel==="Search "?e.searchLabel+e.label:e.searchLabel,placeholder:e.placeholder?e.placeholder:null,"input-class":"text-left","input-style":e.darkmode?"":"color: black","bg-color":e.standout?"grey-3":"",dark:!e.standout&&e.darkmode,standout:e.standout,class:"relative",style:se(e.darkmode&&!e.standout?"background: #202a46":""),color:e.darkmode?"blue-5":"primary",disable:e.disableInput,rules:e.rules,"lazy-rules":e.rules&&!0,"hide-bottom-space":"",onClickOnce:e.fetchRows,onInput:a[4]||(a[4]=l=>{e.state.search=l}),onFocus:a[5]||(a[5]=l=>{e.openMenu(e.state.menuOpen),e.focusTracker(e.label),e.helloThere(l)}),onBlur:a[6]||(a[6]=()=>{e.closeCustomMenu(),e.focusTracker(e.label,"close")}),onKeydown:[a[7]||(a[7]=tt(l=>e.focusMenu(l),["tab"])),e.updateKeyPressed]},{append:A(()=>[!e.isCreateNew||e.state.search===""?(k(),V(be,{key:0,name:e.state.search===""?"search":"close",class:"cursor-pointer text-slate-500 clear-search",onClick:a[0]||(a[0]=()=>{e.resetSearch!==!1&&typeof e.resetSearch=="function"&&e.resetSearch(),e.state.search=""})},null,8,["name"])):K("",!0),e.isCreateNew&&e.state.search!==""&&e.state.searchWasChanged?(k(),V(et,{key:1,"icon-right":"add",label:"Create New",dense:e.dense,"no-caps":"",class:"border-2 text-slate-500 font-bold px-2 rounded absolute z-30 mb-2 top-2 h-6 w-30 flex items-center right-2",onClick:a[1]||(a[1]=()=>{e.closeMenu(),e.isCreateNew&&e.setCreateNew(!0)})},null,8,["dense"])):K("",!0)]),default:A(()=>[e.state.isMenuOpenTemplate?(k(),V(We,{key:0,ref:"menuRef","no-focus":"","model-value":e.state.menuOpen,onHide:a[2]||(a[2]=l=>{e.hideMenuEvent(l,e.state.menuOpen)}),onKeydown:e.updateKeyPressed},{default:A(()=>[Y(rt,{style:se([e.loading&&e.rows.length===0&&e.initialLoad||e.rows.length===0&&!e.loading?"height: 5rem":"height: 20rem",{transition:"all 0.2s"}]),class:Ue(e.darkmode?"bg-[#354161] text-grey-3":"")},{default:A(()=>[Y(vt,{ref:"customScrollbar",style:se([{height:"20rem"},"width: "+e.popupWidth])},{default:A(()=>[Y(bt,{offset:200,trigger:e.state.triggerInfinateScrollLoadQuery,setIndex:e.setInfinateScrollIndex,debounce:100,onLoad:e.loadQuery},{default:A(()=>[(k(!0),N(Ge,null,Je(e.label==="Locations"?e.rows:e.computedRows,(l,r)=>de((k(),V(Ze,{ref_for:!0,ref:e.menuItemRefs[r],key:r,clickable:"",onClick:s=>e.setComponentID(l)},{default:A(()=>[Y(_e,null,{default:A(()=>[typeof e.value=="string"?(k(),N("p",gt,W(l[e.value]?l[e.value]:"N/A"),1)):typeof e.value=="function"?(k(),N("p",St,W(e.value(l)),1)):(k(),N("p",pt,W(l[e.value[0]]?l[e.value[0]]:l[e.value[1]]),1)),e.valueText2!==""?(k(),N("p",zt,W(l[e.valueText2]),1)):K("",!0)]),_:2},1024)]),_:2},1032,["onClick"])),[[ot]])),128)),e.state.showSpinner?(k(),N("div",wt,[(e.rows.length>=e.perPageAmount||e.loading)&&e.queryResultsAmount<3?(k(),V(mt,{key:0,color:"primary",size:"40px"})):(k(),N("div",Ct,[Y(be,{name:"more_horiz",class:"text-slate-400 mr-3",size:"40px"}),xe("p",Mt," No "+W(e.rows.length<e.perPageAmount||e.queryResultsAmount<3?"More":"")+" Results ",1)]))])):K("",!0)]),_:1},8,["trigger","setIndex","onLoad"])]),_:1},8,["style"])]),_:1},8,["style","class"])]),_:1},8,["model-value","onKeydown"])):K("",!0)]),_:1},8,["modelValue","dense","filled","shandout","rounded","label","placeholder","input-style","bg-color","dark","standout","style","color","disable","rules","lazy-rules","onClickOnce","onKeydown"])}const Bt=Ke(yt,[["render",Tt]]);export{vt as Q,Bt as S,pe as T,bt as a,mt as b};
