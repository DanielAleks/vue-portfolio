import{a6 as qe,a7 as Me,al as Ae,am as se,a9 as f,ac as n,af as k,aa as i,a8 as S,ab as w,az as D,ah as B,Q as le,ao as $,ae as oe,E as N,au as ne,aj as Ve,U as g,O as je,T as r,aC as u,ax as H,ak as Le,aB as re}from"./index-DlQ8tVOz.js";import{Q as Ge,u as $e}from"./dark-mode-C5mcaMLC.js";import{Q as He}from"./QSelect-B9DBrxqc.js";import{Q as Ee}from"./QCardSection-C1H36PMc.js";import{Q as Oe,a as d}from"./QTabs-C9c8PM2p.js";import{Q as Ue}from"./QCard-Cs9621IB.js";import{L as ze}from"./ListQTable-DSPopQvG.js";import{u as Fe,s as We}from"./pinia-Cmi__TUk.js";import{u as Ye}from"./use-quasar-BZIho4RN.js";import{a as Ze}from"./ImplementationType-CqYOUFQu.js";import{I as xe}from"./ImplementationGuideline-QbFgJbXx.js";import{P as Ke}from"./Product-BVt3vq-5.js";import{S as Je}from"./Service-BUuqJTEy.js";import{S as Xe}from"./ServiceBundle-Cvme7ydJ.js";import{P as _e}from"./ProjectProcess-zy-26Lc3.js";import{R as et}from"./Requirement-BQyRtlz8.js";import{I as tt}from"./ImplementationTask-CtKuEimV.js";import{S as at}from"./Skill-CpTewySP.js";import{S as st}from"./SkillCategory-0OS5OOb1.js";import"./use-key-composition-4VZXaA1o.js";import"./index-wVk5-s-q.js";import"./parser-yifRV-tr.js";import"./QChip-Cw-nA85J.js";import"./QItemLabel-CWFH1t2i.js";import"./QDialog-1bsBaQz_.js";import"./QResizeObserver-BZ8Br9AP.js";import"./QToggle-Uap1FPWi.js";import"./QMarkupTable-DWmtGMs-.js";import"./ClosePopup-WKUFvClg.js";import"./QPagination-4qWxjayh.js";import"./QSkeleton-Dg5Bz9Qg.js";import"./QSeparator-BlxbP3Q5.js";const lt=Me({components:{ListQTable:ze},setup(){const s=Fe(We),l=N(()=>s.adminSearch);function E(){s.setAdminSearch(!0)}const O=N(()=>$e().darkmode),t=ne({selectedComponent:"Implementation Types",search:"",searchLoading:!1,isGridMode:!1,alwaysFalse:!1,showHelp:!1,allowHelpClose:!1,totalPages:0,page:1,projectProcessID:null,isRecurring:null,sortByModel:"",category:"",skillCategoryID:void 0}),m=Ve();g(()=>{m.path==="/search/implementation-types/"?t.selectedComponent="Implementation Types":m.path==="/search/implementation-guidelines/"?t.selectedComponent="Implementation Guidelines":m.path==="/search/implementation-tasks/"?t.selectedComponent="Implementation Tasks":m.path==="/search/requirements/"?t.selectedComponent="Requirements":m.path==="/search/products/"?t.selectedComponent="Products":m.path==="/search/services/"?t.selectedComponent="Services":m.path==="/search/service-bundles/"?t.selectedComponent="Service Bundles":m.path==="/search/skills/"?t.selectedComponent="Skills":t.selectedComponent="Implementation Types"},{immediate:!0});const h=je("windowWidth");g(()=>t.showHelp,()=>{setTimeout(()=>{t.allowHelpClose=!0},1e3)});const o=r([]);g(()=>t.sortByModel,()=>{t.sortByModel==="---"?o.value=[]:t.sortByModel==="Most Recent"?o.value=[{column:"CREATED_AT",order:"DESC"},{column:"UPDATED_AT",order:"DESC"}]:t.sortByModel==="Alphabetical A -> Z"?o.value=[{column:"NAME",order:"ASC"}]:t.sortByModel==="Alphabetical Z -> A"?o.value=[{column:"NAME",order:"DESC"}]:t.sortByModel==="Most Popular"&&(o.value=[{column:"SOW_COUNT",order:"DESC"}])});const{result:I,load:U}=u(Ze,()=>({Name:t.search,page:t.page,orderBy:o.value,first:15,ImplementationCategory:t.category})),{result:R,load:ie}=u(xe,()=>({Name:t.search,page:t.page,orderBy:o.value,first:15})),{result:P,load:me}=u(Ke,()=>({name:t.search,page:t.page,first:15,orderBy:o.value})),{result:Q,load:ue}=u(Je,()=>({name:t.search,page:t.page,first:15,orderBy:o.value})),{result:q,load:de}=u(Xe,()=>({name:t.search,page:t.page,first:15,orderBy:o.value})),{result:M,load:pe}=u(et,()=>({Name:t.search,page:t.page,orderBy:o.value,first:15})),{result:A,load:ce,refetch:fe}=u(tt,()=>({Name:t.search,page:t.page,project_process_id:t.projectProcessID,IsRecurring:t.isRecurring,orderBy:o.value,first:15})),{result:T,load:ge,refetch:he}=u(at,()=>({name:t.search,page:t.page,orderBy:o.value,categoryID:t.skillCategoryID,first:15})),V=r([]),j=r([]),z=r([]),F=r([]),W=r([]),Y=r([]),Z=r([]),x=r([]),a=ne([{name:"name",align:"left",label:"Name",field:e=>e.Name||e.name?e.Name??e.name:e.SkillName,format:e=>`${e}`,sortable:!0},{name:"status",label:"Status",align:"center",field:e=>e.IsDeprecated?"Deprecated":e.isDraft?"Draft":"Active"},{name:"actions",label:"Actions",align:"center"}]);function ve(){switch(t.selectedComponent){case"Implementation Types":U();break;case"Implementation Guidelines":ie();break;case"Products":me();break;case"Services":ue();break;case"Service Bundles":de();break;case"Requirements":pe();break;case"Implementation Tasks":ce();break;case"Skills":ge();break}}const p={name:"id",required:!0,label:"ID",align:"left",field:e=>e._id??e.autotask_id,format:e=>`${e}`,sortable:!0},be={name:"name",align:"left",label:"Name",field:e=>e.Name||e.name?e.Name??e.name:e.SkillName,format:e=>`${e}`,sortable:!0},K={name:"status",label:"Status",align:"center",field:e=>e.IsDeprecated?"Deprecated":e.isDraft?"Draft":"Active"},J={name:"actions",label:"Actions",align:"center"},ye={name:"includeByDefault",required:!0,label:"Include by Default",align:"center",field:e=>e.IncludeByDefault?"Yes":"No",format:e=>`${e}`,sortable:!0},C={name:"description",required:!0,label:"Description",align:"left",field:e=>e.Description||e.description?e.Description??e.description:"N/A",format:e=>`${e}`,sortable:!0},L={name:"periodType",required:!0,label:"Period Type",align:"left",field:e=>e.PeriodType==="m"?"Monthly":e.PeriodType==="y"?"Yearly":e.PeriodType==="o"?"One-Time":e.PeriodType??e.PeriodTypeName,format:e=>`${e}`,sortable:!0},ke={name:"isRecurring",required:!0,label:"Is Recurring",align:"left",field:e=>e.IsRecurring?"Yes":"No",format:e=>`${e}`,sortable:!0},Ce={name:"isCustomer",required:!0,label:"Customer Task",align:"center",field:e=>e.isCustomerTask?"Yes":"No",format:e=>`${e}`,sortable:!0},Se={name:"projectProcess",required:!0,label:"Project Process",align:"left",field:e=>e.ProjectProcessName,format:e=>`${e}`,sortable:!0},Ie={name:"category",required:!0,label:"Category",align:"center",field:e=>e.Category,format:e=>`${e}`,sortable:!0},Pe={name:"sowCount",label:"Sow Count",align:"center",field:e=>e.sow_count??"---",sortable:!0};function Te(){a.splice(0,a.length),setTimeout(()=>{switch(a.splice(0,0,be),h.value>600&&t.selectedComponent!=="Requirements"&&a.splice(1,0,K),t.isGridMode||a.splice(2,0,J),t.selectedComponent){case"Implementation Types":U(),a.splice(0,0,p),a.splice(a.length-1,0,Pe),a.splice(a.length-1,0,Ie);break;case"Implementation Guidelines":a.splice(0,0,p),a.splice(a.length-1,0,ye);break;case"Products":a.splice(0,0,p),a.splice(a.length-1,0,L),a.splice(a.length-1,0,C);break;case"Services":a.splice(0,0,p),a.splice(a.length-1,0,L),a.splice(a.length-1,0,C);break;case"Service Bundles":a.splice(0,0,p),a.splice(a.length-1,0,L),a.splice(a.length-1,0,C);break;case"Requirements":a.splice(a.length-1,0,C);break;case"Implementation Tasks":a.splice(0,0,p),a.splice(a.length-1,0,ke),a.splice(a.length-1,0,Ce),a.splice(a.length-1,0,Se);break;case"Skills":a.splice(0,0,p),a.splice(a.length-1,0,{name:"category",align:"center",label:"Category",field:e=>e.CategoryName??"N/A"}),a.splice(a.length-1,0,C);break;default:console.log("no columns were updated")}},10)}g(()=>h.value,()=>{h.value<600?t.isGridMode=!0:a.find(e=>e.name==="status")||a.splice(1,0,K)},{immediate:!0}),g(()=>t.isGridMode,()=>{t.isGridMode?a.splice(a.length-1,1):a.splice(a.length,0,J)}),g(()=>t.search,()=>{t.searchLoading=!0,setTimeout(()=>{b.value.result.length===0&&(t.searchLoading=!1)},5e3)});const v=r(["---","Most Recent","Alphabetical A -> Z","Alphabetical Z -> A"]);g(()=>t.selectedComponent,()=>{t.selectedComponent==="Services"||t.selectedComponent==="Products"||t.selectedComponent==="Service Bundles"?v.value.includes("Most Popular")||v.value.push("Most Popular"):v.value.includes("Most Popular")&&(v.value.splice(v.value.indexOf("Most Popular"),1),o.value.some(e=>e.column==="SOW_COUNT")&&(t.sortByModel="---",o.value=[])),t.page=1,ve(),Te(),t.searchLoading=!0,setTimeout(()=>{t.searchLoading=!1},2500)},{immediate:!0}),H(()=>{switch(t.searchLoading=!1,t.selectedComponent){case"Implementation Types":I.value&&(V.value=I.value.ImplementationTypes.data,t.totalPages=I.value.ImplementationTypes.paginatorInfo.lastPage);break;case"Implementation Guidelines":R.value&&(j.value=R.value.ImplementationGuidelines.data,t.totalPages=R.value.ImplementationGuidelines.paginatorInfo.lastPage);break;case"Products":P.value&&(console.log("productData",P.value),z.value=P.value.Products.data,t.totalPages=P.value.Products.paginatorInfo.lastPage);break;case"Services":Q.value&&(F.value=Q.value.Services.data,t.totalPages=Q.value.Services.paginatorInfo.lastPage);break;case"Service Bundles":q.value&&(W.value=q.value.ServiceBundles.data,t.totalPages=q.value.ServiceBundles.paginatorInfo.lastPage);break;case"Requirements":M.value&&(Y.value=M.value.Requirements.data,t.totalPages=M.value.Requirements.paginatorInfo.lastPage);break;case"Implementation Tasks":A.value&&(Z.value=A.value.ImplementationTasks.data.map(e=>({...e,ProjectProcessName:e.ProjectProcess&&e.ProjectProcess.Name})),t.totalPages=A.value.ImplementationTasks.paginatorInfo.lastPage);break;case"Skills":T.value&&(console.log(T.value,"SKILLs"),x.value=T.value.Skills.data,t.totalPages=T.value.Skills.paginatorInfo.lastPage);break}});const b=N(()=>{switch(t.selectedComponent){case"Implementation Types":return{result:V.value,pathName:"ImplementationDetails",path:"implementation-type/detail/"};case"Implementation Guidelines":return{result:j.value,pathName:"GuidelineDetails",path:"implementation-type/guideline/"};case"Products":return{result:z.value,pathName:"Product Details",path:"implementation-type/product/"};case"Services":return{result:F.value,pathName:"Service Details",path:"implementation-type/service/"};case"Service Bundles":return{result:W.value,pathName:"Service Bundle",path:"implementation-type/service_bundle/"};case"Requirements":return{result:Y.value,pathName:"ImplementationRequirementDetails",path:"implementation-type/requirement/"};case"Implementation Tasks":return{result:Z.value,pathName:"ImplementationTaskDetails",path:"implementation-type/task/"};case"Skills":return{result:x.value,pathName:"GuidelineSkillDetails",path:"implementation-type/skill/"};default:return{result:V.value,pathName:"ImplementationDetails",path:"implementation-type/detail/"}}}),X=Ye(),_=Le();function we(e,y,c){E(),console.log("open",c),c.ctrlKey||c.button===1||c==="openNewTab"?window.open(b.value.path+`${e}`,"_blank"):c==="openNewWindow"?window.open(b.value.path+`${e}`,"_blank","width=full,height=full"):c==="openIncognitoWindow"?window.open(b.value.path+`${e}`,"_blank","incognito=yes"):c.button!==2&&(X.loading.show({delay:100,message:"Redirecting to "+t.selectedComponent+"...",spinnerSize:100,spinnerColor:"primary",messageColor:"white",backgroundColor:"primary"}),setTimeout(()=>{X.loading.hide(),_.push({name:b.value.pathName,params:{id:e}})},1e3))}const{result:ee}=re(_e,()=>({first:20})),te=r([]);H(()=>{ee.value&&(te.value=ee.value.ProjectProcesses.data)});const De=["Date","Status","Implementation"];function Be(e){t.page=e}function Ne(e,y){console.log("type",e,"value",y),e==="ProjectProcess"?(t.projectProcessID=y,fe()):e==="Recurring"?y==="One-Time Only"?t.isRecurring=!1:t.isRecurring=!0:e==="ImplementationCategory"&&(t.selectedComponent==="Skills"?(t.skillCategoryID=y._id,he()):t.category=y.name,t.page=1)}const{result:ae}=re(st,()=>({name:""})),G=r([]),Re=r([{name:"AIS Labs",id:1},{name:"Consulting",id:2},{name:"Managed Services",id:3}]);H(()=>{ae.value&&(G.value=ae.value.SkillCategories.data,console.log(G.value,"skillCategories"))});const Qe=N(()=>t.selectedComponent==="Skills"?G.value:Re.value);return{columns:a,state:t,route:m,router:_,guidelines:j,componentType:b,implementationData:I,viewComponent:we,projectProcesses:te,filterByOptions:De,sortByOptions:v,setPage:Be,updateFields:Ne,windowWidth:h,adminSearch:l,darkmode:O,computedDropdownList:Qe}}}),ot={class:"px-0 sm:px-8 animate__animated animate__fadeIn w-full"},nt={class:"mb-5 sm:mb-0 w-full flex"},rt={class:"relative col-span-2 sm:absolute right-[-1rem] sm:right-5 sm:mt-0 flex justify-center"},it={class:"relative z-0"},mt={class:"flex justify-center"},ut={key:0,class:"absolute w-40 h-10 top-24 z-20"};function dt(s,l,E,O,t,m){const h=Ae("ListQTable");return f(),se("div",ot,[n(Ue,{class:oe(["mb-0 mt-5",s.darkmode?"bg-[#28334E]":"bg-white"]),style:{"box-shadow":"0px -2px 5px rgba(0, 0, 0, 0.2)","border-radius":"5px 5px 0px 0px"}},{default:i(()=>[n(Ee,{class:""},{default:i(()=>[k("div",nt,[n(Ge,{modelValue:s.state.search,"onUpdate:modelValue":l[2]||(l[2]=o=>s.state.search=o),filled:"",label:"Search "+s.state.selectedComponent,dense:"",dark:s.darkmode,class:"q-mb-md w-80 mr-8"},{append:i(()=>[s.state.search!==""?(f(),S(le,{key:0,name:"close",class:"cursor-pointer",onClick:l[1]||(l[1]=o=>s.state.search="")})):(f(),S(le,{key:1,name:"search"}))]),default:i(()=>[s.state.showHelp?(f(),S(D,{key:0,modelValue:s.state.showHelp,"onUpdate:modelValue":l[0]||(l[0]=o=>s.state.showHelp=o),class:"text-sm bg-white shadow-md border text-slate-600 hover:text-blue-400"},{default:i(()=>[...l[8]||(l[8]=[B("Search the Table Results",-1)])]),_:1},8,["modelValue"])):w("",!0)]),_:1},8,["modelValue","label","dark"]),s.state.selectedComponent==="Implementation Types"||s.state.selectedComponent==="Implementation Guidelines"||s.state.selectedComponent==="Requirements"||s.state.selectedComponent.includes("Tasks")?(f(),S($,{key:0,color:"primary",label:"Create "+s.state.selectedComponent.substring(0,s.state.selectedComponent.length-1),"no-caps":"",dense:"",class:"h-10 pl-5 pr-3 mr-8","icon-right":"arrow_forward",to:"/"+s.state.selectedComponent.replace(" ","-").toLowerCase().substring(0,s.state.selectedComponent.length-1)+"/create"},null,8,["label","to"])):w("",!0),n($,{color:"blue-grey-7",label:"Builder",glossy:"","no-caps":"",class:"h-10","icon-right":"add",to:"/implementation-builder"}),k("div",rt,[n(He,{modelValue:s.state.sortByModel,"onUpdate:modelValue":l[3]||(l[3]=o=>s.state.sortByModel=o),dense:"",filled:"",color:"primary",options:s.sortByOptions,class:"text-white mr-5","popup-content-class":"dark:text-white dark:bg-[#354161]",dark:s.darkmode},{prepend:i(()=>[...l[9]||(l[9]=[k("p",{class:"text-sm text-slate-500 dark:text-slate-300"},"Sort By",-1)])]),_:1},8,["modelValue","options","dark"]),n($,{icon:"help",rounded:"",size:"md",color:"primary",class:"text-primary w-10 h-10 border-4 border",onClick:l[4]||(l[4]=o=>s.state.showHelp=!s.state.showHelp)},{default:i(()=>[n(D,{class:"text-sm bg-white w-28 shadow-md border text-slate-600 hover:text-blue-400"},{default:i(()=>[...l[10]||(l[10]=[B(" How To Use ",-1)])]),_:1})]),_:1})])])]),_:1}),n(Oe,{modelValue:s.state.selectedComponent,"onUpdate:modelValue":l[6]||(l[6]=o=>s.state.selectedComponent=o),dense:"",class:oe(s.darkmode?"text-grey-4":"text-grey"),"active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":"","no-caps":"","mobile-arrows":""},{default:i(()=>[s.state.showHelp?(f(),S(D,{key:0,modelValue:s.state.showHelp,"onUpdate:modelValue":l[5]||(l[5]=o=>s.state.showHelp=o),class:"text-sm bg-white shadow-md border text-slate-600 hover:text-blue-400"},{default:i(()=>[...l[11]||(l[11]=[B("Select the type of Component you want to Search",-1)])]),_:1},8,["modelValue"])):w("",!0),n(d,{name:"Implementation Types",default:"",label:"Implementations"}),n(d,{name:"Implementation Guidelines",label:"Guidelines"}),n(d,{name:"Implementation Tasks",label:"Tasks"}),n(d,{name:"Requirements",label:"Requirements"}),n(d,{name:"Products",label:"Products"}),n(d,{name:"Services",label:"Services"}),n(d,{name:"Service Bundles",label:"Service Bundles"}),n(d,{name:"Skills",label:"Skills"})]),_:1},8,["modelValue","class"])]),_:1},8,["class"]),l[13]||(l[13]=k("hr",{class:"border border-slate-100 dark:border-slate-600"},null,-1)),k("div",it,[k("div",mt,[s.state.showHelp?(f(),se("div",ut,[n(D,{modelValue:s.state.showHelp,"onUpdate:modelValue":l[7]||(l[7]=o=>s.state.showHelp=o),anchor:"center middle",self:"center middle",class:"absolute top-10 mt-40 text-sm bg-white shadow-md border text-slate-600 hover:text-blue-400"},{default:i(()=>[...l[12]||(l[12]=[B("Table Filtering options can be found here, if a header has a Dropdown",-1)])]),_:1},8,["modelValue"])])):w("",!0)]),n(h,{style:{"margin-top":"0rem","z-index":"-1","border-radius":"0px 0px 5px 5px"},title:"List of "+s.state.selectedComponent,rows:s.componentType.result,columns:s.columns,handleRowClick:s.viewComponent,stateValue:s.state,setPage:s.setPage,loading:s.state.searchLoading,customNoDataText:"Searching for "+s.state.selectedComponent+"...",grid:!!s.state.isGridMode,searchableQuery:s.projectProcesses,dropdownList:s.computedDropdownList,updateFields:s.updateFields},null,8,["title","rows","columns","handleRowClick","stateValue","setPage","loading","customNoDataText","grid","searchableQuery","dropdownList","updateFields"])])])}const zt=qe(lt,[["render",dt]]);export{zt as default};
